/*! For license information please see gp-file-upload-pro.js.LICENSE.txt */
(()=>{var t={9008:(t,e,i)=>{t.exports=i(5735),i(1200),i(5630),i(2016),i(2677),i(9635),i(5166),i(7140),i(8922)},9635:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735),i(2677)],void 0===(o="function"==typeof(n=function(t){var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.tags.ifd1=e.tags,e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,i,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&((e=this[t])&&e.getAll?n[this.ifds[t].name]=e.getAll():(i=this.tags[t])&&(n[i]=this.getText(i)));return n},e.getName=function(t){var e=this.tags[t];return"object"==typeof e?this.ifds[t].name:e},function(){var t,i,n,r=e.tags;for(t in r)if(Object.prototype.hasOwnProperty.call(r,t))if(i=e.ifds[t])for(t in n=r[t])Object.prototype.hasOwnProperty.call(n,t)&&(i.map[n[t]]=Number(t));else e.map[r[t]]=Number(t)}()})?n.apply(e,r):n)||(t.exports=o)}()},2677:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735),i(5630)],void 0===(o="function"==typeof(n=function(t){function e(t){t&&(Object.defineProperty(this,"map",{value:this.ifds[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}e.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.ifds={ifd1:{name:"Thumbnail",map:e.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var i={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}};function n(t,e,n,r,o,a){var s,c,l,u,h,f,d=i[r];if(d){if(!((c=(s=d.size*o)>4?e+t.getUint32(n+8,a):n+8)+s>t.byteLength)){if(1===o)return d.getValue(t,c,a);for(l=[],u=0;u<o;u+=1)l[u]=d.getValue(t,c+u*d.size,a);if(d.ascii){for(h="",u=0;u<l.length&&"\0"!==(f=l[u]);u+=1)h+=f;return h}return l}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function r(t,e,i){return(!t||t[i])&&(!e||!0!==e[i])}function o(t,e,i,o,a,s,c,l){var u,h,f,d,p,g;if(i+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((h=i+2+12*(u=t.getUint16(i,o)))+4>t.byteLength)){for(f=0;f<u;f+=1)d=i+2+12*f,r(c,l,p=t.getUint16(d,o))&&(g=n(t,e,d,t.getUint16(d+2,o),t.getUint32(d+4,o),o),a[p]=g,s&&(s[p]=d));return t.getUint32(h,o)}console.log("Invalid Exif data: Invalid directory size.")}}i[7]=i[1],t.parseExifData=function(i,n,a,s,c){if(!c.disableExif){var l,u,h,f=c.includeExifTags,d=c.excludeExifTags||{34665:{37500:!0}},p=n+10;if(1165519206===i.getUint32(n+4))if(p+8>i.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===i.getUint16(n+8)){switch(i.getUint16(p)){case 18761:l=!0;break;case 19789:l=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===i.getUint16(p+2,l)?(u=i.getUint32(p+4,l),s.exif=new e,c.disableExifOffsets||(s.exifOffsets=new e,s.exifTiffOffset=p,s.exifLittleEndian=l),(u=o(i,p,p+u,l,s.exif,s.exifOffsets,f,d))&&r(f,d,"ifd1")&&(s.exif.ifd1=u,s.exifOffsets&&(s.exifOffsets.ifd1=p+u)),Object.keys(s.exif.ifds).forEach((function(t){!function(t,i,n,r,a,s,c){var l=t.exif[i];l&&(t.exif[i]=new e(i),t.exifOffsets&&(t.exifOffsets[i]=new e(i)),o(n,r,r+l,a,t.exif[i],t.exifOffsets&&t.exifOffsets[i],s&&s[i],c&&c[i]))}(s,t,i,p,l,f,d)})),(h=s.exif.ifd1)&&h[513]&&(h[513]=function(e,i,n){if(n){if(!(i+n>e.byteLength))return new Blob([t.bufferSlice.call(e.buffer,i,i+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}(i,p+h[513],h[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,i){var n=e.exifOffsets[274];return n?(new DataView(t,n+8,2).setUint16(0,i,e.exifLittleEndian),t):t}},t.writeExifData=function(e,i,n,r){return t.exifWriters[i.exif.map[n]](e,i,r)},t.ExifMap=e})?n.apply(e,r):n)||(t.exports=o)}()},2016:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735)],void 0===(o="function"==typeof(n=function(t){var e=t.global;e.fetch&&e.Request&&e.Response&&e.Response.prototype.blob?t.fetchBlob=function(t,i,n){function r(t){return t.blob()}if(e.Promise&&"function"!=typeof i)return fetch(new Request(t,i)).then(r);fetch(new Request(t,n)).then(r).then(i).catch((function(t){i(null,t)}))}:e.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(t.fetchBlob=function(t,i,n){function r(e,i){n=n||{};var r=new XMLHttpRequest;r.open(n.method||"GET",t),n.headers&&Object.keys(n.headers).forEach((function(t){r.setRequestHeader(t,n.headers[t])})),r.withCredentials="include"===n.credentials,r.responseType="blob",r.onload=function(){e(r.response)},r.onerror=r.onabort=r.ontimeout=function(t){e===i?i(null,t):i(t)},r.send(n.body)}return e.Promise&&"function"!=typeof i?(n=i,new Promise(r)):r(i,i)})})?n.apply(e,r):n)||(t.exports=o)}()},7140:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735),i(5166)],void 0===(o="function"==typeof(n=function(t){var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),i=this.map[t],n=this.stringValues[i];return n?n[e]:String(e)},e.getAll=function(){var t,e,i={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(i[e]=this.getText(e));return i},e.getName=function(t){return this.tags[t]},function(){var t,i=e.tags,n=e.map||{};for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[i[t]]=Number(t))}()})?n.apply(e,r):n)||(t.exports=o)}()},5166:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735),i(5630)],void 0===(o="function"==typeof(n=function(t){function e(){}function i(t,e,i,n,r){return"binary"===e.types[t]?new Blob([i.buffer.slice(n,n+r)]):"Uint16"===e.types[t]?i.getUint16(n):function(t,e,i){for(var n="",r=e+i,o=e;o<r;o+=1)n+=String.fromCharCode(t.getUint8(o));return n}(i,n,r)}function n(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function r(t,e,r,o,a,s){for(var c,l,u,h=e+r,f=e;f<h;)28===t.getUint8(f)&&2===t.getUint8(f+1)&&(u=t.getUint8(f+2),a&&!a[u]||s&&s[u]||(l=t.getInt16(f+3),c=i(u,o.iptc,t,f+5,l),o.iptc[u]=n(o.iptc[u],c),o.iptcOffsets&&(o.iptcOffsets[u]=f))),f+=1}function o(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function a(t,e){var i=t.getUint8(e+7);return i%2!=0&&(i+=1),0===i&&(i=4),i}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,i,n,s,c){if(!c.disableIptc)for(var l=i+n;i+8<l;){if(o(t,i)){var u=a(t,i),h=i+8+u;if(h>l){console.log("Invalid IPTC data: Invalid segment offset.");break}var f=t.getUint16(i+6+u);if(i+f>l){console.log("Invalid IPTC data: Invalid segment size.");break}return s.iptc=new e,c.disableIptcOffsets||(s.iptcOffsets=new e),void r(t,h,f,s,c.includeIptcTags,c.excludeIptcTags||{202:!0})}i+=1}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e})?n.apply(e,r):n)||(t.exports=o)}()},5630:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735)],n=function(t){var e=t.global,i=t.transform,n=e.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),r=e.ArrayBuffer&&ArrayBuffer.prototype.slice||function(t,e){e=e||this.byteLength-t;var i=new Uint8Array(this,t,e),n=new Uint8Array(e);return n.set(i),n.buffer},o={jpeg:{65505:[],65517:[]}};function a(i,a,s,c){var l=this;function u(a,u){if(!(e.DataView&&n&&i&&i.size>=12&&"image/jpeg"===i.type))return a(c);var h=s.maxMetaDataSize||262144;t.readFile(n.call(i,0,h),(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return u(new Error("Invalid JPEG file: Missing JPEG marker."));for(var i,n,h,f,d=2,p=e.byteLength-4,g=d;d<p&&((i=e.getUint16(d))>=65504&&i<=65519||65534===i);){if(d+(n=e.getUint16(d+2)+2)>e.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((h=o.jpeg[i])&&!s.disableMetaDataParsers)for(f=0;f<h.length;f+=1)h[f].call(l,e,d,n,c,s);g=d+=n}!s.disableImageHead&&g>6&&(c.imageHead=r.call(t,0,g)),a(c)}),u,"readAsArrayBuffer")||a(c)}return s=s||{},e.Promise&&"function"!=typeof a?(c=s=a||{},new Promise(u)):(c=c||{},u(a,a))}function s(t,e,i){return t&&e&&i?new Blob([i,n.call(t,e.byteLength)],{type:"image/jpeg"}):null}t.transform=function(n,r,o,s,c){t.requiresMetaData(r)?a(s,(function(a){a!==c&&(e.console&&console.log(a),a=c),i.call(t,n,r,o,s,a)}),r,c=c||{}):i.apply(t,arguments)},t.blobSlice=n,t.bufferSlice=r,t.replaceHead=function(t,i,n){var r={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!n&&e.Promise)return a(t,r).then((function(e){return s(t,e.imageHead,i)}));a(t,(function(e){n(s(t,e.imageHead,i))}),r)},t.parseMetaData=a,t.metaDataParsers=o},void 0===(o=n.apply(e,r))||(t.exports=o)}()},8922:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735),i(1200),i(5630)],void 0===(o="function"==typeof(n=function(t){var e=t.transform,i=t.requiresCanvas,n=t.requiresMetaData,r=t.transformCoordinates,o=t.getTransformedOptions;function a(e,i){var n=e&&e.orientation;return!0===n&&!t.orientation||1===n&&t.orientation||(!i||t.orientation)&&n>1&&n<9}function s(t,e){return t!==e&&(1===t&&e>1&&e<9||t>1&&t<9)}function c(t,e){if(e>1&&e<9)switch(t){case 2:case 4:return e>4;case 5:case 7:return e%2==0;case 6:case 8:return 2===e||4===e||5===e||7===e}return!1}(function(t){if(t.global.document){var e=document.createElement("img");e.onload=function(){if(t.orientation=2===e.width&&3===e.height,t.orientation){var i=t.createCanvas(1,1,!0).getContext("2d");i.drawImage(e,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==i.getImageData(0,0,1,1).data.toString()}},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="}})(t),t.requiresCanvas=function(e){return a(e)||i.call(t,e)},t.requiresMetaData=function(e){return a(e,!0)||n.call(t,e)},t.transform=function(i,n,r,o,a){e.call(t,i,n,(function(e,i){if(i){var n=t.orientation&&i.exif&&i.exif.get("Orientation");if(n>4&&n<9){var o=i.originalWidth,a=i.originalHeight;i.originalWidth=a,i.originalHeight=o}}r(e,i)}),o,a)},t.getTransformedOptions=function(e,i,n){var r=o.call(t,e,i),a=n.exif&&n.exif.get("Orientation"),l=r.orientation,u=t.orientation&&a;if(!0===l&&(l=a),!s(l,u))return r;var h=r.top,f=r.right,d=r.bottom,p=r.left,g={};for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(g[m]=r[m]);if(g.orientation=l,(l>4&&!(u>4)||l<5&&u>4)&&(g.maxWidth=r.maxHeight,g.maxHeight=r.maxWidth,g.minWidth=r.minHeight,g.minHeight=r.minWidth,g.sourceWidth=r.sourceHeight,g.sourceHeight=r.sourceWidth),u>1){switch(u){case 2:f=r.left,p=r.right;break;case 3:h=r.bottom,f=r.left,d=r.top,p=r.right;break;case 4:h=r.bottom,d=r.top;break;case 5:h=r.left,f=r.bottom,d=r.right,p=r.top;break;case 6:h=r.left,f=r.top,d=r.right,p=r.bottom;break;case 7:h=r.right,f=r.top,d=r.left,p=r.bottom;break;case 8:h=r.right,f=r.bottom,d=r.left,p=r.top}if(c(l,u)){var v=h,b=f;h=d,f=p,d=v,p=b}}switch(g.top=h,g.right=f,g.bottom=d,g.left=p,l){case 2:g.right=p,g.left=f;break;case 3:g.top=d,g.right=p,g.bottom=h,g.left=f;break;case 4:g.top=d,g.bottom=h;break;case 5:g.top=p,g.right=d,g.bottom=f,g.left=h;break;case 6:g.top=f,g.right=d,g.bottom=p,g.left=h;break;case 7:g.top=f,g.right=h,g.bottom=p,g.left=d;break;case 8:g.top=p,g.right=h,g.bottom=f,g.left=d}return g},t.transformCoordinates=function(e,i,n){r.call(t,e,i,n);var o=i.orientation,a=t.orientation&&n.exif&&n.exif.get("Orientation");if(s(o,a)){var l=e.getContext("2d"),u=e.width,h=e.height,f=u,d=h;switch((o>4&&!(a>4)||o<5&&a>4)&&(e.width=h,e.height=u),o>4&&(f=h,d=u),a){case 2:l.translate(f,0),l.scale(-1,1);break;case 3:l.translate(f,d),l.rotate(Math.PI);break;case 4:l.translate(0,d),l.scale(1,-1);break;case 5:l.rotate(-.5*Math.PI),l.scale(-1,1);break;case 6:l.rotate(-.5*Math.PI),l.translate(-f,0);break;case 7:l.rotate(-.5*Math.PI),l.translate(-f,d),l.scale(1,-1);break;case 8:l.rotate(.5*Math.PI),l.translate(0,-d)}switch(c(o,a)&&(l.translate(f,d),l.rotate(Math.PI)),o){case 2:l.translate(u,0),l.scale(-1,1);break;case 3:l.translate(u,h),l.rotate(Math.PI);break;case 4:l.translate(0,h),l.scale(1,-1);break;case 5:l.rotate(.5*Math.PI),l.scale(1,-1);break;case 6:l.rotate(.5*Math.PI),l.translate(0,-h);break;case 7:l.rotate(.5*Math.PI),l.translate(u,-h),l.scale(-1,1);break;case 8:l.rotate(-.5*Math.PI),l.translate(-u,0)}}}})?n.apply(e,r):n)||(t.exports=o)}()},1200:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5735)],void 0===(o="function"==typeof(n=function(t){var e=t.transform;t.createCanvas=function(e,i,n){if(n&&t.global.OffscreenCanvas)return new OffscreenCanvas(e,i);var r=document.createElement("canvas");return r.width=e,r.height=i,r},t.transform=function(i,n,r,o,a){e.call(t,t.scale(i,n,a),n,r,o,a)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var i,n,r,o,a=e.aspectRatio;if(!a)return e;for(n in i={},e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i.crop=!0,(r=e.maxWidth||t.naturalWidth||t.width)/(o=e.maxHeight||t.naturalHeight||t.height)>a?(i.maxWidth=o*a,i.maxHeight=o):(i.maxWidth=r,i.maxHeight=r/a),i},t.drawImage=function(t,e,i,n,r,o,a,s,c){var l=e.getContext("2d");return!1===c.imageSmoothingEnabled?(l.msImageSmoothingEnabled=!1,l.imageSmoothingEnabled=!1):c.imageSmoothingQuality&&(l.imageSmoothingQuality=c.imageSmoothingQuality),l.drawImage(t,i,n,r,o,0,0,a,s),l},t.requiresCanvas=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,i,n){i=i||{},n=n||{};var r,o,a,s,c,l,u,h,f,d,p,g,m=e.getContext||t.requiresCanvas(i)&&!!t.global.HTMLCanvasElement,v=e.naturalWidth||e.width,b=e.naturalHeight||e.height,y=v,w=b;function S(){var t=Math.max((a||y)/y,(s||w)/w);t>1&&(y*=t,w*=t)}function x(){var t=Math.min((r||y)/y,(o||w)/w);t<1&&(y*=t,w*=t)}if(m&&(u=(i=t.getTransformedOptions(e,i,n)).left||0,h=i.top||0,i.sourceWidth?(c=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(u=v-c-i.right)):c=v-u-(i.right||0),i.sourceHeight?(l=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(h=b-l-i.bottom)):l=b-h-(i.bottom||0),y=c,w=l),r=i.maxWidth,o=i.maxHeight,a=i.minWidth,s=i.minHeight,m&&r&&o&&i.crop?(y=r,w=o,(p=c/l-r/o)<0?(l=o*c/r,void 0===i.top&&void 0===i.bottom&&(h=(b-l)/2)):p>0&&(c=r*l/o,void 0===i.left&&void 0===i.right&&(u=(v-c)/2))):((i.contain||i.cover)&&(a=r=r||a,s=o=o||s),i.cover?(x(),S()):(S(),x())),m){if((f=i.pixelRatio)>1&&(!e.style.width||Math.floor(parseFloat(e.style.width,10))!==Math.floor(v/f))&&(y*=f,w*=f),t.orientationCropBug&&!e.getContext&&(u||h||c!==v||l!==b)&&(p=e,e=t.createCanvas(v,b,!0),t.drawImage(p,e,0,0,v,b,v,b,i)),(d=i.downsamplingRatio)>0&&d<1&&y<c&&w<l)for(;c*d>y;)g=t.createCanvas(c*d,l*d,!0),t.drawImage(e,g,u,h,c,l,g.width,g.height,i),u=0,h=0,c=g.width,l=g.height,e=g;return g=t.createCanvas(y,w),t.transformCoordinates(g,i,n),f>1&&(g.style.width=g.width/f+"px"),t.drawImage(e,g,u,h,c,l,y,w,i).setTransform(1,0,0,1,0,0),g}return e.width=y,e.height=w,e}})?n.apply(e,r):n)||(t.exports=o)}()},5735:function(t,e,i){var n;!function(r){"use strict";var o=r.URL||r.webkitURL;function a(t){return!!o&&o.createObjectURL(t)}function s(t){return!!o&&o.revokeObjectURL(t)}function c(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||s(t)}function l(t,e,i,n){if(!r.FileReader)return!1;var o=new FileReader;o.onload=function(){e.call(o,this.result)},i&&(o.onabort=o.onerror=function(){i.call(o,this.error)});var a=o[n||"readAsDataURL"];return a?(a.call(o,t),o):void 0}function u(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}function h(t,e,i){function n(e,n){var o,s=document.createElement("img");function f(t,i){e!==n?t instanceof Error?n(t):((i=i||{}).image=t,e(i)):e&&e(t,i)}function d(e,n){n&&r.console&&console.log(n),e&&u("Blob",e)?o=a(t=e):(o=t,i&&i.crossOrigin&&(s.crossOrigin=i.crossOrigin)),s.src=o}return s.onerror=function(t){c(o,i),n&&n.call(s,t)},s.onload=function(){c(o,i);var e={originalWidth:s.naturalWidth||s.width,originalHeight:s.naturalHeight||s.height};try{h.transform(s,i,f,t,e)}catch(t){n&&n(t)}},"string"==typeof t?(h.requiresMetaData(i)?h.fetchBlob(t,d,i):d(),s):u("Blob",t)||u("File",t)?(o=a(t))?(s.src=o,s):l(t,(function(t){s.src=t}),n):void 0}return r.Promise&&"function"!=typeof e?(i=e,new Promise(n)):n(e,e)}h.requiresMetaData=function(t){return t&&t.meta},h.fetchBlob=function(t,e){e()},h.transform=function(t,e,i,n,r){i(t,r)},h.global=r,h.readFile=l,h.isInstanceOf=u,h.createObjectURL=a,h.revokeObjectURL=s,void 0===(n=function(){return h}.call(e,i,e,t))||(t.exports=n)}("undefined"!=typeof window&&window||this)},9830:t=>{"use strict";t.exports=function(t,e){return"string"==typeof t?a(t):"number"==typeof t?o(t,e):null},t.exports.format=o,t.exports.parse=a;var e=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},r=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function o(t,r){if(!Number.isFinite(t))return null;var o=Math.abs(t),a=r&&r.thousandsSeparator||"",s=r&&r.unitSeparator||"",c=r&&void 0!==r.decimalPlaces?r.decimalPlaces:2,l=Boolean(r&&r.fixedDecimals),u=r&&r.unit||"";u&&n[u.toLowerCase()]||(u=o>=n.pb?"PB":o>=n.tb?"TB":o>=n.gb?"GB":o>=n.mb?"MB":o>=n.kb?"KB":"B");var h=(t/n[u.toLowerCase()]).toFixed(c);return l||(h=h.replace(i,"$1")),a&&(h=h.split(".").map((function(t,i){return 0===i?t.replace(e,a):t})).join(".")),h+s+u}function a(t){if("number"==typeof t&&!isNaN(t))return t;if("string"!=typeof t)return null;var e,i=r.exec(t),o="b";return i?(e=parseFloat(i[1]),o=i[4].toLowerCase()):(e=parseInt(t,10),o="b"),isNaN(e)?null:Math.floor(n[o]*e)}},5354:(t,e,i)=>{i(7327);var n=i(2649);t.exports=n("Array","filter")},3462:(t,e,i)=>{i(6699);var n=i(2649);t.exports=n("Array","includes")},2423:(t,e,i)=>{i(5192);var n=i(857);t.exports=n.Number.isFinite},9116:(t,e,i)=>{i(9601);var n=i(857);t.exports=n.Object.assign},5302:(t,e,i)=>{i(9720);var n=i(857);t.exports=n.Object.entries},4667:(t,e,i)=>{i(6833);var n=i(857);t.exports=n.Object.values},5813:(t,e,i)=>{i(6755);var n=i(2649);t.exports=n("String","startsWith")},9662:(t,e,i)=>{var n=i(7854),r=i(614),o=i(6330),a=n.TypeError;t.exports=function(t){if(r(t))return t;throw a(o(t)+" is not a function")}},1223:(t,e,i)=>{var n=i(5112),r=i(30),o=i(3070),a=n("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:r(null)}),t.exports=function(t){s[a][t]=!0}},9670:(t,e,i)=>{var n=i(7854),r=i(111),o=n.String,a=n.TypeError;t.exports=function(t){if(r(t))return t;throw a(o(t)+" is not an object")}},1318:(t,e,i)=>{var n=i(5656),r=i(1400),o=i(6244),a=function(t){return function(e,i,a){var s,c=n(e),l=o(c),u=r(a,l);if(t&&i!=i){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2092:(t,e,i)=>{var n=i(9974),r=i(1702),o=i(8361),a=i(7908),s=i(6244),c=i(5417),l=r([].push),u=function(t){var e=1==t,i=2==t,r=3==t,u=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,g,m,v){for(var b,y,w=a(p),S=o(w),x=n(g,m),C=s(S),A=0,I=v||c,_=e?I(p,C):i||f?I(p,0):void 0;C>A;A++)if((d||A in S)&&(y=x(b=S[A],A,w),t))if(e)_[A]=y;else if(y)switch(t){case 3:return!0;case 5:return b;case 6:return A;case 2:l(_,b)}else switch(t){case 4:return!1;case 7:l(_,b)}return h?-1:r||u?u:_}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},1194:(t,e,i)=>{var n=i(7293),r=i(5112),o=i(7392),a=r("species");t.exports=function(t){return o>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},7475:(t,e,i)=>{var n=i(7854),r=i(3157),o=i(4411),a=i(111),s=i(5112)("species"),c=n.Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===c||r(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},5417:(t,e,i)=>{var n=i(7475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},4326:(t,e,i)=>{var n=i(1702),r=n({}.toString),o=n("".slice);t.exports=function(t){return o(r(t),8,-1)}},648:(t,e,i)=>{var n=i(7854),r=i(1694),o=i(614),a=i(4326),s=i(5112)("toStringTag"),c=n.Object,l="Arguments"==a(function(){return arguments}());t.exports=r?a:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=c(t),s))?i:l?a(e):"Object"==(n=a(e))&&o(e.callee)?"Arguments":n}},9920:(t,e,i)=>{var n=i(2597),r=i(3887),o=i(1236),a=i(3070);t.exports=function(t,e,i){for(var s=r(e),c=a.f,l=o.f,u=0;u<s.length;u++){var h=s[u];n(t,h)||i&&n(i,h)||c(t,h,l(e,h))}}},4964:(t,e,i)=>{var n=i(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},8880:(t,e,i)=>{var n=i(9781),r=i(3070),o=i(9114);t.exports=n?function(t,e,i){return r.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9781:(t,e,i)=>{var n=i(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(t,e,i)=>{var n=i(7854),r=i(111),o=n.document,a=r(o)&&r(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},8113:(t,e,i)=>{var n=i(5005);t.exports=n("navigator","userAgent")||""},7392:(t,e,i)=>{var n,r,o=i(7854),a=i(8113),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,u=l&&l.v8;u&&(r=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!r&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(r=+n[1]),t.exports=r},2649:(t,e,i)=>{var n=i(7854),r=i(1702);t.exports=function(t,e){return r(n[t].prototype[e])}},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,i)=>{var n=i(7854),r=i(1236).f,o=i(8880),a=i(1320),s=i(3505),c=i(9920),l=i(4705);t.exports=function(t,e){var i,u,h,f,d,p=t.target,g=t.global,m=t.stat;if(i=g?n:m?n[p]||s(p,{}):(n[p]||{}).prototype)for(u in e){if(f=e[u],h=t.noTargetGet?(d=r(i,u))&&d.value:i[u],!l(g?u:p+(m?".":"#")+u,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;c(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),a(i,u,f,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9974:(t,e,i)=>{var n=i(1702),r=i(9662),o=i(4374),a=n(n.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?a(t,e):function(){return t.apply(e,arguments)}}},4374:(t,e,i)=>{var n=i(7293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:(t,e,i)=>{var n=i(4374),r=Function.prototype.call;t.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},6530:(t,e,i)=>{var n=i(9781),r=i(2597),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=r(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!n||n&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},1702:(t,e,i)=>{var n=i(4374),r=Function.prototype,o=r.bind,a=r.call,s=n&&o.bind(a,a);t.exports=n?function(t){return t&&s(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},5005:(t,e,i)=>{var n=i(7854),r=i(614),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t]):n[t]&&n[t][e]}},8173:(t,e,i)=>{var n=i(9662);t.exports=function(t,e){var i=t[e];return null==i?void 0:n(i)}},7854:(t,e,i)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},2597:(t,e,i)=>{var n=i(1702),r=i(7908),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},3501:t=>{t.exports={}},490:(t,e,i)=>{var n=i(5005);t.exports=n("document","documentElement")},4664:(t,e,i)=>{var n=i(9781),r=i(7293),o=i(317);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,i)=>{var n=i(7854),r=i(1702),o=i(7293),a=i(4326),s=n.Object,c=r("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):s(t)}:s},2788:(t,e,i)=>{var n=i(1702),r=i(614),o=i(5465),a=n(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return a(t)}),t.exports=o.inspectSource},9909:(t,e,i)=>{var n,r,o,a=i(8536),s=i(7854),c=i(1702),l=i(111),u=i(8880),h=i(2597),f=i(5465),d=i(6200),p=i(3501),g="Object already initialized",m=s.TypeError,v=s.WeakMap;if(a||f.state){var b=f.state||(f.state=new v),y=c(b.get),w=c(b.has),S=c(b.set);n=function(t,e){if(w(b,t))throw new m(g);return e.facade=t,S(b,t,e),e},r=function(t){return y(b,t)||{}},o=function(t){return w(b,t)}}else{var x=d("state");p[x]=!0,n=function(t,e){if(h(t,x))throw new m(g);return e.facade=t,u(t,x,e),e},r=function(t){return h(t,x)?t[x]:{}},o=function(t){return h(t,x)}}t.exports={set:n,get:r,has:o,enforce:function(t){return o(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=r(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return i}}}},3157:(t,e,i)=>{var n=i(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:t=>{t.exports=function(t){return"function"==typeof t}},4411:(t,e,i)=>{var n=i(1702),r=i(7293),o=i(614),a=i(648),s=i(5005),c=i(2788),l=function(){},u=[],h=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=n(f.exec),p=!f.exec(l),g=function(t){if(!o(t))return!1;try{return h(l,u,t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(f,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||r((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?m:g},4705:(t,e,i)=>{var n=i(7293),r=i(614),o=/#|\.prototype\./,a=function(t,e){var i=c[s(t)];return i==u||i!=l&&(r(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},111:(t,e,i)=>{var n=i(614);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},1913:t=>{t.exports=!1},7850:(t,e,i)=>{var n=i(111),r=i(4326),o=i(5112)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},2190:(t,e,i)=>{var n=i(7854),r=i(5005),o=i(614),a=i(7976),s=i(3307),c=n.Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&a(e.prototype,c(t))}},6244:(t,e,i)=>{var n=i(7466);t.exports=function(t){return n(t.length)}},133:(t,e,i)=>{var n=i(7392),r=i(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:(t,e,i)=>{var n=i(7854),r=i(614),o=i(2788),a=n.WeakMap;t.exports=r(a)&&/native code/.test(o(a))},3929:(t,e,i)=>{var n=i(7854),r=i(7850),o=n.TypeError;t.exports=function(t){if(r(t))throw o("The method doesn't accept regular expressions");return t}},7023:(t,e,i)=>{var n=i(7854).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},1574:(t,e,i)=>{"use strict";var n=i(9781),r=i(1702),o=i(6916),a=i(7293),s=i(1956),c=i(5181),l=i(5296),u=i(7908),h=i(8361),f=Object.assign,d=Object.defineProperty,p=r([].concat);t.exports=!f||a((function(){if(n&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach((function(t){e[t]=t})),7!=f({},t)[i]||s(f({},e)).join("")!=r}))?function(t,e){for(var i=u(t),r=arguments.length,a=1,f=c.f,d=l.f;r>a;)for(var g,m=h(arguments[a++]),v=f?p(s(m),f(m)):s(m),b=v.length,y=0;b>y;)g=v[y++],n&&!o(d,m,g)||(i[g]=m[g]);return i}:f},30:(t,e,i)=>{var n,r=i(9670),o=i(6048),a=i(748),s=i(3501),c=i(490),l=i(317),u=i(6200)("IE_PROTO"),h=function(){},f=function(t){return"<script>"+t+"<\/script>"},d=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},p=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;p="undefined"!=typeof document?document.domain&&n?d(n):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F):d(n);for(var i=a.length;i--;)delete p.prototype[a[i]];return p()};s[u]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(h.prototype=r(t),i=new h,h.prototype=null,i[u]=t):i=p(),void 0===e?i:o.f(i,e)}},6048:(t,e,i)=>{var n=i(9781),r=i(3353),o=i(3070),a=i(9670),s=i(5656),c=i(1956);e.f=n&&!r?Object.defineProperties:function(t,e){a(t);for(var i,n=s(e),r=c(e),l=r.length,u=0;l>u;)o.f(t,i=r[u++],n[i]);return t}},3070:(t,e,i)=>{var n=i(7854),r=i(9781),o=i(4664),a=i(3353),s=i(9670),c=i(4948),l=n.TypeError,u=Object.defineProperty,h=Object.getOwnPropertyDescriptor;e.f=r?a?function(t,e,i){if(s(t),e=c(e),s(i),"function"==typeof t&&"prototype"===e&&"value"in i&&"writable"in i&&!i.writable){var n=h(t,e);n&&n.writable&&(t[e]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return u(t,e,i)}:u:function(t,e,i){if(s(t),e=c(e),s(i),o)try{return u(t,e,i)}catch(t){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},1236:(t,e,i)=>{var n=i(9781),r=i(6916),o=i(5296),a=i(9114),s=i(5656),c=i(4948),l=i(2597),u=i(4664),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=s(t),e=c(e),u)try{return h(t,e)}catch(t){}if(l(t,e))return a(!r(o.f,t,e),t[e])}},8006:(t,e,i)=>{var n=i(6324),r=i(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},7976:(t,e,i)=>{var n=i(1702);t.exports=n({}.isPrototypeOf)},6324:(t,e,i)=>{var n=i(1702),r=i(2597),o=i(5656),a=i(1318).indexOf,s=i(3501),c=n([].push);t.exports=function(t,e){var i,n=o(t),l=0,u=[];for(i in n)!r(s,i)&&r(n,i)&&c(u,i);for(;e.length>l;)r(n,i=e[l++])&&(~a(u,i)||c(u,i));return u}},1956:(t,e,i)=>{var n=i(6324),r=i(748);t.exports=Object.keys||function(t){return n(t,r)}},5296:(t,e)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);e.f=r?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},4699:(t,e,i)=>{var n=i(9781),r=i(1702),o=i(1956),a=i(5656),s=r(i(5296).f),c=r([].push),l=function(t){return function(e){for(var i,r=a(e),l=o(r),u=l.length,h=0,f=[];u>h;)i=l[h++],n&&!s(r,i)||c(f,t?[i,r[i]]:r[i]);return f}};t.exports={entries:l(!0),values:l(!1)}},2140:(t,e,i)=>{var n=i(7854),r=i(6916),o=i(614),a=i(111),s=n.TypeError;t.exports=function(t,e){var i,n;if("string"===e&&o(i=t.toString)&&!a(n=r(i,t)))return n;if(o(i=t.valueOf)&&!a(n=r(i,t)))return n;if("string"!==e&&o(i=t.toString)&&!a(n=r(i,t)))return n;throw s("Can't convert object to primitive value")}},3887:(t,e,i)=>{var n=i(5005),r=i(1702),o=i(8006),a=i(5181),s=i(9670),c=r([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(s(t)),i=a.f;return i?c(e,i(t)):e}},857:(t,e,i)=>{var n=i(7854);t.exports=n},1320:(t,e,i)=>{var n=i(7854),r=i(614),o=i(2597),a=i(8880),s=i(3505),c=i(2788),l=i(9909),u=i(6530).CONFIGURABLE,h=l.get,f=l.enforce,d=String(String).split("String");(t.exports=function(t,e,i,c){var l,h=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:e;r(i)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(i,"name")||u&&i.name!==m)&&a(i,"name",m),(l=f(i)).source||(l.source=d.join("string"==typeof m?m:""))),t!==n?(h?!g&&t[e]&&(p=!0):delete t[e],p?t[e]=i:a(t,e,i)):p?t[e]=i:s(e,i)})(Function.prototype,"toString",(function(){return r(this)&&h(this).source||c(this)}))},4488:(t,e,i)=>{var n=i(7854).TypeError;t.exports=function(t){if(null==t)throw n("Can't call method on "+t);return t}},3505:(t,e,i)=>{var n=i(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},6200:(t,e,i)=>{var n=i(2309),r=i(9711),o=n("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5465:(t,e,i)=>{var n=i(7854),r=i(3505),o="__core-js_shared__",a=n[o]||r(o,{});t.exports=a},2309:(t,e,i)=>{var n=i(1913),r=i(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.3",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:(t,e,i)=>{var n=i(9303),r=Math.max,o=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):o(i,e)}},5656:(t,e,i)=>{var n=i(8361),r=i(4488);t.exports=function(t){return n(r(t))}},9303:t=>{var e=Math.ceil,i=Math.floor;t.exports=function(t){var n=+t;return n!=n||0===n?0:(n>0?i:e)(n)}},7466:(t,e,i)=>{var n=i(9303),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},7908:(t,e,i)=>{var n=i(7854),r=i(4488),o=n.Object;t.exports=function(t){return o(r(t))}},7593:(t,e,i)=>{var n=i(7854),r=i(6916),o=i(111),a=i(2190),s=i(8173),c=i(2140),l=i(5112),u=n.TypeError,h=l("toPrimitive");t.exports=function(t,e){if(!o(t)||a(t))return t;var i,n=s(t,h);if(n){if(void 0===e&&(e="default"),i=r(n,t,e),!o(i)||a(i))return i;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},4948:(t,e,i)=>{var n=i(7593),r=i(2190);t.exports=function(t){var e=n(t,"string");return r(e)?e:e+""}},1694:(t,e,i)=>{var n={};n[i(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},1340:(t,e,i)=>{var n=i(7854),r=i(648),o=n.String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:(t,e,i)=>{var n=i(7854).String;t.exports=function(t){try{return n(t)}catch(t){return"Object"}}},9711:(t,e,i)=>{var n=i(1702),r=0,o=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++r+o,36)}},3307:(t,e,i)=>{var n=i(133);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,i)=>{var n=i(9781),r=i(7293);t.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:(t,e,i)=>{var n=i(7854),r=i(2309),o=i(2597),a=i(9711),s=i(133),c=i(3307),l=r("wks"),u=n.Symbol,h=u&&u.for,f=c?u:u&&u.withoutSetter||a;t.exports=function(t){if(!o(l,t)||!s&&"string"!=typeof l[t]){var e="Symbol."+t;s&&o(u,t)?l[t]=u[t]:l[t]=c&&h?h(e):f(e)}return l[t]}},7327:(t,e,i)=>{"use strict";var n=i(2109),r=i(2092).filter;n({target:"Array",proto:!0,forced:!i(1194)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},6699:(t,e,i)=>{"use strict";var n=i(2109),r=i(1318).includes,o=i(1223);n({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},5192:(t,e,i)=>{i(2109)({target:"Number",stat:!0},{isFinite:i(7023)})},9601:(t,e,i)=>{var n=i(2109),r=i(1574);n({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},9720:(t,e,i)=>{var n=i(2109),r=i(4699).entries;n({target:"Object",stat:!0},{entries:function(t){return r(t)}})},6833:(t,e,i)=>{var n=i(2109),r=i(4699).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},6755:(t,e,i)=>{"use strict";var n,r=i(2109),o=i(1702),a=i(1236).f,s=i(7466),c=i(1340),l=i(3929),u=i(4488),h=i(4964),f=i(1913),d=o("".startsWith),p=o("".slice),g=Math.min,m=h("startsWith");r({target:"String",proto:!0,forced:!(!f&&!m&&(n=a(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(t){var e=c(u(this));l(t);var i=s(g(arguments.length>1?arguments[1]:void 0,e.length)),n=c(t);return d?d(e,n,i):p(e,i,i+n.length)===n}})},296:t=>{function e(t,e,i){var n,r,o,a,s;function c(){var l=Date.now()-a;l<e&&l>=0?n=setTimeout(c,e-l):(n=null,i||(s=t.apply(o,r),o=r=null))}null==e&&(e=100);var l=function(){o=this,r=arguments,a=Date.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(s=t.apply(o,r),o=r=null),s};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(s=t.apply(o,r),o=r=null,clearTimeout(n),n=null)},l}e.debounce=e,t.exports=e},5780:t=>{"use strict";const e=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},i=({clearTimeout:t,setTimeout:i,willResolve:n})=>(r,{value:o,signal:a}={})=>{if(a&&a.aborted)return Promise.reject(e());let s,c,l;const u=t||clearTimeout,h=()=>{u(s),l(e())},f=new Promise(((t,e)=>{c=()=>{a&&a.removeEventListener("abort",h),n?t(o):e(o)},l=e,s=(i||setTimeout)(c,r)}));return a&&a.addEventListener("abort",h,{once:!0}),f.clear=()=>{u(s),s=null,c()},f},n=t=>{const e=i({...t,willResolve:!0});return e.reject=i({...t,willResolve:!1}),e.range=(t,i,n)=>e(((t,e)=>Math.floor(Math.random()*(e-t+1)+t))(t,i),n),e},r=n();r.createWithTimers=n,t.exports=r,t.exports.default=r},7310:(t,e,i)=>{"use strict";t.exports=i(2702).polyfill()},2702:function(t,e,i){t.exports=function(){"use strict";function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,r=void 0,o=void 0,a=function(t,e){d[n]=t,d[n+1]=e,2===(n+=2)&&(o?o(p):y())};var s="undefined"!=typeof window?window:void 0,c=s||{},l=c.MutationObserver||c.WebKitMutationObserver,u="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(p,1)}}var d=new Array(1e3);function p(){for(var t=0;t<n;t+=2)(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0;n=0}var g,m,v,b,y=void 0;function w(t,e){var i=this,n=new this.constructor(C);void 0===n[x]&&k(n);var r=i._state;if(r){var o=arguments[r-1];a((function(){return T(r,n,o,i._result)}))}else D(i,n,t,e);return n}function S(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(C);return _(e,t),e}y=u?function(){return process.nextTick(p)}:l?(m=0,v=new l(p),b=document.createTextNode(""),v.observe(b,{characterData:!0}),function(){b.data=m=++m%2}):h?((g=new MessageChannel).port1.onmessage=p,function(){return g.port2.postMessage(0)}):void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(p)}:f()}catch(t){return f()}}():f();var x=Math.random().toString(36).substring(2);function C(){}var A=void 0;function I(e,i,n){i.constructor===e.constructor&&n===w&&i.constructor.resolve===S?function(t,e){1===e._state?O(t,e._result):2===e._state?P(t,e._result):D(e,void 0,(function(e){return _(t,e)}),(function(e){return P(t,e)}))}(e,i):void 0===n?O(e,i):t(n)?function(t,e,i){a((function(t){var n=!1,r=function(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}(i,e,(function(i){n||(n=!0,e!==i?_(t,i):O(t,i))}),(function(e){n||(n=!0,P(t,e))}),t._label);!n&&r&&(n=!0,P(t,r))}),t)}(e,i,n):O(e,i)}function _(t,e){if(t===e)P(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(n=e),null===n||"object"!==r&&"function"!==r)O(t,e);else{var i=void 0;try{i=e.then}catch(e){return void P(t,e)}I(t,e,i)}var n,r}function E(t){t._onerror&&t._onerror(t._result),R(t)}function O(t,e){t._state===A&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(R,t))}function P(t,e){t._state===A&&(t._state=2,t._result=e,a(E,t))}function D(t,e,i,n){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+1]=i,r[o+2]=n,0===o&&t._state&&a(R,t)}function R(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,r=void 0,o=t._result,a=0;a<e.length;a+=3)n=e[a],r=e[a+i],n?T(i,n,r,o):r(o);t._subscribers.length=0}}function T(e,i,n,r){var o=t(n),a=void 0,s=void 0,c=!0;if(o){try{a=n(r)}catch(t){c=!1,s=t}if(i===a)return void P(i,new TypeError("A promises callback cannot return that same promise."))}else a=r;i._state!==A||(o&&c?_(i,a):!1===c?P(i,s):1===e?O(i,a):2===e&&P(i,a))}var M=0;function k(t){t[x]=M++,t._state=void 0,t._result=void 0,t._subscribers=[]}var F=function(){function t(t,i){this._instanceConstructor=t,this.promise=new t(C),this.promise[x]||k(this.promise),e(i)?(this.length=i.length,this._remaining=i.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(i),0===this._remaining&&O(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===S){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(t){a=!0,o=t}if(r===w&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===L){var s=new i(C);a?P(s,o):I(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===A&&(this._remaining--,2===t?P(n,i):this._result[e]=i),0===this._remaining&&O(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;D(t,void 0,(function(t){return i._settledAt(1,e,t)}),(function(t){return i._settledAt(2,e,t)}))},t}();var L=function(){function e(t){this[x]=M++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){_(t,e)}),(function(e){P(t,e)}))}catch(e){P(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var i=this,n=i.constructor;return t(e)?i.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):i.then(e,e)},e}();return L.prototype.then=w,L.all=function(t){return new F(this,t).promise},L.race=function(t){var i=this;return e(t)?new i((function(e,n){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(e,n)})):new i((function(t,e){return e(new TypeError("You must pass an array to race."))}))},L.resolve=S,L.reject=function(t){var e=new this(C);return P(e,t),e},L._setScheduler=function(t){o=t},L._setAsap=function(t){a=t},L._asap=a,L.polyfill=function(){var t=void 0;if(void 0!==i.g)t=i.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=L},L.Promise=L,L}()},9483:(t,e,i)=>{t.exports=function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[a]={exports:{}};e[a][0].call(l.exports,(function(t){return r(e[a][1][t]||t)}),l,l.exports,t,e,i,n)}return i[a].exports}for(var o=void 0,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,n){(function(t){"use strict";var i,n,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(u),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),i=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,i=function(){c.port2.postMessage(0)}}var l=[];function u(){var t,e;n=!0;for(var i=l.length;i;){for(e=l,l=[],t=-1;++t<i;)e[t]();i=l.length}n=!1}e.exports=function(t){1!==l.push(t)||n||i()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){"use strict";var n=t(1);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==r&&d(this,t)}function u(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function h(t,e,i){n((function(){var n;try{n=e(i)}catch(e){return o.reject(t,e)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var i=!1;function n(e){i||(i=!0,o.reject(t,e))}function r(e){i||(i=!0,o.resolve(t,e))}var a=p((function(){e(r,n)}));"error"===a.status&&n(a.value)}function p(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}e.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var i=new this.constructor(r);return this.state!==c?h(i,this.state===s?t:e,this.outcome):this.queue.push(new u(i,t,e)),i},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var i=p(f,e);if("error"===i.status)return o.reject(t,i.value);var n=i.value;if(n)d(t,n);else{t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,c=-1,l=new this(r);++c<i;)u(t[c],c);return l;function u(t,r){e.resolve(t).then((function(t){a[r]=t,++s!==i||n||(n=!0,o.resolve(l,a))}),(function(t){n||(n=!0,o.reject(l,t))}))}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i,n=t.length,a=!1;if(!n)return this.resolve([]);for(var s=-1,c=new this(r);++s<n;)i=t[s],e.resolve(i).then((function(t){a||(a=!0,o.resolve(c,t))}),(function(t){a||(a=!0,o.reject(c,t))}));return c}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)i.append(t[n]);return i.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function c(t,e,i){"function"==typeof e&&t.then(e),"function"==typeof i&&t.catch(i)}function l(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",f=void 0,d={},p=Object.prototype.toString,g="readonly",m="readwrite";function v(t){for(var e=t.length,i=new ArrayBuffer(e),n=new Uint8Array(i),r=0;r<e;r++)n[r]=t.charCodeAt(r);return i}function b(t){return"boolean"==typeof f?a.resolve(f):function(t){return new a((function(e){var i=t.transaction(h,m),n=o([""]);i.objectStore(h).put(n,"key"),i.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},i.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);e(i||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return f=t}))}function y(t){var e=d[t.name],i={};i.promise=new a((function(t,e){i.resolve=t,i.reject=e})),e.deferredOperations.push(i),e.dbReady?e.dbReady=e.dbReady.then((function(){return i.promise})):e.dbReady=i.promise}function w(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function S(t,e){var i=d[t.name].deferredOperations.pop();if(i)return i.reject(e),i.promise}function x(t,e){return new a((function(i,n){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return i(t.db);y(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var a=r.open.apply(r,o);e&&(a.onupgradeneeded=function(e){var i=a.result;try{i.createObjectStore(t.storeName),e.oldVersion<=1&&i.createObjectStore(h)}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),n(a.error)},a.onsuccess=function(){var e=a.result;e.onversionchange=function(t){t.target.close()},i(e),w(t)}}))}function C(t){return x(t,!1)}function A(t){return x(t,!0)}function I(t,e){if(!t.db)return!0;var i=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,r=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||i){if(i){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function _(t){return o([v(atob(t.data))],{type:t.type})}function E(t){return t&&t.__local_forage_encoded_blob}function O(t){var e=this,i=e._initReady().then((function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return c(i,t,t),i}function P(t,e,i,n){void 0===n&&(n=1);try{var r=t.db.transaction(t.storeName,e);i(null,r)}catch(r){if(n>0&&(!t.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===r.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),A(t)})).then((function(){return function(t){y(t);for(var e=d[t.name],i=e.forages,n=0;n<i.length;n++){var r=i[n];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return t.db=null,C(t).then((function(e){return t.db=e,I(t)?A(t):e})).then((function(n){t.db=e.db=n;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=n})).catch((function(e){throw S(t,e),e}))}(t).then((function(){P(t,e,i,n-1)}))})).catch(i);i(r)}}var D={_driver:"asyncStorage",_initStorage:function(t){var e=this,i={db:null};if(t)for(var n in t)i[n]=t[n];var r=d[i.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},d[i.name]=r),r.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=O);var o=[];function s(){return a.resolve()}for(var c=0;c<r.forages.length;c++){var l=r.forages[c];l!==e&&o.push(l._initReady().catch(s))}var u=r.forages.slice(0);return a.all(o).then((function(){return i.db=r.db,C(i)})).then((function(t){return i.db=t,I(i,e._defaultConfig.version)?A(i):t})).then((function(t){i.db=r.db=t,e._dbInfo=i;for(var n=0;n<u.length;n++){var o=u[n];o!==e&&(o._dbInfo.db=i.db,o._dbInfo.version=i.version)}}))},_support:function(){try{if(!r||!r.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var i=this,n=new a((function(e,n){i.ready().then((function(){P(i._dbInfo,g,(function(r,o){if(r)return n(r);try{var a=o.objectStore(i._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var i=a.result;if(i){var n=i.value;E(n)&&(n=_(n));var r=t(n,i.key,s++);void 0!==r?e(r):i.continue()}else e()},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},getItem:function(t,e){var i=this;t=l(t);var n=new a((function(e,n){i.ready().then((function(){P(i._dbInfo,g,(function(r,o){if(r)return n(r);try{var a=o.objectStore(i._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),E(t)&&(t=_(t)),e(t)},a.onerror=function(){n(a.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},setItem:function(t,e,i){var n=this;t=l(t);var r=new a((function(i,r){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===p.call(e)?b(o.db).then((function(t){return t?e:(i=e,new a((function(t,e){var n=new FileReader;n.onerror=e,n.onloadend=function(e){var n=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:i.type})},n.readAsBinaryString(i)})));var i})):e})).then((function(e){P(n._dbInfo,m,(function(o,a){if(o)return r(o);try{var s=a.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var c=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),i(e)},a.onabort=a.onerror=function(){var t=c.error?c.error:c.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return s(r,i),r},removeItem:function(t,e){var i=this;t=l(t);var n=new a((function(e,n){i.ready().then((function(){P(i._dbInfo,m,(function(r,o){if(r)return n(r);try{var a=o.objectStore(i._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){n(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},clear:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){P(e._dbInfo,m,(function(n,r){if(n)return i(n);try{var o=r.objectStore(e._dbInfo.storeName).clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=o.error?o.error:o.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return s(i,t),i},length:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){P(e._dbInfo,g,(function(n,r){if(n)return i(n);try{var o=r.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){i(o.error)}}catch(t){i(t)}}))})).catch(i)}));return s(i,t),i},key:function(t,e){var i=this,n=new a((function(e,n){t<0?e(null):i.ready().then((function(){P(i._dbInfo,g,(function(r,o){if(r)return n(r);try{var a=o.objectStore(i._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var i=c.result;i?0===t||s?e(i.key):(s=!0,i.advance(t)):e(null)},c.onerror=function(){n(c.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,e),n},keys:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){P(e._dbInfo,g,(function(n,r){if(n)return i(n);try{var o=r.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var e=o.result;e?(a.push(e.key),e.continue()):t(a)},o.onerror=function(){i(o.error)}}catch(t){i(t)}}))})).catch(i)}));return s(i,t),i},dropInstance:function(t,e){e=u.apply(this,arguments);var i=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||i.name,t.storeName=t.storeName||i.storeName);var n,o=this;if(t.name){var c=t.name===i.name&&o._dbInfo.db?a.resolve(o._dbInfo.db):C(t).then((function(e){var i=d[t.name],n=i.forages;i.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e}));n=t.storeName?c.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var i=e.version+1;y(t);var n=d[t.name],o=n.forages;e.close();for(var s=0;s<o.length;s++){var c=o[s];c._dbInfo.db=null,c._dbInfo.version=i}var l=new a((function(e,n){var o=r.open(t.name,i);o.onerror=function(t){o.result.close(),n(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}}));return l.then((function(t){n.db=t;for(var e=0;e<o.length;e++){var i=o[e];i._dbInfo.db=t,w(i._dbInfo)}})).catch((function(e){throw(S(t,e)||a.resolve()).catch((function(){})),e}))}})):c.then((function(e){y(t);var i=d[t.name],n=i.forages;e.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;var s=new a((function(e,i){var n=r.deleteDatabase(t.name);n.onerror=function(){var t=n.result;t&&t.close(),i(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}}));return s.then((function(t){i.db=t;for(var e=0;e<n.length;e++)w(n[e]._dbInfo)})).catch((function(e){throw(S(t,e)||a.resolve()).catch((function(){})),e}))}))}else n=a.reject("Invalid arguments");return s(n,e),n}};var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",k=M.length,F="arbf",L="blob",z="si08",j="ui08",N="uic8",B="si16",U="si32",H="ur16",W="ui32",$="fl32",G="fl64",V=k+F.length,X=Object.prototype.toString;function Y(t){var e,i,n,r,o,a=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(e=0;e<s;e+=4)i=R.indexOf(t[e]),n=R.indexOf(t[e+1]),r=R.indexOf(t[e+2]),o=R.indexOf(t[e+3]),u[c++]=i<<2|n>>4,u[c++]=(15&n)<<4|r>>2,u[c++]=(3&r)<<6|63&o;return l}function q(t){var e,i=new Uint8Array(t),n="";for(e=0;e<i.length;e+=3)n+=R[i[e]>>2],n+=R[(3&i[e])<<4|i[e+1]>>4],n+=R[(15&i[e+1])<<2|i[e+2]>>6],n+=R[63&i[e+2]];return i.length%3==2?n=n.substring(0,n.length-1)+"=":i.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var K={serialize:function(t,e){var i="";if(t&&(i=X.call(t)),t&&("[object ArrayBuffer]"===i||t.buffer&&"[object ArrayBuffer]"===X.call(t.buffer))){var n,r=M;t instanceof ArrayBuffer?(n=t,r+=F):(n=t.buffer,"[object Int8Array]"===i?r+=z:"[object Uint8Array]"===i?r+=j:"[object Uint8ClampedArray]"===i?r+=N:"[object Int16Array]"===i?r+=B:"[object Uint16Array]"===i?r+=H:"[object Int32Array]"===i?r+=U:"[object Uint32Array]"===i?r+=W:"[object Float32Array]"===i?r+=$:"[object Float64Array]"===i?r+=G:e(new Error("Failed to get type for BinaryArray"))),e(r+q(n))}else if("[object Blob]"===i){var o=new FileReader;o.onload=function(){var i="~~local_forage_type~"+t.type+"~"+q(this.result);e("__lfsc__:blob"+i)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(i){console.error("Couldn't convert value into a JSON string: ",t),e(null,i)}},deserialize:function(t){if(t.substring(0,k)!==M)return JSON.parse(t);var e,i=t.substring(V),n=t.substring(k,V);if(n===L&&T.test(i)){var r=i.match(T);e=r[1],i=i.substring(r[0].length)}var a=Y(i);switch(n){case F:return a;case L:return o([a],{type:e});case z:return new Int8Array(a);case j:return new Uint8Array(a);case N:return new Uint8ClampedArray(a);case B:return new Int16Array(a);case H:return new Uint16Array(a);case U:return new Int32Array(a);case W:return new Uint32Array(a);case $:return new Float32Array(a);case G:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:Y,bufferToString:q};function Q(t,e,i,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,n)}function J(t,e,i,n,r,o){t.executeSql(i,n,r,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?o(t,a):Q(t,e,(function(){t.executeSql(i,n,r,o)}),o)}),o):o(t,a)}),o)}function Z(t,e,i,n){var r=this;t=l(t);var o=new a((function(o,a){r.ready().then((function(){void 0===e&&(e=null);var s=e,c=r._dbInfo;c.serializer.serialize(e,(function(e,l){l?a(l):c.db.transaction((function(i){J(i,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void o(Z.apply(r,[t,s,i,n-1]));a(e)}}))}))})).catch(a)}));return s(o,i),o}function tt(t){return new a((function(e,i){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(i,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).name);e({db:t,storeNames:r})}),(function(t,e){i(e)}))}),(function(t){i(t)}))}))}var et={_driver:"webSQLStorage",_initStorage:function(t){var e=this,i={db:null};if(t)for(var n in t)i[n]="string"!=typeof t[n]?t[n].toString():t[n];var r=new a((function(t,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(t){return n(t)}i.db.transaction((function(r){Q(r,i,(function(){e._dbInfo=i,t()}),(function(t,e){n(e)}))}),n)}));return i.serializer=K,r},_support:"function"==typeof openDatabase,iterate:function(t,e){var i=this,n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){J(i,r,"SELECT * FROM "+r.storeName,[],(function(i,n){for(var o=n.rows,a=o.length,s=0;s<a;s++){var c=o.item(s),l=c.value;if(l&&(l=r.serializer.deserialize(l)),void 0!==(l=t(l,c.key,s+1)))return void e(l)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},getItem:function(t,e){var i=this;t=l(t);var n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){J(i,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,i){var n=i.rows.length?i.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},setItem:function(t,e,i){return Z.apply(this,[t,e,i,1])},removeItem:function(t,e){var i=this;t=l(t);var n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){J(i,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},clear:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){J(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,t),i},length:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){J(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,i){var n=i.rows.item(0).c;t(n)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,t),i},key:function(t,e){var i=this,n=new a((function(e,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){J(i,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,i){var n=i.rows.length?i.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,e),n},keys:function(t){var e=this,i=new a((function(t,i){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){J(e,n,"SELECT key FROM "+n.storeName,[],(function(e,i){for(var n=[],r=0;r<i.rows.length;r++)n.push(i.rows.item(r).key);t(n)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,t),i},dropInstance:function(t,e){e=u.apply(this,arguments);var i=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||i.name,t.storeName=t.storeName||i.storeName);var n,r=this;return s(n=t.name?new a((function(e){var n;n=t.name===i.name?r._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(tt(n))})).then((function(t){return new a((function(e,i){t.db.transaction((function(n){function r(t){return new a((function(e,i){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){i(e)}))}))}for(var o=[],s=0,c=t.storeNames.length;s<c;s++)o.push(r(t.storeNames[s]));a.all(o).then((function(){e()})).catch((function(t){i(t)}))}),(function(t){i(t)}))}))})):a.reject("Invalid arguments"),e),n}};function it(t,e){var i=t.name+"/";return t.storeName!==e.storeName&&(i+=t.storeName+"/"),i}function nt(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||localStorage.length>0}var rt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var i in t)e[i]=t[i];return e.keyPrefix=it(t,this._defaultConfig),nt()?(this._dbInfo=e,e.serializer=K,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var i=this,n=i.ready().then((function(){for(var e=i._dbInfo,n=e.keyPrefix,r=n.length,o=localStorage.length,a=1,s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var l=localStorage.getItem(c);if(l&&(l=e.serializer.deserialize(l)),void 0!==(l=t(l,c.substring(r),a++)))return l}}}));return s(n,e),n},getItem:function(t,e){var i=this;t=l(t);var n=i.ready().then((function(){var e=i._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return s(n,e),n},setItem:function(t,e,i){var n=this;t=l(t);var r=n.ready().then((function(){void 0===e&&(e=null);var i=e;return new a((function(r,o){var a=n._dbInfo;a.serializer.serialize(e,(function(e,n){if(n)o(n);else try{localStorage.setItem(a.keyPrefix+t,e),r(i)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return s(r,i),r},removeItem:function(t,e){var i=this;t=l(t);var n=i.ready().then((function(){var e=i._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(n,e),n},clear:function(t){var e=this,i=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return s(i,t),i},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var i=this,n=i.ready().then((function(){var e,n=i._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return s(n,e),n},keys:function(t){var e=this,i=e.ready().then((function(){for(var t=e._dbInfo,i=localStorage.length,n=[],r=0;r<i;r++){var o=localStorage.key(r);0===o.indexOf(t.keyPrefix)&&n.push(o.substring(t.keyPrefix.length))}return n}));return s(i,t),i},dropInstance:function(t,e){if(e=u.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var i=this.config();t.name=t.name||i.name,t.storeName=t.storeName||i.storeName}var n,r=this;return n=t.name?new a((function(e){t.storeName?e(it(t,r._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var i=localStorage.key(e);0===i.indexOf(t)&&localStorage.removeItem(i)}})):a.reject("Invalid arguments"),s(n,e),n}},ot=function(t,e){for(var i=t.length,n=0;n<i;){if((r=t[n])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;n++}var r,o;return!1},at=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},st={},ct={},lt={INDEXEDDB:D,WEBSQL:et,LOCALSTORAGE:rt},ut=[lt.INDEXEDDB._driver,lt.WEBSQL._driver,lt.LOCALSTORAGE._driver],ht=["dropInstance"],ft=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ht),dt={description:"",driver:ut.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pt(t,e){t[e]=function(){var i=arguments;return t.ready().then((function(){return t[e].apply(t,i)}))}}function gt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var i in e)e.hasOwnProperty(i)&&(at(e[i])?arguments[0][i]=e[i].slice():arguments[0][i]=e[i])}return arguments[0]}var mt=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lt)if(lt.hasOwnProperty(i)){var n=lt[i],r=n._driver;this[i]=r,st[r]||this.defineDriver(n)}this._defaultConfig=gt({},dt),this._config=gt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,i){var n=new a((function(e,i){try{var n=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void i(r);for(var o=ft.concat("_initStorage"),c=0,l=o.length;c<l;c++){var u=o[c];if((!ot(ht,u)||t[u])&&"function"!=typeof t[u])return void i(r)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),i=a.reject(e);return s(i,arguments[arguments.length-1]),i}},i=0,n=ht.length;i<n;i++){var r=ht[i];t[r]||(t[r]=e(r))}}();var h=function(i){st[n]&&console.info("Redefining LocalForage driver: "+n),st[n]=t,ct[n]=i,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,i):h(!!t._support):h(!0)}catch(t){i(t)}}));return c(n,e,i),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,i){var n=st[t]?a.resolve(st[t]):a.reject(new Error("Driver not found."));return c(n,e,i),n},t.prototype.getSerializer=function(t){var e=a.resolve(K);return c(e,t),e},t.prototype.ready=function(t){var e=this,i=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return c(i,t,t),i},t.prototype.setDriver=function(t,e,i){var n=this;at(t)||(t=[t]);var r=this._getSupportedDrivers(t);function o(){n._config.driver=n.driver()}function s(t){return n._extend(t),o(),n._ready=n._initStorage(n._config),n._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=l.then((function(){var t=r[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(t){return function(){var e=0;return function i(){for(;e<t.length;){var r=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(r).then(s).catch(i)}o();var c=new Error("No available storage method found.");return n._driverSet=a.reject(c),n._driverSet}()}}(r)}))})).catch((function(){o();var t=new Error("No available storage method found.");return n._driverSet=a.reject(t),n._driverSet})),c(this._driverSet,e,i),this._driverSet},t.prototype.supports=function(t){return!!ct[t]},t.prototype._extend=function(t){gt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ft.length;t<e;t++)pt(this,ft[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),vt=new mt;e.exports=vt},{3:3}]},{},[4])(4)},2433:(t,e,i)=>{"use strict";var n,r=(n=i(311))&&"object"==typeof n&&"default"in n?n.default:n;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var a="undefined"!=typeof window;function s(t,e){return e.reduce((function(e,i){return t.hasOwnProperty(i)&&(e[i]=t[i]),e}),{})}var c={},l={},u={},h=r.extend({data:function(){return{transports:c,targets:l,sources:u,trackInstances:a}},methods:{open:function(t){if(a){var e=t.to,i=t.from,n=t.passengers,s=t.order,c=void 0===s?1/0:s;if(e&&i&&n){var l,u={to:e,from:i,passengers:(l=n,Array.isArray(l)||"object"===o(l)?Object.freeze(l):l),order:c};-1===Object.keys(this.transports).indexOf(e)&&r.set(this.transports,e,[]);var h,f=this.$_getTransportIndex(u),d=this.transports[e].slice(0);-1===f?d.push(u):d[f]=u,this.transports[e]=(h=function(t,e){return t.order-e.order},d.map((function(t,e){return[e,t]})).sort((function(t,e){return h(t[1],e[1])||t[0]-e[0]})).map((function(t){return t[1]})))}}},close:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.to,n=t.from;if(i&&(n||!1!==e)&&this.transports[i])if(e)this.transports[i]=[];else{var r=this.$_getTransportIndex(t);if(r>=0){var o=this.transports[i].slice(0);o.splice(r,1),this.transports[i]=o}}},registerTarget:function(t,e,i){a&&(this.trackInstances&&!i&&this.targets[t]&&console.warn("[portal-vue]: Target ".concat(t," already exists")),this.$set(this.targets,t,Object.freeze([e])))},unregisterTarget:function(t){this.$delete(this.targets,t)},registerSource:function(t,e,i){a&&(this.trackInstances&&!i&&this.sources[t]&&console.warn("[portal-vue]: source ".concat(t," already exists")),this.$set(this.sources,t,Object.freeze([e])))},unregisterSource:function(t){this.$delete(this.sources,t)},hasTarget:function(t){return!(!this.targets[t]||!this.targets[t][0])},hasSource:function(t){return!(!this.sources[t]||!this.sources[t][0])},hasContentFor:function(t){return!!this.transports[t]&&!!this.transports[t].length},$_getTransportIndex:function(t){var e=t.to,i=t.from;for(var n in this.transports[e])if(this.transports[e][n].from===i)return+n;return-1}}}),f=new h(c),d=1,p=r.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(d++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var t=this;this.$nextTick((function(){f.registerSource(t.name,t)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){f.unregisterSource(this.name),this.clear()},watch:{to:function(t,e){e&&e!==t&&this.clear(e),this.sendUpdate()}},methods:{clear:function(t){var e={from:this.name,to:t||this.to};f.close(e)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(t){return"function"==typeof t?t(this.slotProps):t},sendUpdate:function(){var t,e=this.normalizeSlots();if(e){var i={from:this.name,to:this.to,passengers:(t=e,function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),order:this.order};f.open(i)}else this.clear()}},render:function(t){var e=this.$slots.default||this.$scopedSlots.default||[],i=this.tag;return e&&this.disabled?e.length<=1&&this.slim?this.normalizeOwnChildren(e)[0]:t(i,[this.normalizeOwnChildren(e)]):this.slim?t():t(i,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),g=r.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:f.transports,firstRender:!0}},created:function(){var t=this;this.$nextTick((function(){f.registerTarget(t.name,t)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(t,e){f.unregisterTarget(e),f.registerTarget(t,this)}},mounted:function(){var t=this;this.transition&&this.$nextTick((function(){t.firstRender=!1}))},beforeDestroy:function(){f.unregisterTarget(this.name)},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce((function(t,i){var n=i.passengers[0],r="function"==typeof n?n(e):i.passengers;return t.concat(r)}),[])}(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var t=this.slim&&!this.transition;return t&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t}},render:function(t){var e=this.noWrapper(),i=this.children(),n=this.transition||this.tag;return e?i[0]:this.slim&&!n?t():t(n,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},i)}}),m=0,v=["disabled","name","order","slim","slotProps","tag","to"],b=["multiple","transition"],y=r.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(m++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var t=document.querySelector(this.mountTo);if(t){var e=this.$props;if(f.targets[e.name])e.bail?console.warn("[portal-vue]: Target ".concat(e.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=f.targets[e.name];else{var i=e.append;if(i){var n="string"==typeof i?i:"DIV",r=document.createElement(n);t.appendChild(r),t=r}var o=s(this.$props,b);o.slim=this.targetSlim,o.tag=this.targetTag,o.slotProps=this.targetSlotProps,o.name=this.to,this.portalTarget=new g({el:t,parent:this.$parent||this,propsData:o})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var t=this.portalTarget;if(this.append){var e=t.$el;e.parentNode.removeChild(e)}t.$destroy()},render:function(t){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),t();if(!this.$scopedSlots.manual){var e=s(this.$props,v);return t(p,{props:e,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var i=this.$scopedSlots.manual({to:this.to});return Array.isArray(i)&&(i=i[0]),i||t()}}),w={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.portalName||"Portal",p),t.component(e.portalTargetName||"PortalTarget",g),t.component(e.MountingPortalName||"MountingPortal",y)}};e.ZP=w},1474:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o.apply(this,arguments)}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){r(t,e,i[e])}))}return t}function s(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function c(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}i.r(e),i.d(e,{default:()=>we,MultiDrag:()=>ve,Sortable:()=>jt,Swap:()=>ae});var l=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=c(/Edge/i),h=c(/firefox/i),f=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),d=c(/iP(ad|od|hone)/i),p=c(/chrome/i)&&c(/android/i),g={capture:!1,passive:!1};function m(t,e,i){t.addEventListener(e,i,!l&&g)}function v(t,e,i){t.removeEventListener(e,i,!l&&g)}function b(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function y(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function w(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&b(t,e):b(t,e))||n&&t===i)return t;if(t===i)break}while(t=y(t))}return null}var S,x=/\s+/g;function C(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(x," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(x," ")}}function A(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function I(t,e){var i="";if("string"==typeof t)i=t;else do{var n=A(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function _(t,e,i){if(t){var n=t.getElementsByTagName(e),r=0,o=n.length;if(i)for(;r<o;r++)i(n[r],r);return n}return[]}function E(){return document.scrollingElement||document.documentElement}function O(t,e,i,n,r){if(t.getBoundingClientRect||t===window){var o,a,s,c,u,h,f;if(t!==window&&t!==E()?(a=(o=t.getBoundingClientRect()).top,s=o.left,c=o.bottom,u=o.right,h=o.height,f=o.width):(a=0,s=0,c=window.innerHeight,u=window.innerWidth,h=window.innerHeight,f=window.innerWidth),(e||i)&&t!==window&&(r=r||t.parentNode,!l))do{if(r&&r.getBoundingClientRect&&("none"!==A(r,"transform")||i&&"static"!==A(r,"position"))){var d=r.getBoundingClientRect();a-=d.top+parseInt(A(r,"border-top-width")),s-=d.left+parseInt(A(r,"border-left-width")),c=a+o.height,u=s+o.width;break}}while(r=r.parentNode);if(n&&t!==window){var p=I(r||t),g=p&&p.a,m=p&&p.d;p&&(c=(a/=m)+(h/=m),u=(s/=g)+(f/=g))}return{top:a,left:s,bottom:c,right:u,width:f,height:h}}}function P(t,e,i){for(var n=k(t,!0),r=O(t)[e];n;){var o=O(n)[i];if(!("top"===i||"left"===i?r>=o:r<=o))return n;if(n===E())break;n=k(n,!1)}return!1}function D(t,e,i){for(var n=0,r=0,o=t.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==jt.ghost&&o[r]!==jt.dragged&&w(o[r],i.draggable,t,!1)){if(n===e)return o[r];n++}r++}return null}function R(t,e){for(var i=t.lastElementChild;i&&(i===jt.ghost||"none"===A(i,"display")||e&&!b(i,e));)i=i.previousElementSibling;return i||null}function T(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===jt.clone||e&&!b(t,e)||i++;return i}function M(t){var e=0,i=0,n=E();if(t)do{var r=I(t),o=r.a,a=r.d;e+=t.scrollLeft*o,i+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,i]}function k(t,e){if(!t||!t.getBoundingClientRect)return E();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=A(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i.getBoundingClientRect||i===document.body)return E();if(n||e)return i;n=!0}}}while(i=i.parentNode);return E()}function F(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function L(t,e){return function(){if(!S){var i=arguments,n=this;1===i.length?t.call(n,i[0]):t.apply(n,i),S=setTimeout((function(){S=void 0}),e)}}}function z(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function j(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function N(t,e){A(t,"position","absolute"),A(t,"top",e.top),A(t,"left",e.left),A(t,"width",e.width),A(t,"height",e.height)}function B(t){A(t,"position",""),A(t,"top",""),A(t,"left",""),A(t,"width",""),A(t,"height","")}var U="Sortable"+(new Date).getTime();var H=[],W={initializeByDefault:!0},$={mount:function(t){for(var e in W)W.hasOwnProperty(e)&&!(e in t)&&(t[e]=W[e]);H.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var r=t+"Global";H.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][r]&&e[n.pluginName][r](a({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](a({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var r in H.forEach((function(n){var r=n.pluginName;if(t.options[r]||n.initializeByDefault){var a=new n(t,e,t.options);a.sortable=t,a.options=t.options,t[r]=a,o(i,a.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var a=this.modifyOption(t,r,t.options[r]);void 0!==a&&(t.options[r]=a)}},getEventProperties:function(t,e){var i={};return H.forEach((function(n){"function"==typeof n.eventProperties&&o(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return H.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(n=r.optionListeners[e].call(t[r.pluginName],i))})),n}};function G(t){var e=t.sortable,i=t.rootEl,n=t.name,r=t.targetEl,o=t.cloneEl,s=t.toEl,c=t.fromEl,h=t.oldIndex,f=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,g=t.originalEvent,m=t.putSortable,v=t.extraEventProperties;if(e=e||i&&i[U]){var b,y=e.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||l||u?(b=document.createEvent("Event")).initEvent(n,!0,!0):b=new CustomEvent(n,{bubbles:!0,cancelable:!0}),b.to=s||i,b.from=c||i,b.item=r||i,b.clone=o,b.oldIndex=h,b.newIndex=f,b.oldDraggableIndex=d,b.newDraggableIndex=p,b.originalEvent=g,b.pullMode=m?m.lastPutMode:void 0;var S=a({},v,$.getEventProperties(n,e));for(var x in S)b[x]=S[x];i&&i.dispatchEvent(b),y[w]&&y[w].call(e,b)}}var V=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,r=s(i,["evt"]);$.pluginEvent.bind(jt)(t,e,a({dragEl:Y,parentEl:q,ghostEl:K,rootEl:Q,nextEl:J,lastDownEl:Z,cloneEl:tt,cloneHidden:et,dragStarted:pt,putSortable:st,activeSortable:jt.active,originalEvent:n,oldIndex:it,oldDraggableIndex:rt,newIndex:nt,newDraggableIndex:ot,hideGhostForTarget:kt,unhideGhostForTarget:Ft,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(t){X({sortable:e,name:t,originalEvent:n})}},r))};function X(t){G(a({putSortable:st,cloneEl:tt,targetEl:Y,rootEl:Q,oldIndex:it,oldDraggableIndex:rt,newIndex:nt,newDraggableIndex:ot},t))}var Y,q,K,Q,J,Z,tt,et,it,nt,rt,ot,at,st,ct,lt,ut,ht,ft,dt,pt,gt,mt,vt,bt,yt=!1,wt=!1,St=[],xt=!1,Ct=!1,At=[],It=!1,_t=[],Et="undefined"!=typeof document,Ot=d,Pt=u||l?"cssFloat":"float",Dt=Et&&!p&&!d&&"draggable"in document.createElement("div"),Rt=function(){if(Et){if(l)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Tt=function(t,e){var i=A(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=D(t,0,e),o=D(t,1,e),a=r&&A(r),s=o&&A(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+O(r).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+O(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||c>=n&&"none"===i[Pt]||o&&"none"===i[Pt]&&c+l>n)?"vertical":"horizontal"},Mt=function(t){function e(t,i){return function(n,r,o,a){var s=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(i||s))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,r,o,a),i)(n,r,o,a);var c=(i?n:r).options.group.name;return!0===t||"string"==typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var i={},r=t.group;r&&"object"==n(r)||(r={name:r}),i.name=r.name,i.checkPull=e(r.pull,!0),i.checkPut=e(r.put),i.revertClone=r.revertClone,t.group=i},kt=function(){!Rt&&K&&A(K,"display","none")},Ft=function(){!Rt&&K&&A(K,"display","")};Et&&document.addEventListener("click",(function(t){if(wt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),wt=!1,!1}),!0);var Lt=function(t){if(Y){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,o=t.clientY,St.some((function(t){if(!R(t)){var e=O(t),i=t[U].options.emptyInsertThreshold,n=r>=e.left-i&&r<=e.right+i,s=o>=e.top-i&&o<=e.bottom+i;return i&&n&&s?a=t:void 0}})),a);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[U]._onDragOver(i)}}var r,o,a},zt=function(t){Y&&Y.parentNode[U]._isOutsideThisEl(t.target)};function jt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=o({},e),t[U]=this;var i,n,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Tt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==jt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var s in $.initializePlugins(this,t,r),r)!(s in e)&&(e[s]=r[s]);for(var c in Mt(e),this)"_"===c.charAt(0)&&"function"==typeof this[c]&&(this[c]=this[c].bind(this));this.nativeDraggable=!e.forceFallback&&Dt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?m(t,"pointerdown",this._onTapStart):(m(t,"mousedown",this._onTapStart),m(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(m(t,"dragover",this),m(t,"dragenter",this)),St.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),o(this,(n=[],{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==A(t,"display")&&t!==jt.ghost){n.push({target:t,rect:O(t)});var e=a({},n[n.length-1].rect);if(t.thisAnimationDuration){var i=I(t,!0);i&&(e.top-=i.f,e.left-=i.e)}t.fromRect=e}}))},addAnimationState:function(t){n.push(t)},removeAnimationState:function(t){n.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(n,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(i),void("function"==typeof t&&t());var r=!1,o=0;n.forEach((function(t){var i=0,n=t.target,a=n.fromRect,s=O(n),c=n.prevFromRect,l=n.prevToRect,u=t.rect,h=I(n,!0);h&&(s.top-=h.f,s.left-=h.e),n.toRect=s,n.thisAnimationDuration&&F(c,s)&&!F(a,s)&&(u.top-s.top)/(u.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(i=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(u,c,l,e.options)),F(s,a)||(n.prevFromRect=a,n.prevToRect=s,i||(i=e.options.animation),e.animate(n,u,s,i)),i&&(r=!0,o=Math.max(o,i),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),i),n.thisAnimationDuration=i)})),clearTimeout(i),r?i=setTimeout((function(){"function"==typeof t&&t()}),o):"function"==typeof t&&t(),n=[]},animate:function(t,e,i,n){if(n){A(t,"transition",""),A(t,"transform","");var r=I(this.el),o=r&&r.a,a=r&&r.d,s=(e.left-i.left)/(o||1),c=(e.top-i.top)/(a||1);t.animatingX=!!s,t.animatingY=!!c,A(t,"transform","translate3d("+s+"px,"+c+"px,0)"),function(t){t.offsetWidth}(t),A(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),A(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){A(t,"transition",""),A(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}))}function Nt(t,e,i,n,r,o,a,s){var c,h,f=t[U],d=f.options.onMove;return!window.CustomEvent||l||u?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=i,c.draggedRect=n,c.related=r||e,c.relatedRect=o||O(e),c.willInsertAfter=s,c.originalEvent=a,t.dispatchEvent(c),d&&(h=d.call(f,c,a)),h}function Bt(t){t.draggable=!1}function Ut(){It=!1}function Ht(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Wt(t){return setTimeout(t,0)}function $t(t){return clearTimeout(t)}jt.prototype={constructor:jt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(gt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Y):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,r=n.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,l=n.filter;if(function(t){_t.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&_t.push(n)}}(i),!Y&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||n.disabled||c.isContentEditable||(s=w(s,n.draggable,i,!1))&&s.animated||Z===s)){if(it=T(s),rt=T(s,n.draggable),"function"==typeof l){if(l.call(this,t,s,this))return X({sortable:e,rootEl:c,name:"filter",targetEl:s,toEl:i,fromEl:i}),V("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(l&&(l=l.split(",").some((function(n){if(n=w(c,n.trim(),i,!1))return X({sortable:e,rootEl:n,name:"filter",targetEl:s,fromEl:i,toEl:i}),V("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());n.handle&&!w(c,n.handle,i,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,i){var n,r=this,o=r.el,a=r.options,s=o.ownerDocument;if(i&&!Y&&i.parentNode===o){var c=O(i);if(Q=o,q=(Y=i).parentNode,J=Y.nextSibling,Z=i,at=a.group,jt.dragged=Y,ct={target:Y,clientX:(e||t).clientX,clientY:(e||t).clientY},ft=ct.clientX-c.left,dt=ct.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Y.style["will-change"]="all",n=function(){V("delayEnded",r,{evt:t}),jt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!h&&r.nativeDraggable&&(Y.draggable=!0),r._triggerDragStart(t,e),X({sortable:r,name:"choose",originalEvent:t}),C(Y,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){_(Y,t.trim(),Bt)})),m(s,"dragover",Lt),m(s,"mousemove",Lt),m(s,"touchmove",Lt),m(s,"mouseup",r._onDrop),m(s,"touchend",r._onDrop),m(s,"touchcancel",r._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Y.draggable=!0),V("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(u||l))n();else{if(jt.eventCanceled)return void this._onDrop();m(s,"mouseup",r._disableDelayedDrag),m(s,"touchend",r._disableDelayedDrag),m(s,"touchcancel",r._disableDelayedDrag),m(s,"mousemove",r._delayedDragTouchMoveHandler),m(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&m(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Y&&Bt(Y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._disableDelayedDrag),v(t,"touchend",this._disableDelayedDrag),v(t,"touchcancel",this._disableDelayedDrag),v(t,"mousemove",this._delayedDragTouchMoveHandler),v(t,"touchmove",this._delayedDragTouchMoveHandler),v(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?m(document,"pointermove",this._onTouchMove):m(document,e?"touchmove":"mousemove",this._onTouchMove):(m(Y,"dragend",this),m(Q,"dragstart",this._onDragStart));try{document.selection?Wt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(yt=!1,Q&&Y){V("dragStarted",this,{evt:e}),this.nativeDraggable&&m(document,"dragover",zt);var i=this.options;!t&&C(Y,i.dragClass,!1),C(Y,i.ghostClass,!0),jt.active=this,t&&this._appendGhost(),X({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(lt){this._lastX=lt.clientX,this._lastY=lt.clientY,kt();for(var t=document.elementFromPoint(lt.clientX,lt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(lt.clientX,lt.clientY))!==e;)e=t;if(Y.parentNode[U]._isOutsideThisEl(t),e)do{if(e[U]&&e[U]._onDragOver({clientX:lt.clientX,clientY:lt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Ft()}},_onTouchMove:function(t){if(ct){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=K&&I(K,!0),a=K&&o&&o.a,s=K&&o&&o.d,c=Ot&&bt&&M(bt),l=(r.clientX-ct.clientX+n.x)/(a||1)+(c?c[0]-At[0]:0)/(a||1),u=(r.clientY-ct.clientY+n.y)/(s||1)+(c?c[1]-At[1]:0)/(s||1);if(!jt.active&&!yt){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(K){o?(o.e+=l-(ut||0),o.f+=u-(ht||0)):o={a:1,b:0,c:0,d:1,e:l,f:u};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");A(K,"webkitTransform",h),A(K,"mozTransform",h),A(K,"msTransform",h),A(K,"transform",h),ut=l,ht=u,lt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!K){var t=this.options.fallbackOnBody?document.body:Q,e=O(Y,!0,Ot,!0,t),i=this.options;if(Ot){for(bt=t;"static"===A(bt,"position")&&"none"===A(bt,"transform")&&bt!==document;)bt=bt.parentNode;bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=E()),e.top+=bt.scrollTop,e.left+=bt.scrollLeft):bt=E(),At=M(bt)}C(K=Y.cloneNode(!0),i.ghostClass,!1),C(K,i.fallbackClass,!0),C(K,i.dragClass,!0),A(K,"transition",""),A(K,"transform",""),A(K,"box-sizing","border-box"),A(K,"margin",0),A(K,"top",e.top),A(K,"left",e.left),A(K,"width",e.width),A(K,"height",e.height),A(K,"opacity","0.8"),A(K,"position",Ot?"absolute":"fixed"),A(K,"zIndex","100000"),A(K,"pointerEvents","none"),jt.ghost=K,t.appendChild(K),A(K,"transform-origin",ft/parseInt(K.style.width)*100+"% "+dt/parseInt(K.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,r=i.options;V("dragStart",this,{evt:t}),jt.eventCanceled?this._onDrop():(V("setupClone",this),jt.eventCanceled||((tt=j(Y)).draggable=!1,tt.style["will-change"]="",this._hideClone(),C(tt,this.options.chosenClass,!1),jt.clone=tt),i.cloneId=Wt((function(){V("clone",i),jt.eventCanceled||(i.options.removeCloneOnHide||Q.insertBefore(tt,Y),i._hideClone(),X({sortable:i,name:"clone"}))})),!e&&C(Y,r.dragClass,!0),e?(wt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(v(document,"mouseup",i._onDrop),v(document,"touchend",i._onDrop),v(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",r.setData&&r.setData.call(i,n,Y)),m(document,"drop",i),A(Y,"transform","translateZ(0)")),yt=!0,i._dragStartId=Wt(i._dragStarted.bind(i,e,t)),m(document,"selectstart",i),pt=!0,f&&A(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,r,o=this.el,s=t.target,c=this.options,l=c.group,u=jt.active,h=at===l,f=c.sort,d=st||u,p=this,g=!1;if(!It){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=w(s,c.draggable,o,!0),L("dragOver"),jt.eventCanceled)return g;if(Y.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return N(!1);if(wt=!1,u&&!c.disabled&&(h?f||(n=!Q.contains(Y)):st===this||(this.lastPutMode=at.checkPull(this,u,Y,t))&&l.checkPut(this,u,Y,t))){if(r="vertical"===this._getDirection(t,s),e=O(Y),L("dragOverValid"),jt.eventCanceled)return g;if(n)return q=Q,j(),this._hideClone(),L("revert"),jt.eventCanceled||(J?Q.insertBefore(Y,J):Q.appendChild(Y)),N(!0);var m=R(o,c.draggable);if(!m||function(t,e,i){var n=O(R(i.el,i.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(t,r,this)&&!m.animated){if(m===Y)return N(!1);if(m&&o===t.target&&(s=m),s&&(i=O(s)),!1!==Nt(Q,o,Y,e,s,i,t,!!s))return j(),o.appendChild(Y),q=o,B(),N(!0)}else if(s.parentNode===o){i=O(s);var v,b,y,S=Y.parentNode!==o,x=!function(t,e,i){var n=i?t.left:t.top,r=i?t.right:t.bottom,o=i?t.width:t.height,a=i?e.left:e.top,s=i?e.right:e.bottom,c=i?e.width:e.height;return n===a||r===s||n+o/2===a+c/2}(Y.animated&&Y.toRect||e,s.animated&&s.toRect||i,r),I=r?"top":"left",_=P(s,"top","top")||P(Y,"top","top"),E=_?_.scrollTop:void 0;if(gt!==s&&(b=i[I],xt=!1,Ct=!x&&c.invertSwap||S),v=function(t,e,i,n,r,o,a,s){var c=n?t.clientY:t.clientX,l=n?i.height:i.width,u=n?i.top:i.left,h=n?i.bottom:i.right,f=!1;if(!a)if(s&&vt<l*r){if(!xt&&(1===mt?c>u+l*o/2:c<h-l*o/2)&&(xt=!0),xt)f=!0;else if(1===mt?c<u+vt:c>h-vt)return-mt}else if(c>u+l*(1-r)/2&&c<h-l*(1-r)/2)return function(t){return T(Y)<T(t)?1:-1}(e);return(f=f||a)&&(c<u+l*o/2||c>h-l*o/2)?c>u+l/2?1:-1:0}(t,s,i,r,x?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,Ct,gt===s),0!==v){var D=T(Y);do{D-=v,y=q.children[D]}while(y&&("none"===A(y,"display")||y===K))}if(0===v||y===s)return N(!1);gt=s,mt=v;var M=s.nextElementSibling,k=!1,F=Nt(Q,o,Y,e,s,i,t,k=1===v);if(!1!==F)return 1!==F&&-1!==F||(k=1===F),It=!0,setTimeout(Ut,30),j(),k&&!M?o.appendChild(Y):s.parentNode.insertBefore(Y,k?M:s),_&&z(_,0,E-_.scrollTop),q=Y.parentNode,void 0===b||Ct||(vt=Math.abs(b-O(s)[I])),B(),N(!0)}if(o.contains(Y))return N(!1)}return!1}function L(c,l){V(c,p,a({evt:t,isOwner:h,axis:r?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:f,fromSortable:d,target:s,completed:N,onMove:function(i,n){return Nt(Q,o,Y,e,i,O(i),t,n)},changed:B},l))}function j(){L("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function N(e){return L("dragOverCompleted",{insertion:e}),e&&(h?u._hideClone():u._showClone(p),p!==d&&(C(Y,st?st.options.ghostClass:u.options.ghostClass,!1),C(Y,c.ghostClass,!0)),st!==p&&p!==jt.active?st=p:p===jt.active&&st&&(st=null),d===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){L("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(s===Y&&!Y.animated||s===o&&!s.animated)&&(gt=null),c.dragoverBubble||t.rootEl||s===document||(Y.parentNode[U]._isOutsideThisEl(t.target),!e&&Lt(t)),!c.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function B(){nt=T(Y),ot=T(Y,c.draggable),X({sortable:p,name:"change",toEl:o,newIndex:nt,newDraggableIndex:ot,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",Lt),v(document,"mousemove",Lt),v(document,"touchmove",Lt)},_offUpEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._onDrop),v(t,"touchend",this._onDrop),v(t,"pointerup",this._onDrop),v(t,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;nt=T(Y),ot=T(Y,i.draggable),V("drop",this,{evt:t}),q=Y&&Y.parentNode,nt=T(Y),ot=T(Y,i.draggable),jt.eventCanceled||(yt=!1,Ct=!1,xt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$t(this.cloneId),$t(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),f&&A(document.body,"user-select",""),A(Y,"transform",""),t&&(pt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(Q===q||st&&"clone"!==st.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),Y&&(this.nativeDraggable&&v(Y,"dragend",this),Bt(Y),Y.style["will-change"]="",pt&&!yt&&C(Y,st?st.options.ghostClass:this.options.ghostClass,!1),C(Y,this.options.chosenClass,!1),X({sortable:this,name:"unchoose",toEl:q,newIndex:null,newDraggableIndex:null,originalEvent:t}),Q!==q?(nt>=0&&(X({rootEl:q,name:"add",toEl:q,fromEl:Q,originalEvent:t}),X({sortable:this,name:"remove",toEl:q,originalEvent:t}),X({rootEl:q,name:"sort",toEl:q,fromEl:Q,originalEvent:t}),X({sortable:this,name:"sort",toEl:q,originalEvent:t})),st&&st.save()):nt!==it&&nt>=0&&(X({sortable:this,name:"update",toEl:q,originalEvent:t}),X({sortable:this,name:"sort",toEl:q,originalEvent:t})),jt.active&&(null!=nt&&-1!==nt||(nt=it,ot=rt),X({sortable:this,name:"end",toEl:q,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){V("nulling",this),Q=Y=q=K=J=tt=Z=et=ct=lt=pt=nt=ot=it=rt=gt=mt=st=at=jt.dragged=jt.ghost=jt.clone=jt.active=null,_t.forEach((function(t){t.checked=!0})),_t.length=ut=ht=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Y&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,r=i.length,o=this.options;n<r;n++)w(t=i[n],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Ht(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach((function(t,n){var r=i.children[n];w(r,this.options.draggable,i,!1)&&(e[t]=r)}),this),t.forEach((function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return w(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=$.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&Mt(i)},destroy:function(){V("destroy",this);var t=this.el;t[U]=null,v(t,"mousedown",this._onTapStart),v(t,"touchstart",this._onTapStart),v(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(t,"dragover",this),v(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),St.splice(St.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!et){if(V("hideClone",this),jt.eventCanceled)return;A(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),et=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(et){if(V("showClone",this),jt.eventCanceled)return;Q.contains(Y)&&!this.options.group.revertClone?Q.insertBefore(tt,Y):J?Q.insertBefore(tt,J):Q.appendChild(tt),this.options.group.revertClone&&this.animate(Y,tt),A(tt,"display",""),et=!1}}else this._hideClone()}},Et&&m(document,"touchmove",(function(t){(jt.active||yt)&&t.cancelable&&t.preventDefault()})),jt.utils={on:m,off:v,css:A,find:_,is:function(t,e){return!!w(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:L,closest:w,toggleClass:C,clone:j,index:T,nextTick:Wt,cancelNextTick:$t,detectDirection:Tt,getChild:D},jt.get=function(t){return t[U]},jt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(jt.utils=a({},jt.utils,t.utils)),$.mount(t)}))},jt.create=function(t,e){return new jt(t,e)},jt.version="1.10.2";var Gt,Vt,Xt,Yt,qt,Kt,Qt=[],Jt=!1;function Zt(){Qt.forEach((function(t){clearInterval(t.pid)})),Qt=[]}function te(){clearInterval(Kt)}var ee,ie=L((function(t,e,i,n){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,c=e.scrollSpeed,l=E(),u=!1;Vt!==i&&(Vt=i,Zt(),Gt=e.scroll,r=e.scrollFn,!0===Gt&&(Gt=k(i,!0)));var h=0,f=Gt;do{var d=f,p=O(d),g=p.top,m=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,S=void 0,x=void 0,C=d.scrollWidth,I=d.scrollHeight,_=A(d),P=d.scrollLeft,D=d.scrollTop;d===l?(S=y<C&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),x=w<I&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(S=y<C&&("auto"===_.overflowX||"scroll"===_.overflowX),x=w<I&&("auto"===_.overflowY||"scroll"===_.overflowY));var R=S&&(Math.abs(b-o)<=s&&P+y<C)-(Math.abs(v-o)<=s&&!!P),T=x&&(Math.abs(m-a)<=s&&D+w<I)-(Math.abs(g-a)<=s&&!!D);if(!Qt[h])for(var M=0;M<=h;M++)Qt[M]||(Qt[M]={});Qt[h].vx==R&&Qt[h].vy==T&&Qt[h].el===d||(Qt[h].el=d,Qt[h].vx=R,Qt[h].vy=T,clearInterval(Qt[h].pid),0==R&&0==T||(u=!0,Qt[h].pid=setInterval(function(){n&&0===this.layer&&jt.active._onTouchMove(qt);var e=Qt[this.layer].vy?Qt[this.layer].vy*c:0,i=Qt[this.layer].vx?Qt[this.layer].vx*c:0;"function"==typeof r&&"continue"!==r.call(jt.dragged.parentNode[U],i,e,t,qt,Qt[this.layer].el)||z(Qt[this.layer].el,i,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&f!==l&&(f=k(f,!1)));Jt=u}}),30),ne=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var c=i||r;a();var l=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function re(){}function oe(){}function ae(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;ee=e},dragOverValid:function(t){var e=t.completed,i=t.target,n=t.onMove,r=t.activeSortable,o=t.changed,a=t.cancel;if(r.options.swap){var s=this.sortable.el,c=this.options;if(i&&i!==s){var l=ee;!1!==n(i)?(C(i,c.swapClass,!0),ee=i):ee=null,l&&l!==ee&&C(l,c.swapClass,!1)}o(),e(!0),a()}},drop:function(t){var e,i,n,r,o,a,s=t.activeSortable,c=t.putSortable,l=t.dragEl,u=c||this.sortable,h=this.options;ee&&C(ee,h.swapClass,!1),ee&&(h.swap||c&&c.options.swap)&&l!==ee&&(u.captureAnimationState(),u!==s&&s.captureAnimationState(),i=ee,o=(e=l).parentNode,a=i.parentNode,o&&a&&!o.isEqualNode(i)&&!a.isEqualNode(e)&&(n=T(e),r=T(i),o.isEqualNode(a)&&n<r&&r++,o.insertBefore(i,o.children[n]),a.insertBefore(e,a.children[r])),u.animateAll(),u!==s&&s.animateAll())},nulling:function(){ee=null}},o(t,{pluginName:"swap",eventProperties:function(){return{swapItem:ee}}})}re.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=D(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:ne},o(re,{pluginName:"revertOnSpill"}),oe.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:ne},o(oe,{pluginName:"removeOnSpill"});var se,ce,le,ue,he,fe=[],de=[],pe=!1,ge=!1,me=!1;function ve(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?m(document,"pointerup",this._deselectMultiDrag):(m(document,"mouseup",this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag)),m(document,"keydown",this._checkKeyDown),m(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,i){var n="";fe.length&&ce===t?fe.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=i.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;le=e},delayEnded:function(){this.isMultiDrag=~fe.indexOf(le)},setupClone:function(t){var e=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var n=0;n<fe.length;n++)de.push(j(fe[n])),de[n].sortableIndex=fe[n].sortableIndex,de[n].draggable=!1,de[n].style["will-change"]="",C(de[n],this.options.selectedClass,!1),fe[n]===le&&C(de[n],this.options.chosenClass,!1);e._hideClone(),i()}},clone:function(t){var e=t.sortable,i=t.rootEl,n=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||fe.length&&ce===e&&(be(!0,i),n("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,i=t.rootEl,n=t.cancel;this.isMultiDrag&&(be(!1,i),de.forEach((function(t){A(t,"display","")})),e(),he=!1,n())},hideClone:function(t){var e=this,i=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(de.forEach((function(t){A(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),i(),he=!0,n())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&ce&&ce.multiDrag._deselectMultiDrag(),fe.forEach((function(t){t.sortableIndex=T(t)})),fe=fe.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),me=!0},dragStarted:function(t){var e=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){fe.forEach((function(t){t!==le&&A(t,"position","absolute")}));var n=O(le,!1,!0,!0);fe.forEach((function(t){t!==le&&N(t,n)})),ge=!0,pe=!0}i.animateAll((function(){ge=!1,pe=!1,e.options.animation&&fe.forEach((function(t){B(t)})),e.options.sort&&ye()}))}},dragOver:function(t){var e=t.target,i=t.completed,n=t.cancel;ge&&~fe.indexOf(e)&&(i(!1),n())},revert:function(t){var e=t.fromSortable,i=t.rootEl,n=t.sortable,r=t.dragRect;fe.length>1&&(fe.forEach((function(t){n.addAnimationState({target:t,rect:ge?O(t):r}),B(t),t.fromRect=r,e.removeAnimationState(t)})),ge=!1,function(t,e){fe.forEach((function(i,n){var r=e.children[i.sortableIndex+(t?Number(n):0)];r?e.insertBefore(i,r):e.appendChild(i)}))}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var e=t.sortable,i=t.isOwner,n=t.insertion,r=t.activeSortable,o=t.parentEl,a=t.putSortable,s=this.options;if(n){if(i&&r._hideClone(),pe=!1,s.animation&&fe.length>1&&(ge||!i&&!r.options.sort&&!a)){var c=O(le,!1,!0,!0);fe.forEach((function(t){t!==le&&(N(t,c),o.appendChild(t))})),ge=!0}if(!i)if(ge||ye(),fe.length>1){var l=he;r._showClone(e),r.options.animation&&!he&&l&&de.forEach((function(t){r.addAnimationState({target:t,rect:ue}),t.fromRect=ue,t.thisAnimationDuration=null}))}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,i=t.isOwner,n=t.activeSortable;if(fe.forEach((function(t){t.thisAnimationDuration=null})),n.options.animation&&!i&&n.multiDrag.isMultiDrag){ue=o({},e);var r=I(le,!0);ue.top-=r.f,ue.left-=r.e}},dragOverAnimationComplete:function(){ge&&(ge=!1,ye())},drop:function(t){var e=t.originalEvent,i=t.rootEl,n=t.parentEl,r=t.sortable,o=t.dispatchSortableEvent,a=t.oldIndex,s=t.putSortable,c=s||this.sortable;if(e){var l=this.options,u=n.children;if(!me)if(l.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),C(le,l.selectedClass,!~fe.indexOf(le)),~fe.indexOf(le))fe.splice(fe.indexOf(le),1),se=null,G({sortable:r,rootEl:i,name:"deselect",targetEl:le,originalEvt:e});else{if(fe.push(le),G({sortable:r,rootEl:i,name:"select",targetEl:le,originalEvt:e}),e.shiftKey&&se&&r.el.contains(se)){var h,f,d=T(se),p=T(le);if(~d&&~p&&d!==p)for(p>d?(f=d,h=p):(f=p,h=d+1);f<h;f++)~fe.indexOf(u[f])||(C(u[f],l.selectedClass,!0),fe.push(u[f]),G({sortable:r,rootEl:i,name:"select",targetEl:u[f],originalEvt:e}))}else se=le;ce=c}if(me&&this.isMultiDrag){if((n[U].options.sort||n!==i)&&fe.length>1){var g=O(le),m=T(le,":not(."+this.options.selectedClass+")");if(!pe&&l.animation&&(le.thisAnimationDuration=null),c.captureAnimationState(),!pe&&(l.animation&&(le.fromRect=g,fe.forEach((function(t){if(t.thisAnimationDuration=null,t!==le){var e=ge?O(t):g;t.fromRect=e,c.addAnimationState({target:t,rect:e})}}))),ye(),fe.forEach((function(t){u[m]?n.insertBefore(t,u[m]):n.appendChild(t),m++})),a===T(le))){var v=!1;fe.forEach((function(t){t.sortableIndex===T(t)||(v=!0)})),v&&o("update")}fe.forEach((function(t){B(t)})),c.animateAll()}ce=c}(i===n||s&&"clone"!==s.lastPutMode)&&de.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=me=!1,de.length=0},destroyGlobal:function(){this._deselectMultiDrag(),v(document,"pointerup",this._deselectMultiDrag),v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag),v(document,"keydown",this._checkKeyDown),v(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==me&&me||ce!==this.sortable||t&&w(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;fe.length;){var e=fe[0];C(e,this.options.selectedClass,!1),fe.shift(),G({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[U];e&&e.options.multiDrag&&!~fe.indexOf(t)&&(ce&&ce!==e&&(ce.multiDrag._deselectMultiDrag(),ce=e),C(t,e.options.selectedClass,!0),fe.push(t))},deselect:function(t){var e=t.parentNode[U],i=fe.indexOf(t);e&&e.options.multiDrag&&~i&&(C(t,e.options.selectedClass,!1),fe.splice(i,1))}},eventProperties:function(){var t,e=this,i=[],n=[];return fe.forEach((function(t){var r;i.push({multiDragElement:t,index:t.sortableIndex}),r=ge&&t!==le?-1:ge?T(t,":not(."+e.options.selectedClass+")"):T(t),n.push({multiDragElement:t,index:r})})),{items:(t=fe,function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),clones:[].concat(de),oldIndicies:i,newIndicies:n}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function be(t,e){de.forEach((function(i,n){var r=e.children[i.sortableIndex+(t?Number(n):0)];r?e.insertBefore(i,r):e.appendChild(i)}))}function ye(){fe.forEach((function(t){t!==le&&t.parentNode&&t.parentNode.removeChild(t)}))}jt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):this.options.supportPointer?m(document,"pointermove",this._handleFallbackAutoScroll):e.touches?m(document,"touchmove",this._handleFallbackAutoScroll):m(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),te(),Zt(),clearTimeout(S),S=void 0},nulling:function(){qt=Vt=Gt=Jt=Kt=Xt=Yt=null,Qt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(n,r);if(qt=t,e||u||l||f){ie(t,this.options,o,e);var a=k(o,!0);!Jt||Kt&&n===Xt&&r===Yt||(Kt&&te(),Kt=setInterval((function(){var o=k(document.elementFromPoint(n,r),!0);o!==a&&(a=o,Zt()),ie(t,i.options,o,e)}),10),Xt=n,Yt=r)}else{if(!this.options.bubbleScroll||k(o,!0)===E())return void Zt();ie(t,this.options,k(o,!1),!1)}}},o(t,{pluginName:"scroll",initializeByDefault:!0})}),jt.mount(oe,re);const we=jt},8358:function(t){"undefined"!=typeof self&&self,t.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../dist/",e(e.s=0)}([function(t,e,i){"use strict";(function(n){var r;i(2),i(3);var o={},a={},s=[],c=[],l=!1,u=function(t){return(t="string"==typeof t?JSON.parse(t.replace(/\'/gi,'"')):t)instanceof Array?{"":t}:t},h=function(t,e,i,n){var r=!0===i.modifiers.push,o=!0===i.modifiers.avoid,a=1==!i.modifiers.focus,c=!0===i.modifiers.once;o?(s=s.filter((function(t){return!t===e})),s.push(e)):g({b:t,push:r,once:c,focus:a,el:n.elm})},f=function(t,e){for(var i in t){var n=o.encodeKey(t[i]),r=a[n].el.indexOf(e);a[n].el.length>1&&r>-1?a[n].el.splice(r,1):delete a[n]}};o.install=function(t,e){c=[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(e&&e.prevent?e.prevent:[])),t.directive("shortkey",{bind:function(t,e,i){var n=u(e.value);h(n,t,e,i)},update:function(t,e,i){var n=u(e.oldValue);f(n,t);var r=u(e.value);h(r,t,e,i)},unbind:function(t,e){var i=u(e.value);f(i,t)}})},o.decodeKey=function(t){return d(t)},o.encodeKey=function(t){var e={};return e.shiftKey=t.includes("shift"),e.ctrlKey=t.includes("ctrl"),e.metaKey=t.includes("meta"),e.altKey=t.includes("alt"),d(e)+t.filter((function(t){return!["shift","ctrl","meta","alt"].includes(t)})).join("")};var d=function(t){var e="";return("Shift"===t.key||t.shiftKey)&&(e+="shift"),("Control"===t.key||t.ctrlKey)&&(e+="ctrl"),("Meta"===t.key||t.metaKey)&&(e+="meta"),("Alt"===t.key||t.altKey)&&(e+="alt"),"ArrowUp"===t.key&&(e+="arrowup"),"ArrowLeft"===t.key&&(e+="arrowleft"),"ArrowRight"===t.key&&(e+="arrowright"),"ArrowDown"===t.key&&(e+="arrowdown"),"AltGraph"===t.key&&(e+="altgraph"),"Escape"===t.key&&(e+="esc"),"Enter"===t.key&&(e+="enter"),"Tab"===t.key&&(e+="tab")," "===t.key&&(e+="space"),"PageUp"===t.key&&(e+="pageup"),"PageDown"===t.key&&(e+="pagedown"),"Home"===t.key&&(e+="home"),"End"===t.key&&(e+="end"),"Delete"===t.key&&(e+="del"),"Backspace"===t.key&&(e+="backspace"),"Insert"===t.key&&(e+="insert"),"NumLock"===t.key&&(e+="numlock"),"CapsLock"===t.key&&(e+="capslock"),"Pause"===t.key&&(e+="pause"),"ContextMenu"===t.key&&(e+="contextmenu"),"ScrollLock"===t.key&&(e+="scrolllock"),"BrowserHome"===t.key&&(e+="browserhome"),"MediaSelect"===t.key&&(e+="mediaselect"),(t.key&&" "!==t.key&&1===t.key.length||/F\d{1,2}|\//g.test(t.key))&&(e+=t.key.toLowerCase()),e},p=function(t){var e=new CustomEvent("shortkey",{bubbles:!1});a[t].key&&(e.srcKey=a[t].key);var i=a[t].el;i[i.length-1].dispatchEvent(e)};o.keyDown=function(t){(!a[t].once&&!a[t].push||a[t].push&&!l)&&p(t)},n&&Object({NODE_ENV:"production"})&&(document.addEventListener("keydown",(function(t){var e=o.decodeKey(t);if(m(e))if(t.preventDefault(),t.stopPropagation(),a[e].focus)o.keyDown(e),l=!0;else if(!l){var i=a[e].el;i[i.length-1].focus(),l=!0}}),!0),document.addEventListener("keyup",(function(t){var e=o.decodeKey(t);m(e)&&(t.preventDefault(),t.stopPropagation(),(a[e].once||a[e].push)&&p(e)),l=!1}),!0));var g=function(t){var e=t.b,i=t.push,n=t.once,r=t.focus,s=t.el;for(var c in e){var l=o.encodeKey(e[c]),u=a[l]&&a[l].el?a[l].el:[];u.push(s),a[l]={push:i,once:n,focus:r,key:c,el:u}}},m=function(t){var e=!!s.find((function(t){return t===document.activeElement})),i=!!c.find((function(t){return document.activeElement&&document.activeElement.matches(t)}));return!!a[t]&&!(e||i)};void 0!==t&&t.exports?t.exports=o:void 0!==(r=function(){return o}.call(e,i,e,t))&&(t.exports=r)}).call(e,i(1))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){p&&f&&(p=!1,f.length?d=f.concat(d):g=-1,d.length&&a())}function a(){if(!p){var t=r(o);p=!0;for(var e=d.length;e;){for(f=d,d=[];++g<e;)f&&f[g].run();g=-1,e=d.length}f=null,p=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function c(){}var l,u,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(t){u=n}}();var f,d=[],p=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new s(t,e)),1!==d.length||p||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},function(t,e){!function(){if("undefined"!=typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var e=function(t,e){var i,n;return(e=e||{}).bubbles=!!e.bubbles,e.cancelable=!!e.cancelable,(i=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n=i.preventDefault,i.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},i};e.prototype=window.Event.prototype,window.CustomEvent=e}}()}])},9980:function(t,e,i){var n;"undefined"!=typeof self&&self,n=function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"01f9":function(t,e,i){"use strict";var n=i("2d00"),r=i("5ca1"),o=i("2aba"),a=i("32e9"),s=i("84f2"),c=i("41a0"),l=i("7f20"),u=i("38fd"),h=i("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),d="keys",p="values",g=function(){return this};t.exports=function(t,e,i,m,v,b,y){c(i,e,m);var w,S,x,C=function(t){if(!f&&t in E)return E[t];switch(t){case d:case p:return function(){return new i(this,t)}}return function(){return new i(this,t)}},A=e+" Iterator",I=v==p,_=!1,E=t.prototype,O=E[h]||E["@@iterator"]||v&&E[v],P=O||C(v),D=v?I?C("entries"):P:void 0,R="Array"==e&&E.entries||O;if(R&&(x=u(R.call(new t)))!==Object.prototype&&x.next&&(l(x,A,!0),n||"function"==typeof x[h]||a(x,h,g)),I&&O&&O.name!==p&&(_=!0,P=function(){return O.call(this)}),n&&!y||!f&&!_&&E[h]||a(E,h,P),s[e]=P,s[A]=g,v)if(w={values:I?P:C(p),keys:b?P:C(d),entries:D},y)for(S in w)S in E||o(E,S,w[S]);else r(r.P+r.F*(f||_),e,w);return w}},"02f4":function(t,e,i){var n=i("4588"),r=i("be13");t.exports=function(t){return function(e,i){var o,a,s=String(r(e)),c=n(i),l=s.length;return c<0||c>=l?t?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},"0390":function(t,e,i){"use strict";var n=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},"0bfb":function(t,e,i){"use strict";var n=i("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,i){var n=i("ce10"),r=i("e11e");t.exports=Object.keys||function(t){return n(t,r)}},1495:function(t,e,i){var n=i("86cc"),r=i("cb7c"),o=i("0d58");t.exports=i("9e1e")?Object.defineProperties:function(t,e){r(t);for(var i,a=o(e),s=a.length,c=0;s>c;)n.f(t,i=a[c++],e[i]);return t}},"214f":function(t,e,i){"use strict";i("b0c5");var n=i("2aba"),r=i("32e9"),o=i("79e5"),a=i("be13"),s=i("2b4c"),c=i("520a"),l=s("species"),u=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var f=s(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[l]=function(){return i}),i[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!u||"split"===t&&!h){var g=/./[f],m=i(a,f,""[t],(function(t,e,i,n,r){return e.exec===c?d&&!r?{done:!0,value:g.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),v=m[0],b=m[1];n(String.prototype,t,v),r(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"230e":function(t,e,i){var n=i("d3f4"),r=i("7726").document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},"23c6":function(t,e,i){var n=i("2d95"),r=i("2b4c")("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2aba":function(t,e,i){var n=i("7726"),r=i("32e9"),o=i("69a8"),a=i("ca5a")("src"),s=i("fa5b"),c="toString",l=(""+s).split(c);i("8378").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,i,s){var c="function"==typeof i;c&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(o(i,a)||r(i,a,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:s?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[a]||s.call(this)}))},"2aeb":function(t,e,i){var n=i("cb7c"),r=i("1495"),o=i("e11e"),a=i("613b")("IE_PROTO"),s=function(){},c=function(){var t,e=i("230e")("iframe"),n=o.length;for(e.style.display="none",i("fab2").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;n--;)delete c.prototype[o[n]];return c()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[a]=t):i=c(),void 0===e?i:r(i,e)}},"2b4c":function(t,e,i){var n=i("5537")("wks"),r=i("ca5a"),o=i("7726").Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=n},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},"2fdb":function(t,e,i){"use strict";var n=i("5ca1"),r=i("d2c8"),o="includes";n(n.P+n.F*i("5147")(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(t,e,i){var n=i("86cc"),r=i("4630");t.exports=i("9e1e")?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},"38fd":function(t,e,i){var n=i("69a8"),r=i("4bf8"),o=i("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"41a0":function(t,e,i){"use strict";var n=i("2aeb"),r=i("4630"),o=i("7f20"),a={};i("32e9")(a,i("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(a,{next:r(1,i)}),o(t,e+" Iterator")}},"456d":function(t,e,i){var n=i("4bf8"),r=i("0d58");i("5eda")("keys",(function(){return function(t){return r(n(t))}}))},4588:function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,i){var n=i("be13");t.exports=function(t){return Object(n(t))}},5147:function(t,e,i){var n=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},"520a":function(t,e,i){"use strict";var n,r,o=i("0bfb"),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,l=(n=/a/,r=/b*/g,a.call(n,"a"),a.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(t){var e,i,n,r,c=this;return u&&(i=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),l&&(e=c.lastIndex),n=a.call(c,t),l&&n&&(c.lastIndex=c.global?n.index+n[0].length:e),u&&n&&n.length>1&&s.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),t.exports=c},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,i){var n=i("8378"),r=i("7726"),o="__core-js_shared__",a=r[o]||(r[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,i){var n=i("7726"),r=i("8378"),o=i("32e9"),a=i("2aba"),s=i("9b43"),c=function(t,e,i){var l,u,h,f,d=t&c.F,p=t&c.G,g=t&c.S,m=t&c.P,v=t&c.B,b=p?n:g?n[e]||(n[e]={}):(n[e]||{}).prototype,y=p?r:r[e]||(r[e]={}),w=y.prototype||(y.prototype={});for(l in p&&(i=e),i)h=((u=!d&&b&&void 0!==b[l])?b:i)[l],f=v&&u?s(h,n):m&&"function"==typeof h?s(Function.call,h):h,b&&a(b,l,h,t&c.U),y[l]!=h&&o(y,l,f),m&&w[l]!=h&&(w[l]=h)};n.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},"5eda":function(t,e,i){var n=i("5ca1"),r=i("8378"),o=i("79e5");t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],a={};a[t]=e(i),n(n.S+n.F*o((function(){i(1)})),"Object",a)}},"5f1b":function(t,e,i){"use strict";var n=i("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var o=i.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"613b":function(t,e,i){var n=i("5537")("keys"),r=i("ca5a");t.exports=function(t){return n[t]||(n[t]=r(t))}},"626a":function(t,e,i){var n=i("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},6762:function(t,e,i){"use strict";var n=i("5ca1"),r=i("c366")(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(t,e,i){var n=i("626a"),r=i("be13");t.exports=function(t){return n(r(t))}},"69a8":function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},"6a99":function(t,e,i){var n=i("d3f4");t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,i){"use strict";var n=i("0d58"),r=i("2621"),o=i("52a7"),a=i("4bf8"),s=i("626a"),c=Object.assign;t.exports=!c||i("79e5")((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n}))?function(t,e){for(var i=a(t),c=arguments.length,l=1,u=r.f,h=o.f;c>l;)for(var f,d=s(arguments[l++]),p=u?n(d).concat(u(d)):n(d),g=p.length,m=0;g>m;)h.call(d,f=p[m++])&&(i[f]=d[f]);return i}:c},7726:function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(t,e,i){var n=i("4588"),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"7f20":function(t,e,i){var n=i("86cc").f,r=i("69a8"),o=i("2b4c")("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},8378:function(t,e){var i=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,i){var n=i("cb7c"),r=i("c69a"),o=i("6a99"),a=Object.defineProperty;e.f=i("9e1e")?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},"9b43":function(t,e,i){var n=i("d8e8");t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,i){var n=i("2b4c")("unscopables"),r=Array.prototype;null==r[n]&&i("32e9")(r,n,{}),t.exports=function(t){r[n][t]=!0}},"9def":function(t,e,i){var n=i("4588"),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},"9e1e":function(t,e,i){t.exports=!i("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(e,i){e.exports=t},a481:function(t,e,i){"use strict";var n=i("cb7c"),r=i("4bf8"),o=i("9def"),a=i("4588"),s=i("0390"),c=i("5f1b"),l=Math.max,u=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;i("214f")("replace",2,(function(t,e,i,p){return[function(n,r){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},function(t,e){var r=p(i,t,this,e);if(r.done)return r.value;var h=n(t),f=String(this),d="function"==typeof e;d||(e=String(e));var m=h.global;if(m){var v=h.unicode;h.lastIndex=0}for(var b=[];;){var y=c(h,f);if(null===y)break;if(b.push(y),!m)break;""===String(y[0])&&(h.lastIndex=s(f,o(h.lastIndex),v))}for(var w,S="",x=0,C=0;C<b.length;C++){y=b[C];for(var A=String(y[0]),I=l(u(a(y.index),f.length),0),_=[],E=1;E<y.length;E++)_.push(void 0===(w=y[E])?w:String(w));var O=y.groups;if(d){var P=[A].concat(_,I,f);void 0!==O&&P.push(O);var D=String(e.apply(void 0,P))}else D=g(A,f,I,_,O,e);I>=x&&(S+=f.slice(x,I)+D,x=I+A.length)}return S+f.slice(x)}];function g(t,e,n,o,a,s){var c=n+t.length,l=o.length,u=d;return void 0!==a&&(a=r(a),u=f),i.call(s,u,(function(i,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":s=a[r.slice(1,-1)];break;default:var u=+r;if(0===u)return i;if(u>l){var f=h(u/10);return 0===f?i:f<=l?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):i}s=o[u-1]}return void 0===s?"":s}))}}))},aae3:function(t,e,i){var n=i("d3f4"),r=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},ac6a:function(t,e,i){for(var n=i("cadf"),r=i("0d58"),o=i("2aba"),a=i("7726"),s=i("32e9"),c=i("84f2"),l=i("2b4c"),u=l("iterator"),h=l("toStringTag"),f=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),g=0;g<p.length;g++){var m,v=p[g],b=d[v],y=a[v],w=y&&y.prototype;if(w&&(w[u]||s(w,u,f),w[h]||s(w,h,v),c[v]=f,b))for(m in n)w[m]||o(w,m,n[m],!0)}},b0c5:function(t,e,i){"use strict";var n=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},be13:function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,i){var n=i("6821"),r=i("9def"),o=i("77f1");t.exports=function(t){return function(e,i,a){var s,c=n(e),l=r(c.length),u=o(a,l);if(t&&i!=i){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===i)return t||u||0;return!t&&-1}}},c649:function(t,e,i){"use strict";(function(t){i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return c})),i("a481");var n,r,o="undefined"!=typeof window?window.console:t.console,a=/-(\w)/g,s=(n=function(t){return t.replace(a,(function(t,e){return e?e.toUpperCase():""}))},r=Object.create(null),function(t){return r[t]||(r[t]=n(t))});function c(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function l(t,e,i){var n=0===i?t.children[0]:t.children[i-1].nextSibling;t.insertBefore(e,n)}}).call(this,i("c8ba"))},c69a:function(t,e,i){t.exports=!i("9e1e")&&!i("79e5")((function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},ca5a:function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},cadf:function(t,e,i){"use strict";var n=i("9c6c"),r=i("d53b"),o=i("84f2"),a=i("6821");t.exports=i("01f9")(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},cb7c:function(t,e,i){var n=i("d3f4");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,i){var n=i("69a8"),r=i("6821"),o=i("c366")(!1),a=i("613b")("IE_PROTO");t.exports=function(t,e){var i,s=r(t),c=0,l=[];for(i in s)i!=a&&n(s,i)&&l.push(i);for(;e.length>c;)n(s,i=e[c++])&&(~o(l,i)||l.push(i));return l}},d2c8:function(t,e,i){var n=i("aae3"),r=i("be13");t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},d3f4:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(t,e,i){"use strict";var n=i("5ca1"),r=i("9def"),o=i("d2c8"),a="startsWith",s="".startsWith;n(n.P+n.F*i("5147")(a),"String",{startsWith:function(t){var e=o(this,t,a),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,i):e.slice(i,i+n.length)===n}})},f6fd:function(t,e){!function(t){var e="currentScript",i=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(n){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in i)if(i[t].src==e||"interactive"==i[t].readyState)return i[t];return null}}})}(document)},f751:function(t,e,i){var n=i("5ca1");n(n.S+n.F,"Object",{assign:i("7333")})},fa5b:function(t,e,i){t.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,i){var n=i("7726").document;t.exports=n&&n.documentElement},fb15:function(t,e,i){"use strict";var n;function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}i.r(e),"undefined"!=typeof window&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=n[1])),i("f751"),i("f559"),i("ac6a"),i("cadf"),i("456d"),i("6762"),i("2fdb");var s=i("a352"),c=i.n(s),l=i("c649");function u(t,e){var i=this;this.$nextTick((function(){return i.$emit(t.toLowerCase(),e)}))}function h(t){var e=this;return function(i){null!==e.realList&&e["onDrag"+t](i),u.call(e,t,i)}}function f(t){return["transition-group","TransitionGroup"].includes(t)}function d(t,e,i){return t[i]||(e[i]?e[i]():void 0)}var p=["Start","Add","Remove","Update","End"],g=["Choose","Unchoose","Sort","Filter","Clone"],m=["Move"].concat(p,g).map((function(t){return"on"+t})),v=null,b={name:"draggable",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(t){var e=this.$slots.default;this.transitionMode=function(t){if(!t||1!==t.length)return!1;var e,i,n=(e=t,i=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,i)||o(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].componentOptions;return!!n&&f(n.tag)}(e);var i=function(t,e,i){var n=0,r=0,o=d(e,i,"header");o&&(n=o.length,t=t?[].concat(a(o),a(t)):a(o));var s=d(e,i,"footer");return s&&(r=s.length,t=t?[].concat(a(t),a(s)):a(s)),{children:t,headerOffset:n,footerOffset:r}}(e,this.$slots,this.$scopedSlots),n=i.children,r=i.headerOffset,s=i.footerOffset;this.headerOffset=r,this.footerOffset=s;var c=function(t,e){var i=null,n=function(t,e){i=function(t,e,i){return void 0===i||((t=t||{})[e]=i),t}(i,t,e)};if(n("attrs",Object.keys(t).filter((function(t){return"id"===t||t.startsWith("data-")})).reduce((function(e,i){return e[i]=t[i],e}),{})),!e)return i;var r=e.on,o=e.props,a=e.attrs;return n("on",r),n("props",o),Object.assign(i.attrs,a),i}(this.$attrs,this.componentData);return t(this.getTag(),c,n)},created:function(){null!==this.list&&null!==this.value&&l.b.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&l.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&l.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var e={};p.forEach((function(i){e["on"+i]=h.call(t,i)})),g.forEach((function(i){e["on"+i]=u.bind(t,i)}));var i=Object.keys(this.$attrs).reduce((function(e,i){return e[Object(l.a)(i)]=t.$attrs[i],e}),{}),n=Object.assign({},this.options,i,e,{onMove:function(e,i){return t.onDragMove(e,i)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new c.a(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){this.updateOptions(t)},deep:!0},$attrs:{handler:function(t){this.updateOptions(t)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var t=this._vnode.fnOptions;return t&&t.functional},getTag:function(){return this.tag||this.element},updateOptions:function(t){for(var e in t){var i=Object(l.a)(e);-1===m.indexOf(i)&&this._sortable.option(i,t[e])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick((function(){t.visibleIndexes=function(t,e,i,n){if(!t)return[];var r=t.map((function(t){return t.elm})),o=e.length-n,s=a(e).map((function(t,e){return e>=o?r.length:r.indexOf(t)}));return i?s.filter((function(t){return-1!==t})):s}(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode,t.footerOffset)}))},getUnderlyingVm:function(t){var e,i,n=(e=this.getChildrenNodes()||[],i=t,e.map((function(t){return t.elm})).indexOf(i));return-1===n?null:{index:n,element:this.realList[n]}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&f(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e},emitChanges:function(t){var e=this;this.$nextTick((function(){e.$emit("change",t)}))},alterList:function(t){if(this.list)t(this.list);else{var e=a(this.value);t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,a(t))};this.alterList(e)},updatePosition:function(t,e){this.alterList((function(i){return i.splice(e,0,i.splice(t,1)[0])}))},getRelatedContextFromMoveEvent:function(t){var e=t.to,i=t.related,n=this.getUnderlyingPotencialDraggableComponent(e);if(!n)return{component:n};var r=n.realList,o={list:r,component:n};if(e!==i&&r&&n.getUnderlyingVm){var a=n.getUnderlyingVm(i);if(a)return Object.assign(a,o)}return o},getVmIndex:function(t){var e=this.visibleIndexes,i=e.length;return t>i-1?i:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),v=t.item},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){Object(l.d)(t.item);var i=this.getVmIndex(t.newIndex);this.spliceList(i,0,e),this.computeIndexes();var n={element:e,newIndex:i};this.emitChanges({added:n})}},onDragRemove:function(t){if(Object(l.c)(this.rootContainer,t.item,t.oldIndex),"clone"!==t.pullMode){var e=this.context.index;this.spliceList(e,1);var i={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:i})}else Object(l.d)(t.clone)},onDragUpdate:function(t){Object(l.d)(t.item),Object(l.c)(t.from,t.item,t.oldIndex);var e=this.context.index,i=this.getVmIndex(t.newIndex);this.updatePosition(e,i);var n={element:this.context.element,oldIndex:e,newIndex:i};this.emitChanges({moved:n})},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var i=a(e.to.children).filter((function(t){return"none"!==t.style.display})),n=i.indexOf(e.related),r=t.component.getVmIndex(n);return-1===i.indexOf(v)&&e.willInsertAfter?r+1:r},onDragMove:function(t,e){var i=this.move;if(!i||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(t),r=this.context,o=this.computeFutureIndex(n,t);return Object.assign(r,{futureIndex:o}),i(Object.assign({},t,{relatedContext:n,draggedContext:r}),e)},onDragEnd:function(){this.computeIndexes(),v=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",b);var y=b;e.default=y}}).default},t.exports=n(i(1474))},311:t=>{"use strict";t.exports=Vue}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";i(3462),i(5354),i(9116),i(4667),i(5302),i(2423),i(5813),i(7310);var t=i(311),e=i.n(t);function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l,u,h=(l=function(t){!function(){var e={}.hasOwnProperty;function i(){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)){if(r.length){var a=i.apply(null,r);a&&t.push(a)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)e.call(r,s)&&r[s]&&t.push(s);else t.push(r.toString())}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):window.classNames=i}()},l(u={path:void 0,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&u.path)}},u.exports),u.exports),f=function(t){return function(e,i){if(!e)return t;var n;"string"==typeof e?n=e:i=e;var r=t;return n&&(r+="__"+n),r+(i?Object.keys(i).reduce((function(t,e){var n=i[e];return n&&(t+=" "+("boolean"==typeof n?r+"--"+e:r+"--"+e+"_"+n)),t}),""):"")}};function d(t,e,i){var n,r,o,a,s;function c(){var l=Date.now()-a;l<e&&l>=0?n=setTimeout(c,e-l):(n=null,i||(s=t.apply(o,r),o=r=null))}null==e&&(e=100);var l=function(){o=this,r=arguments,a=Date.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(s=t.apply(o,r),o=r=null),s};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(s=t.apply(o,r),o=r=null,clearTimeout(n),n=null)},l}d.debounce=d;var p=d,g=function(){return g=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},g.apply(this,arguments)};function m(t,e){var i,n;return t&&e?(i=""+t+e[0].toUpperCase()+e.slice(1),n=t+"-"+e):(i=t||e,n=t||e),{name:i,classname:n}}function v(t){return/^blob:/.test(t)}function b(t){return v(t)||function(t){return/^data:/.test(t)}(t)}function y(t){return!!(t&&t.constructor&&t.call&&t.apply)}function w(t){return void 0===t}function S(t){return"object"==typeof t&&null!==t}function x(t,e,i){var n={};return S(t)?(Object.keys(e).forEach((function(r){w(t[r])?n[r]=e[r]:S(e[r])?S(t[r])?n[r]=x(t[r],e[r],i[r]):n[r]=t[r]?e[r]:i[r]:!0===e[r]||!1===e[r]?n[r]=Boolean(t[r]):n[r]=t[r]})),n):t?e:i}function C(t){var e=Number(t);return Number.isNaN(e)?t:e}function A(t){return typeof("number"==t||function(t){return"object"==typeof t&&null!==t}(t)&&"[object Number]"==toString.call(t))&&!I(t)}function I(t){return t!=t}function _(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}var E=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.type="manipulateImage",this.move=t,this.scale=e},O=function(t,e){void 0===e&&(e={}),this.type="resize",this.directions=t,this.params=e},P=function(t){this.type="move",this.directions=t},D=function(){function t(t,e,i,n,r){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=n,this.element=e,this.anchor=r}return t.prototype.shift=function(){var t=this,e=t.element,i=t.anchor,n=t.position,r=e.getBoundingClientRect(),o=r.left,a=r.top;return{left:n.left-o-i.left,top:n.top-a-i.top}},t}();function R(t,e,i,n,r,o,a,s,c,l){"boolean"!=typeof a&&(c=s,s=a,a=!1);const u="function"==typeof i?i.options:i;let h;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),n&&(u._scopeId=n),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=h):e&&(h=a?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),h)if(u.functional){const t=u.render;u.render=function(e,i){return h.call(i),t(e,i)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,h):[h]}return i}var T=R({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"draggable",class:t.classname,on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseleave:t.onMouseLeave}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"DraggableElement",mixins:[{beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(t){t.cancelable&&!this.disabled&&1===t.touches.length&&(this.touches=s(t.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),t.touches.length&&this.initAnchor(this.touches.reduce((function(e,i){return{clientX:e.clientX+i.clientX/t.touches.length,clientY:e.clientY+i.clientY/t.touches.length}}),{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){if(!this.disabled&&0===t.button){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.draggable.getBoundingClientRect(),i=e.left,n=e.right,r=e.bottom,o=e.top;this.anchor={left:t.clientX-i,top:t.clientY-o,bottom:r-t.clientY,right:n-t.clientX}},processMove:function(t,e){var i=s(e);if(this.touches.length){if(1===this.touches.length&&1===i.length){var n=this.$refs.draggable;this.$emit("drag",new D(t,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}}}],props:{classname:{type:String}}},void 0,!1,void 0,!1,void 0,void 0,void 0),M=f("vue-handler-wrapper"),k=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root},[i("DraggableElement",{class:t.classes.draggable,on:{drag:function(e){return t.$emit("drag",e)},"drag-end":function(e){return t.$emit("drag-end")},leave:function(e){return t.$emit("leave")},enter:function(e){return t.$emit("enter")}}},[t._t("default")],2)],1)},staticRenderFns:[]},void 0,{name:"HandlerWrapper",components:{DraggableElement:T},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var t;if(this.horizontalPosition||this.verticalPosition){var e,i=m(this.horizontalPosition,this.verticalPosition);t=M((o(e={},i.classname,!0),o(e,"disabled",this.disabled),e))}else t=M({disabled:this.disabled});return{root:t,draggable:M("draggable")}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),F=f("vue-line-wrapper"),L=R({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("DraggableElement",{class:t.classname,on:{drag:function(e){return t.$emit("drag",e)},"drag-end":function(e){return t.$emit("drag-end")},leave:function(e){return t.$emit("leave")},enter:function(e){return t.$emit("enter")}}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"LineWrapper",components:{DraggableElement:T},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var t;return F((o(t={},this.position,!0),o(t,"disabled",this.disabled),t))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),z=["left","right","top","bottom"],j=["left","right"],N=["top","bottom"],B=["left","top"],U=["fill-area","fit-area","stencil","none"],H={left:0,top:0,width:0,height:0};function W(t,e,i){return!(i=i||["width","height","left","top"]).some((function(i){return t[i]!==e[i]}))}function $(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function G(t,e){return{left:t.left-e.left,top:t.top-e.top}}function V(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function X(t,e){var i={left:0,top:0,right:0,bottom:0};return z.forEach((function(n){var r=e[n],o=$(t)[n];i[n]=void 0!==r&&void 0!==o?"left"===n||"top"===n?Math.max(0,r-o):Math.max(0,o-r):0})),i}function Y(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function q(t){return{left:-t.left,top:-t.top}}function K(t,e){return g(g({},t),{left:t.left+e.left,top:t.top+e.top})}function Q(t,e,i,n){if(1!==e){if(i){var r=V(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(i.left-r.left)*(n||1-e),top:t.top+t.height*(1-e)/2+(i.top-r.top)*(n||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return t}function J(t){return t.width/t.height}function Z(t,e){return Math.min(void 0!==e.right&&void 0!==e.left?(e.right-e.left)/t.width:1/0,void 0!==e.bottom&&void 0!==e.top?(e.bottom-e.top)/t.height:1/0)}function tt(t,e){var i={left:0,top:0},n=X(t,e);return n.left&&n.left>0?i.left=n.left:n.right&&n.right>0&&(i.left=-n.right),n.top&&n.top>0?i.top=n.top:n.bottom&&n.bottom>0&&(i.top=-n.bottom),i}function et(t,e){var i;return e.minimum&&t<e.minimum?i=e.minimum:e.maximum&&t>e.maximum&&(i=e.maximum),i}function it(t,e){var i=J(t),n=J(e);return e.width<1/0&&e.height<1/0?i>n?{width:e.width,height:e.width/i}:{width:e.height*i,height:e.height}:e.width<1/0?{width:e.width,height:e.width/i}:e.height<1/0?{width:e.height*i,height:e.height}:t}function nt(t,e){var i=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(i))+Math.abs(t.height*Math.sin(i)),height:Math.abs(t.width*Math.sin(i))+Math.abs(t.height*Math.cos(i))}}function rt(t,e){var i=e*Math.PI/180;return{left:t.left*Math.cos(i)-t.top*Math.sin(i),top:t.left*Math.sin(i)+t.top*Math.cos(i)}}function ot(t,e){var i=X(at(t,e),e);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((t.width+i.left+i.right)/t.width,Z(t,e)):Math.min((t.height+i.top+i.bottom)/t.height,Z(t,e)):1}function at(t,e,i){void 0===i&&(i=!1);var n=tt(t,e);return K(t,i?q(n):n)}function st(t){return{width:void 0!==t.right&&void 0!==t.left?t.right-t.left:1/0,height:void 0!==t.bottom&&void 0!==t.top?t.bottom-t.top:1/0}}function ct(t,e){return g(g({},t),{minWidth:Math.min(e.width,t.minWidth),minHeight:Math.min(e.height,t.minHeight),maxWidth:Math.min(e.width,t.maxWidth),maxHeight:Math.min(e.height,t.maxHeight)})}function lt(t,e,i){void 0===i&&(i=!0);var n={};return z.forEach((function(r){var o=t[r],a=e[r];void 0!==o&&void 0!==a?n[r]="left"===r||"top"===r?i?Math.max(o,a):Math.min(o,a):i?Math.min(o,a):Math.max(o,a):void 0!==a?n[r]=a:void 0!==o&&(n[r]=o)})),n}function ut(t,e){return lt(t,e,!0)}function ht(t){var e=t.size,i=t.aspectRatio,n=t.ignoreMinimum,r=t.sizeRestrictions;return Boolean((e.correctRatio||J(e)>=i.minimum&&J(e)<=i.maximum)&&e.height<=r.maxHeight&&e.width<=r.maxWidth&&e.width&&e.height&&(n||e.height>=r.minHeight&&e.width>=r.minWidth))}function ft(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function dt(t){var e=t.width,i=t.height,n=t.sizeRestrictions,r={minimum:t.aspectRatio&&t.aspectRatio.minimum||0,maximum:t.aspectRatio&&t.aspectRatio.maximum||1/0},o={width:Math.max(n.minWidth,Math.min(n.maxWidth,e)),height:Math.max(n.minHeight,Math.min(n.maxHeight,i))};function a(t,o){return void 0===o&&(o=!1),t.reduce((function(t,a){return ht({size:a,aspectRatio:r,sizeRestrictions:n,ignoreMinimum:o})&&(!t||ft(a,{width:e,height:i})<ft(t,{width:e,height:i}))?a:t}),null)}var s=[];r&&[r.minimum,r.maximum].forEach((function(t){t&&s.push({width:o.width,height:o.width/t,correctRatio:!0},{width:o.height*t,height:o.height,correctRatio:!0})})),ht({size:o,aspectRatio:r,sizeRestrictions:n})&&s.push(o);var c=a(s)||a(s,!0);return c&&{width:c.width,height:c.height}}function pt(t){var e=t.event,i=t.coordinates,n=t.positionRestrictions,r=void 0===n?{}:n,o=K(i,e.directions);return K(o,tt(o,r))}function gt(t){var e=t.coordinates,i=t.transform,n=t.imageSize,r=t.sizeRestrictions,o=t.positionRestrictions,a=t.aspectRatio,s=t.visibleArea,c=function(t,e){return pt({coordinates:t,positionRestrictions:o,event:new P({left:e.left-t.left,top:e.top-t.top})})},l=g({},e);return(Array.isArray(i)?i:[i]).forEach((function(t){var e;w((e="function"==typeof t?t({coordinates:l,imageSize:n,visibleArea:s}):t).width)&&w(e.height)||(l=function(t,e){var i=g(g(g({},t),dt({width:e.width,height:e.height,sizeRestrictions:r,aspectRatio:a})),{left:0,top:0});return c(i,{left:t.left,top:t.top})}(l,g(g({},l),e))),w(e.left)&&w(e.top)||(l=c(l,g(g({},l),e)))})),l}function mt(t){t.event;var e=t.getAreaRestrictions,i=t.boundaries,n=t.coordinates,r=t.visibleArea;t.aspectRatio;var o=t.stencilSize,a=t.sizeRestrictions,s=t.positionRestrictions;t.stencilReference;var c,l,u,h=g({},n),f=g({},r),d=g({},o);c=J(d),l=J(h),void 0===u&&(u=.001),(0===c||0===l?Math.abs(l-c)<u:Math.abs(l/c)<1+u&&Math.abs(l/c)>1-u)||(h=g(g({},h),dt({sizeRestrictions:a,width:h.width,height:h.height,aspectRatio:{minimum:J(d),maximum:J(d)}})));var p=ot(f=Q(f,h.width*i.width/(f.width*d.width)),e({visibleArea:f,type:"resize"}));return 1!==p&&(f=Q(f,p),h=Q(h,p)),f=at(f=K(f,G(V(h),V(f))),e({visibleArea:f,type:"move"})),{coordinates:h=at(h,ut($(f),s)),visibleArea:f}}function vt(t){var e=t.event,i=t.getAreaRestrictions,n=t.boundaries,r=t.coordinates,o=t.visibleArea;t.aspectRatio,t.stencilSize,t.sizeRestrictions;var a=t.positionRestrictions;t.stencilReference;var s=g({},r),c=g({},o);if(r&&o&&"manipulateImage"!==e.type){var l={width:0,height:0};c.width,n.width,J(n)>J(s)?(l.height=.8*n.height,l.width=l.height*J(s)):(l.width=.8*n.width,l.height=l.width*J(s));var u=ot(c=Q(c,s.width*n.width/(c.width*l.width)),i({visibleArea:c,type:"resize"}));c=Q(c,u),1!==u&&(l.height/=u,l.width/=u),c=at(c=K(c,G(V(s),V(c))),i({visibleArea:c,type:"move"})),s=at(s,ut($(c),a))}return{coordinates:s,visibleArea:c}}function bt(t){var e=t.event,i=t.coordinates,n=t.visibleArea,r=t.getAreaRestrictions,o=g({},n),a=g({},i);if("setCoordinates"===e.type){var s=Math.max(0,a.width-o.width),c=Math.max(0,a.height-o.height);s>c?o=Q(o,Math.min(a.width/o.width,Z(o,r({visibleArea:o,type:"resize"})))):c>s&&(o=Q(o,Math.min(a.height/o.height,Z(o,r({visibleArea:o,type:"resize"}))))),o=at(o=K(o,q(tt(a,$(o)))),r({visibleArea:o,type:"move"}))}return{visibleArea:o,coordinates:a}}function yt(t){var e=t.imageSize,i=t.visibleArea,n=t.aspectRatio,r=t.sizeRestrictions,o=i||e,a=Math.min(n.maximum||1/0,Math.max(n.minimum||0,J(o))),s=o.width<o.height?{width:.8*o.width,height:.8*o.width/a}:{height:.8*o.height,width:.8*o.height*a};return dt(g(g({},s),{aspectRatio:n,sizeRestrictions:r}))}function wt(t){var e,i,n=t.imageSize,r=t.visibleArea,o=t.boundaries,a=t.aspectRatio,s=t.sizeRestrictions,c=t.stencilSize,l=r||n;return J(l)>J(o)?i=(e=c.height*l.height/o.height)*J(c):e=(i=c.width*l.width/o.width)/J(c),dt({width:i,height:e,aspectRatio:a,sizeRestrictions:s})}function St(t,e){return lt(t,$(e))}function xt(t){var e=t.event,i=t.coordinates,n=t.visibleArea,r=t.sizeRestrictions,o=t.getAreaRestrictions,a=t.positionRestrictions,s=t.adjustStencil,c=e.scale,l=e.move,u=g({},n),h=g({},i),f=1,d=1,p=c.factor&&Math.abs(c.factor-1)>.001;u=K(u,{left:l.left||0,top:l.top||0});var m={stencil:{minimum:Math.max(r.minWidth?r.minWidth/h.width:0,r.minHeight?r.minHeight/h.height:0),maximum:Math.min(r.maxWidth?r.maxWidth/h.width:1/0,r.maxHeight?r.maxHeight/h.height:1/0,Z(h,a))},area:{maximum:Z(u,o({visibleArea:u,type:"resize"}))}};c.factor&&p&&(c.factor<1?(d=Math.max(c.factor,m.stencil.minimum))>1&&(d=1):c.factor>1&&(d=Math.min(c.factor,Math.min(m.area.maximum,m.stencil.maximum)))<1&&(d=1)),d&&(u=Q(u,d,c.center));var v=i.left-n.left,b=n.width+n.left-(i.width+i.left),y=i.top-n.top,w=n.height+n.top-(i.height+i.top);return u=at(u=K(u,tt(u,{left:void 0!==a.left?a.left-v*d:void 0,top:void 0!==a.top?a.top-y*d:void 0,bottom:void 0!==a.bottom?a.bottom+w*d:void 0,right:void 0!==a.right?a.right+b*d:void 0})),o({visibleArea:u,type:"move"})),h.width=h.width*d,h.height=h.height*d,h.left=u.left+v*d,h.top=u.top+y*d,h=at(h,ut($(u),a)),c.factor&&p&&s&&(c.factor>1?f=Math.min(m.area.maximum,c.factor)/d:c.factor<1&&(f=Math.max(h.height/u.height,h.width/u.width,c.factor/d)),1!==f&&(u=K(u=at(u=Q(u,f,c.factor>1?c.center:V(h)),o({visibleArea:u,type:"move"})),q(tt(h,$(u)))))),{coordinates:h,visibleArea:u}}function Ct(t){var e=t.aspectRatio,i=t.getAreaRestrictions,n=t.coordinates,r=t.visibleArea,o=t.sizeRestrictions,a=t.positionRestrictions,s=t.imageSize,c=t.previousImageSize,l=t.angle,u=g({},n),h=g({},r),f=rt(V(g({left:0,top:0},c)),l);return(u=g(g({},dt({sizeRestrictions:o,aspectRatio:e,width:u.width,height:u.height})),rt(V(u),l))).left-=f.left-s.width/2+u.width/2,u.top-=f.top-s.height/2+u.height/2,h=Q(h,ot(h,i({visibleArea:h,type:"resize"}))),{coordinates:u=at(u,a),visibleArea:h=at(h=K(h,G(V(u),V(n))),i({visibleArea:h,type:"move"}))}}function At(t){var e=t.flip,i=t.previousFlip,n=t.rotate;t.aspectRatio;var r=t.getAreaRestrictions,o=t.coordinates,a=t.visibleArea,s=t.imageSize,c=g({},o),l=g({},a),u=i.horizontal!==e.horizontal,h=i.vertical!==e.vertical;if(u||h){var f=rt({left:s.width/2,top:s.height/2},-n),d=rt(V(c),-n),p=rt({left:u?f.left-(d.left-f.left):d.left,top:h?f.top-(d.top-f.top):d.top},n);c=K(c,G(p,V(c))),d=rt(V(l),-n),l=at(l=K(l,G(p=rt({left:u?f.left-(d.left-f.left):d.left,top:h?f.top-(d.top-f.top):d.top},n),V(l))),r({visibleArea:l,type:"move"}))}return{coordinates:c,visibleArea:l}}function It(t){var e=t.directions,i=t.coordinates,n=t.positionRestrictions,r=void 0===n?{}:n,o=t.sizeRestrictions,a=t.preserveRatio,s=t.compensate,c=g({},e),l=Y(i,c).width,u=Y(i,c).height;l<0&&(c.left<0&&c.right<0?(c.left=-(i.width-o.minWidth)/(c.left/c.right),c.right=-(i.width-o.minWidth)/(c.right/c.left)):c.left<0?c.left=-(i.width-o.minWidth):c.right<0&&(c.right=-(i.width-o.minWidth))),u<0&&(c.top<0&&c.bottom<0?(c.top=-(i.height-o.minHeight)/(c.top/c.bottom),c.bottom=-(i.height-o.minHeight)/(c.bottom/c.top)):c.top<0?c.top=-(i.height-o.minHeight):c.bottom<0&&(c.bottom=-(i.height-o.minHeight)));var h=X(Y(i,c),r);s&&(h.left&&h.left>0&&0===h.right?(c.right+=h.left,c.left-=h.left):h.right&&h.right>0&&0===h.left&&(c.left+=h.right,c.right-=h.right),h.top&&h.top>0&&0===h.bottom?(c.bottom+=h.top,c.top-=h.top):h.bottom&&h.bottom>0&&0===h.top&&(c.top+=h.bottom,c.bottom-=h.bottom),h=X(Y(i,c),r));var f={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(z.forEach((function(t){var e=h[t];e&&c[t]&&(f[t]=Math.max(0,1-e/c[t]))})),a){var d=Math.min.apply(null,z.map((function(t){return f[t]})));d!==1/0&&z.forEach((function(t){c[t]*=d}))}else z.forEach((function(t){f[t]!==1/0&&(c[t]*=f[t])}));if(l=Y(i,c).width,u=Y(i,c).height,c.right+c.left&&(l>o.maxWidth?f.width=(o.maxWidth-i.width)/(c.right+c.left):l<o.minWidth&&(f.width=(o.minWidth-i.width)/(c.right+c.left))),c.bottom+c.top&&(u>o.maxHeight?f.height=(o.maxHeight-i.height)/(c.bottom+c.top):u<o.minHeight&&(f.height=(o.minHeight-i.height)/(c.bottom+c.top))),a){var p=Math.min(f.width,f.height);p!==1/0&&z.forEach((function(t){c[t]*=p}))}else f.width!==1/0&&j.forEach((function(t){c[t]*=f.width})),f.height!==1/0&&N.forEach((function(t){c[t]*=f.height}));return c}function _t(t,e,i){return 0==e&&0==i?t/2:0==e?0:0==i?t:t*Math.abs(e/(e+i))}var Et=f("vue-simple-handler"),Ot=f("vue-simple-handler-wrapper"),Pt=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("HandlerWrapper",{class:t.classes.wrapper,attrs:{"vertical-position":t.verticalPosition,"horizontal-position":t.horizontalPosition,disabled:t.disabled},on:{drag:t.onDrag,"drag-end":t.onDragEnd,enter:t.onEnter,leave:t.onLeave}},[i("div",{class:t.classes.default})])},staticRenderFns:[]},void 0,{name:"SimpleHandler",components:{HandlerWrapper:k},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var t,e=(o(t={},this.horizontalPosition,Boolean(this.horizontalPosition)),o(t,this.verticalPosition,Boolean(this.verticalPosition)),o(t,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),Boolean(this.verticalPosition&&this.horizontalPosition)),o(t,"hover",this.hover),t);return{default:h(Et(e),this.defaultClass,this.hover&&this.hoverClass),wrapper:h(Ot(e),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Dt=f("vue-simple-line"),Rt=f("vue-simple-line-wrapper"),Tt=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("LineWrapper",{class:t.classes.wrapper,attrs:{position:t.position,disabled:t.disabled},on:{drag:t.onDrag,"drag-end":t.onDragEnd,enter:t.onEnter,leave:t.onLeave}},[i("div",{class:t.classes.root})])},staticRenderFns:[]},void 0,{name:"SimpleLine",components:{LineWrapper:L},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:h(Dt(o({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:h(Rt(o({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Mt=f("vue-bounding-box"),kt=["east","west",null],Ft=["south","north",null],Lt=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"box",class:t.classes.root,style:t.style},[t._t("default"),t._v(" "),i("div",t._l(t.lineNodes,(function(e){return i(e.component,{key:e.name,tag:"component",attrs:{"default-class":e.class,"hover-class":e.hoverClass,"wrapper-class":e.wrapperClass,position:e.name,disabled:e.disabled},on:{drag:function(i){return t.onHandlerDrag(i,e.horizontalDirection,e.verticalDirection)},"drag-end":function(e){return t.onEnd()}}})})),1),t._v(" "),t._l(t.handlerNodes,(function(e){return i("div",{key:e.name,class:e.wrapperClass,style:e.wrapperStyle},[i(e.component,{tag:"component",attrs:{"default-class":e.class,"hover-class":e.hoverClass,"wrapper-class":e.wrapperClass,"horizontal-position":e.horizontalDirection,"vertical-position":e.verticalDirection,disabled:e.disabled},on:{drag:function(i){return t.onHandlerDrag(i,e.horizontalDirection,e.verticalDirection)},"drag-end":function(e){return t.onEnd()}}})],1)}))],2)},staticRenderFns:[]},void 0,{name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Pt}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Tt}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var t=[];return kt.forEach((function(e){Ft.forEach((function(i){if(e!==i){var n=m(e,i),r=n.name,o=n.classname;t.push({name:r,classname:o,verticalDirection:i,horizontalDirection:e})}}))})),{points:t}},computed:{style:function(){var t={};return this.width&&this.height&&(t.width="".concat(this.width,"px"),t.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),t},classes:function(){var t=this.handlersClasses,e=this.handlersWrappersClasses,i=this.linesClasses,n=this.linesWrappersClasses;return{root:Mt(),handlers:t,handlersWrappers:e,lines:i,linesWrappers:n}},lineNodes:function(){var t=this,e=[];return this.points.forEach((function(i){i.horizontalDirection&&i.verticalDirection||!t.lines[i.name]||e.push({name:i.name,component:t.linesComponent,class:h(t.classes.lines.default,t.classes.lines[i.name],!t.resizable&&t.classes.lines.disabled),wrapperClass:h(t.classes.linesWrappers.default,t.classes.linesWrappers[i.name],!t.resizable&&t.classes.linesWrappers.disabled),hoverClass:t.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!t.resizable})})),e},handlerNodes:function(){var t=this,e=[],i=this.width,n=this.height;return this.points.forEach((function(r){if(t.handlers[r.name]){var a={name:r.name,component:t.handlersComponent,class:h(t.classes.handlers.default,t.classes.handlers[r.name]),wrapperClass:h(t.classes.handlersWrappers.default,t.classes.handlersWrappers[r.name]),hoverClass:t.classes.handlers.hover,verticalDirection:r.verticalDirection,horizontalDirection:r.horizontalDirection,disabled:!t.resizable};if(i&&n){var s=r.horizontalDirection,c=r.verticalDirection,l="east"===s?i:"west"===s?0:i/2,u="south"===c?n:"north"===c?0:n/2;a.wrapperClass=Mt("handler"),a.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(u,"px)")},t.transitions&&t.transitions.enabled&&(a.wrapperStyle.transition="".concat(t.transitions.time,"ms ").concat(t.transitions.timingFunction))}else a.wrapperClass=Mt("handler",o({},r.classname,!0));e.push(a)}})),e}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(t,e,i){var n,r=t.shift(),o=r.left,a=r.top,s={left:0,right:0,top:0,bottom:0};"west"===e?s.left-=o:"east"===e&&(s.right+=o),"north"===i?s.top-=a:"south"===i&&(s.bottom+=a),!i&&e?n="width":i&&!e&&(n="height"),this.resizable&&this.$emit("resize",new O(s,{allowedDirections:{left:"west"===e||!e,right:"east"===e||!e,bottom:"south"===i||!i,top:"north"===i||!i},preserveAspectRatio:t.nativeEvent&&t.nativeEvent.shiftKey,respectDirection:n}))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),zt=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.type="manipulateImage",this.move=t,this.scale=e},jt=function(t){this.type="move",this.directions=t},Nt=f("vue-draggable-area"),Bt=R({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"container",on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Nt()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(t){if(t.cancelable){var e=this.movable&&1===t.touches.length;e&&(this.touches=s(t.touches)),(this.touchStarted||e)&&(t.preventDefault(),t.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(t){this.touches.length>=1&&(this.touchStarted?(this.processMove(t,t.touches),t.preventDefault(),t.stopPropagation()):_({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:t.touches[0].clientX,y:t.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(t){if(this.movable&&0===t.button){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.container.getBoundingClientRect(),i=e.left,n=e.top;this.anchor={x:t.clientX-i,y:t.clientY-n}},processMove:function(t,e){var i=s(e);if(this.touches.length){var n=this.$refs.container.getBoundingClientRect(),r=n.left,o=n.top;1===this.touches.length&&1===i.length&&this.$emit("move",new jt({left:i[0].clientX-(r+this.anchor.x),top:i[0].clientY-(o+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}}},void 0,!1,void 0,!1,void 0,void 0,void 0);function Ut(t){var e,i;return{rotate:t.rotate||0,flip:{horizontal:(null===(e=null==t?void 0:t.flip)||void 0===e?void 0:e.horizontal)||!1,vertical:(null===(i=null==t?void 0:t.flip)||void 0===i?void 0:i.vertical)||!1}}}function Ht(t){var e=t.rotate,i=t.flip,n=t.scaleX,r=t.scaleY,o="";return o+=" rotate("+e+"deg) ",(o+=" scaleX("+n*(i.horizontal?-1:1)+") ")+" scaleY("+r*(i.vertical?-1:1)+") "}var Wt=f("vue-preview-result");function $t(t,e){var i=e.getBoundingClientRect(),n=i.left,r=i.top,o={left:0,top:0},a=0;return t.forEach((function(e){o.left+=(e.clientX-n)/t.length,o.top+=(e.clientY-r)/t.length})),t.forEach((function(t){a+=_({x:o.left,y:o.top},{x:t.clientX-n,y:t.clientY-r})})),{centerMass:o,spread:a,count:t.length}}R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root},[i("div",{ref:"wrapper",class:t.classes.wrapper,style:t.wrapperStyle},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{src:t.image.src}})])])},staticRenderFns:[]},void 0,{name:"PreviewResult",props:{image:{type:Object},transitions:{type:Object},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},imageClass:{type:String}},computed:{classes:function(){return{root:Wt(),wrapper:Wt("wrapper"),imageWrapper:Wt("image-wrapper"),image:h(Wt("image"),this.imageClass)}},wrapperStyle:function(){var t={width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},imageStyle:function(){var t=this.image.transforms,e=nt({width:this.image.width,height:this.image.height},t.rotate),i={width:"".concat(this.image.width,"px"),height:"".concat(this.image.height,"px"),left:"0px",top:"0px"},n=(this.image.width-e.width)*t.scaleX/2,r=(this.image.height-e.height)*t.scaleY/2,o=(1-t.scaleX)*this.image.width/2,a=(1-t.scaleY)*this.image.height/2;return i.transform="translate(\n\t\t\t\t".concat(-this.stencilCoordinates.left-t.translateX-n-o,"px,").concat(-this.stencilCoordinates.top-t.translateY-r-a,"px) ")+Ht(t),this.transitions&&this.transitions.enabled&&(i.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),i}}},void 0,!1,void 0,!1,void 0,void 0,void 0);var Gt=R({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"container",on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown,wheel:t.onWheel}},[t._t("default")],2)},staticRenderFns:[]},void 0,{props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=p(this.processEnd),this.touches=[]},methods:{processMove:function(t,e){if(this.touches.length){if(1===this.touches.length&&1===e.length)this.$emit("move",new zt({left:this.touches[0].clientX-e[0].clientX,top:this.touches[0].clientY-e[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=$t(e,this.$refs.container),n=this.oldGeometricProperties;n.count===i.count&&n.count>1&&this.$emit("resize",new zt({left:n.centerMass.left-i.centerMass.left,top:n.centerMass.top-i.centerMass.top},{factor:n.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=e}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(t){return this.eventsFilter?!1!==this.eventsFilter(t,this.transforming):(t.preventDefault(),t.stopPropagation(),!0)},onTouchStart:function(t){if(t.cancelable&&(this.touchMove||this.touchResize&&t.touches.length>1)&&this.processEvent(t)){var e=this.$refs.container,i=e.getBoundingClientRect(),n=i.left,r=i.top,o=i.bottom,a=i.right;this.touches=s(t.touches).filter((function(t){return t.clientX>n&&t.clientX<a&&t.clientY>r&&t.clientY<o})),this.oldGeometricProperties=$t(this.touches,e)}},onTouchEnd:function(t){0===t.touches.length&&(this.touches=[],this.processEnd())},onTouchMove:function(t){var e=this;if(this.touches.length){var i=s(t.touches).filter((function(t){return!t.identifier||e.touches.find((function(e){return e.identifier===t.identifier}))}));this.processEvent(t)&&(this.processMove(t,i),this.processStart())}},onMouseDown:function(t){if(this.mouseMove&&"buttons"in t&&1===t.buttons&&this.processEvent(t)){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.processStart()}},onMouseMove:function(t){this.touches.length&&this.processEvent(t)&&this.processMove(t,[{clientX:t.clientX,clientY:t.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(t){if(this.wheelResize&&this.processEvent(t)){var e=this.$refs.container.getBoundingClientRect(),i=e.left,n=e.top,r=1+this.wheelResize.ratio*(0==(a=+(t.deltaY||t.detail||t.wheelDelta))||I(a)?a:a>0?1:-1),o={left:t.clientX-i,top:t.clientY-n};this.$emit("resize",new zt({},{factor:r,center:o})),this.touches.length||this.debouncedProcessEnd()}var a}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Vt=R({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("transformable-image",{attrs:{"touch-move":t.touchMove,"touch-resize":t.touchResize,"mouse-move":t.mouseMove,"wheel-resize":t.wheelResize},on:{move:function(e){return t.$emit("move",e)},resize:function(e){return t.$emit("resize",e)}}},[t._t("default")],2)},staticRenderFns:[]},void 0,{components:{TransformableImage:Gt},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Xt=f("vue-preview"),Yt=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"root",class:t.classes.root,style:t.style},[i("div",{ref:"wrapper",class:t.classes.wrapper,style:t.wrapperStyle},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.image&&t.image.src,expression:"image && image.src"}],ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{src:t.image&&t.image.src}})])])},staticRenderFns:[]},void 0,{props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:Xt({fill:this.fill}),wrapper:Xt("wrapper"),imageWrapper:Xt("image-wrapper"),image:h(Xt("image"),this.imageClass)}},style:function(){if(this.fill)return{};var t={};return this.width&&(t.width="".concat(this.size.width,"px")),this.height&&(t.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},wrapperStyle:function(){var t={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},imageStyle:function(){if(this.coordinates&&this.image){var t=this.coordinates.width/this.size.width,e=r(r({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/t,scaleY:1/t}),i=this.imageSize.width,n=this.imageSize.height,o=nt({width:i,height:n},e.rotate),a={width:"".concat(i,"px"),height:"".concat(n,"px"),left:"0px",top:"0px"},s={rotate:{left:(i-o.width)*e.scaleX/2,top:(n-o.height)*e.scaleY/2},scale:{left:(1-e.scaleX)*i/2,top:(1-e.scaleY)*n/2}};return a.transform="translate(\n\t\t\t\t".concat(-this.coordinates.left/t-s.rotate.left-s.scale.left,"px,").concat(-this.coordinates.top/t-s.rotate.top-s.scale.top,"px) ")+Ht(e),this.transitions&&this.transitions.enabled&&(a.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),a}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(t){(t.width||t.height)&&this.onChangeImage()}},mounted:function(){var t=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){t.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var t=this.$refs.image;this.calculatedImageSize.height=t.naturalHeight,this.calculatedImageSize.width=t.naturalWidth},refresh:function(){var t=this.$refs.root;this.width||(this.calculatedSize.width=t.clientWidth),this.height||(this.calculatedSize.height=t.clientHeight)},onChangeImage:function(){var t=this.$refs.image;t&&t.complete&&this.refreshImage(),this.refresh()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),qt=R({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("preview",t._b({attrs:{fill:!0}},"preview",t.$attrs,!1))},staticRenderFns:[]},void 0,{components:{Preview:Yt},inheritAttrs:!1},void 0,!1,void 0,!1,void 0,void 0,void 0),Kt=f("vue-rectangle-stencil"),Qt=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.stencil,style:t.style},[i("bounding-box",{class:t.classes.boundingBox,attrs:{width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions,handlers:t.handlers,"handlers-component":t.handlersComponent,"handlers-classes":t.handlersClasses,"handlers-wrappers-classes":t.handlersWrappersClasses,lines:t.lines,"lines-component":t.linesComponent,"lines-classes":t.linesClasses,"lines-wrappers-classes":t.linesWrappersClasses,resizable:t.resizable},on:{resize:t.onResize,"resize-end":t.onResizeEnd}},[i("draggable-area",{attrs:{movable:t.movable},on:{move:t.onMove,"move-end":t.onMoveEnd}},[i("stencil-preview",{class:t.classes.preview,attrs:{image:t.image,coordinates:t.coordinates,width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions}})],1)],1)],1)},staticRenderFns:[]},void 0,{name:"RectangleStencil",components:{StencilPreview:qt,BoundingBox:Lt,DraggableArea:Bt},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Pt}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Tt}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:h(Kt({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:h(Kt("preview"),this.previewClass),boundingBox:h(Kt("bounding-box"),this.boundingBoxClass)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,n=t.left,r=t.top,o={width:"".concat(i,"px"),height:"".concat(e,"px"),transform:"translate(".concat(n,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(t){this.$emit("move",t),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(t){this.$emit("resize",t),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Jt=f("vue-circle-stencil"),Zt=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.stencil,style:t.style},[i("bounding-box",{class:t.classes.boundingBox,attrs:{width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions,handlers:t.handlers,"handlers-component":t.handlersComponent,"handlers-classes":t.handlersClasses,"handlers-wrappers-classes":t.handlersWrappersClasses,lines:t.lines,"lines-component":t.linesComponent,"lines-classes":t.linesClasses,"lines-wrappers-classes":t.linesWrappersClasses,resizable:t.resizable},on:{resize:t.onResize,"resize-end":t.onResizeEnd}},[i("draggable-area",{attrs:{movable:t.movable},on:{move:t.onMove,"move-end":t.onMoveEnd}},[i("stencil-preview",{class:t.classes.preview,attrs:{image:t.image,coordinates:t.coordinates,width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions}})],1)],1)],1)},staticRenderFns:[]},void 0,{components:{StencilPreview:qt,BoundingBox:Lt,DraggableArea:Bt},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlersComponent:{type:[Object,String],default:function(){return Pt}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Tt}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:h(Jt({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:h(Jt("preview"),this.previewClass),boundingBox:h(Jt("bounding-box"),this.boundingBoxClass)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,n=t.left,r=t.top,o={width:"".concat(i,"px"),height:"".concat(e,"px"),transform:"translate(".concat(n,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(t){this.$emit("move",t),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(t){this.$emit("resize",t),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:1,maximum:1}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),te=["transitions"],ee=f("vue-advanced-cropper"),ie={name:"Cropper",components:{BackgroundWrapper:Vt},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Qt}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Vt}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(t){return-1!==U.indexOf(t)}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object],default:function(t){var e=t.imageSize,i=t.visibleArea,n=t.coordinates,r=i||e;return{left:(i?i.left:0)+r.width/2-n.width/2,top:(i?i.top:0)+r.height/2-n.height/2}}},defaultVisibleArea:{type:[Function,Object],default:function(t){var e=t.getAreaRestrictions,i=t.coordinates,n=t.imageSize,r=J(t.boundaries);if(i){var o={height:Math.max(i.height,n.height),width:Math.max(i.width,n.width)},a=it({width:J(o)>r?o.width:o.height*r,height:J(o)>r?o.width/r:o.height},st(e())),s={left:i.left+i.width/2-a.width/2,top:i.top+i.height/2-a.height/2,width:a.width,height:a.height},c=X(i,$(g({left:0,top:0},n))),l={};return!c.left&&!c.right&&s.width<=n.width&&(l.left=0,l.right=n.width),!c.top&&!c.bottom&&s.height<=n.height&&(l.top=0,l.bottom=n.height),at(s,l)}var u=J(n);return a={height:u>r?n.height:n.width/r,width:u>r?n.height*r:n.width},{left:n.width/2-a.width/2,top:n.height/2-a.height/2,width:a.width,height:a.height}}},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(t){return!("string"==typeof t&&"fill"!==t&&"fit"!==t)}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(t){var e=t.event,i=t.coordinates,n=t.aspectRatio,r=t.positionRestrictions,o=t.sizeRestrictions,a=g(g({},i),{right:i.left+i.width,bottom:i.top+i.height}),s=e.params||{},c=g({},e.directions),l=s.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};o.widthFrozen&&(c.left=0,c.right=0),o.heightFrozen&&(c.top=0,c.bottom=0),z.forEach((function(t){l[t]||(c[t]=0)}));var u=Y(a,c=It({coordinates:a,directions:c,sizeRestrictions:o,positionRestrictions:r})).width,h=Y(a,c).height,f=s.preserveRatio?J(a):et(u/h,n);if(f){var d=s.respectDirection;if(d||(d=a.width>=a.height||1===f?"width":"height"),"width"===d){var p=u/f-a.height;if(l.top&&l.bottom){var m=c.top,v=c.bottom;c.bottom=_t(p,v,m),c.top=_t(p,m,v)}else l.bottom?c.bottom=p:l.top?c.top=p:l.right?c.right=0:l.left&&(c.left=0)}else if("height"===d){var b=a.width-h*f;if(l.left&&l.right){var y=c.left,w=c.right;c.left=-_t(b,y,w),c.right=-_t(b,w,y)}else l.left?c.left=-b:l.right?c.right=-b:l.top?c.top=0:l.bottom&&(c.bottom=0)}c=It({directions:c,coordinates:a,sizeRestrictions:o,positionRestrictions:r,preserveRatio:!0,compensate:s.compensate})}return u=Y(a,c).width,h=Y(a,c).height,(f=s.preserveRatio?J(a):et(u/h,n))&&Math.abs(f-u/h)>.001&&z.forEach((function(t){l[t]||(c[t]=0)})),pt({event:new P({left:-c.left,top:-c.top}),coordinates:{width:i.width+c.right+c.left,height:i.height+c.top+c.bottom,left:i.left,top:i.top},positionRestrictions:r})}},moveAlgorithm:{type:Function,default:pt},initStretcher:{type:Function,default:function(t){var e=t.stretcher,i=t.imageSize,n=J(i);e.style.width=i.width+"px",e.style.height=e.clientWidth/n+"px",e.style.width=e.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(t){var e=t.visibleArea,i=t.coordinates,n=t.aspectRatio,r=t.sizeRestrictions,o=t.positionRestrictions,a=g(g({},i),dt({width:i.width,height:i.height,aspectRatio:n,sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minHeight:Math.min(e.height,r.minHeight),minWidth:Math.min(e.width,r.minWidth)}}));return at(a=K(a,G(V(i),V(a))),ut($(e),o))}},fitVisibleArea:{type:Function,default:function(t){var e=t.visibleArea,i=t.boundaries,n=t.getAreaRestrictions,r=t.coordinates,o=g({},e);o.height=o.width/J(i),o.top+=(e.height-o.height)/2,(r.height-o.height>0||r.width-o.width>0)&&(o=Q(o,Math.max(r.height/o.height,r.width/o.width)));var a=q(tt(r,$(o=Q(o,ot(o,n({visibleArea:o,type:"resize"}))))));return o.width<r.width&&(a.left=0),o.height<r.height&&(a.top=0),at(o=K(o,a),n({visibleArea:o,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.visibleArea,i=t.boundaries,n=t.imageSize,r=t.imageRestriction,o=t.type,a={};return"fill-area"===r?a={left:0,top:0,right:n.width,bottom:n.height}:"fit-area"===r&&(J(i)>J(n)?(a={top:0,bottom:n.height},e&&"move"===o&&(e.width>n.width?(a.left=-(e.width-n.width)/2,a.right=n.width-a.left):(a.left=0,a.right=n.width))):(a={left:0,right:n.width},e&&"move"===o&&(e.height>n.height?(a.top=-(e.height-n.height)/2,a.bottom=n.height-a.top):(a.top=0,a.bottom=n.height)))),a}},sizeRestrictionsAlgorithm:{type:Function,default:function(t){return{minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.imageSize,i={};return"none"!==t.imageRestriction&&(i={left:0,top:0,right:e.width,bottom:e.height}),i}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:!1,src:null},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:r({},H)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var t=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(t))+Math.abs(this.imageAttributes.height*Math.sin(t)),height:Math.abs(this.imageAttributes.width*Math.sin(t))+Math.abs(this.imageAttributes.height*Math.cos(t))}},initialized:function(){return Boolean(this.visibleArea&&this.imageLoaded)},settings:function(){var t=x(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:x(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:t}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var t=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:w(this.minWidth)?0:C(this.minWidth),minHeight:w(this.minHeight)?0:C(this.minHeight),maxWidth:w(this.maxWidth)?1/0:C(this.maxWidth),maxHeight:w(this.maxHeight)?1/0:C(this.maxHeight)});if(t=function(t){var e=t.areaRestrictions,i=t.sizeRestrictions,n=t.boundaries,r=t.positionRestrictions,o=g(g({},i),{minWidth:void 0!==i.minWidth?i.minWidth:0,minHeight:void 0!==i.minHeight?i.minHeight:0,maxWidth:void 0!==i.maxWidth?i.maxWidth:1/0,maxHeight:void 0!==i.maxHeight?i.maxHeight:1/0});void 0!==r.left&&void 0!==r.right&&(o.maxWidth=Math.min(o.maxWidth,r.right-r.left)),void 0!==r.bottom&&void 0!==r.top&&(o.maxHeight=Math.min(o.maxHeight,r.bottom-r.top));var a=st(e),s=it(n,a);return a.width<1/0&&(!o.maxWidth||o.maxWidth>s.width)&&(o.maxWidth=Math.min(o.maxWidth,s.width)),a.height<1/0&&(!o.maxHeight||o.maxHeight>s.height)&&(o.maxHeight=Math.min(o.maxHeight,s.height)),o.minWidth>o.maxWidth&&(o.minWidth=o.maxWidth,o.widthFrozen=!0),o.minHeight>o.maxHeight&&(o.minHeight=o.maxHeight,o.heightFrozen=!0),o}({sizeRestrictions:t,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var e=this.getStencilSize(),i=st(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));t.maxWidth=Math.min(t.maxWidth,i.width*e.width/this.boundaries.width),t.maxHeight=Math.min(t.maxHeight,i.height*e.height/this.boundaries.height),t.maxWidth<t.minWidth&&(t.minWidth=t.maxWidth),t.maxHeight<t.minHeight&&(t.minHeight=t.maxHeight)}return t}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:ee(),image:h(ee("image"),this.imageClass),stencil:ee("stencil"),boundaries:h(ee("boundaries"),this.boundariesClass),stretcher:h(ee("stretcher")),background:h(ee("background"),this.backgroundClass),foreground:h(ee("foreground"),this.foregroundClass),imageWrapper:h(ee("image-wrapper")),cropperWrapper:h(ee("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var t=this.coordinates,e=t.width,i=t.height,n=t.left,r=t.top;return{width:e/this.coefficient,height:i/this.coefficient,left:(n-this.visibleArea.left)/this.coefficient,top:(r-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var t={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(t.opacity="0"),t},imageStyle:function(){var t=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},e=(t.width-this.imageSize.width)/(2*this.coefficient),i=(t.height-this.imageSize.height)/(2*this.coefficient),n=(1-1/this.coefficient)*t.width/2,o=(1-1/this.coefficient)*t.height/2,a=r(r({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/t.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/t.height)}),s={width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-e-n-this.imageTransforms.translateX,"px, ").concat(-i-o-this.imageTransforms.translateY,"px)")+Ht(a)};return this.transitionsOptions.enabled&&(s.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),s}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var t=this;this.$nextTick((function(){t.resetCoordinates(),t.runAutoZoom("setCoordinates"),t.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(t,e){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(i){return t[i]!==e[i]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=p(this.update,this.debounce),this.debouncedDisableTransitions=p(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src)},methods:{getResult:function(){var t=this.initialized?this.prepareResult(r({},this.coordinates)):this.defaultCoordinates(),e={rotate:this.imageTransforms.rotate%360,flip:r({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var i=this;return{image:this.image,coordinates:t,visibleArea:this.visibleArea?r({},this.visibleArea):null,imageTransforms:e,get canvas(){return i.canvas?i.getCanvas():void 0}}}return{image:this.image,coordinates:t,visibleArea:this.visibleArea?r({},this.visibleArea):null,canvas:void 0,imageTransforms:e}},zoom:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.transitions,r=void 0===n||n;this.onManipulateImage(new E({},{factor:1/t,center:e}),{normalize:!1,transitions:r})},move:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.transitions,r=void 0===n||n;this.onManipulateImage(new E({left:t||0,top:e||0}),{normalize:!1,transitions:r})},setCoordinates:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.autoZoom,r=void 0===n||n,o=i.transitions,a=void 0===o||o;this.$nextTick((function(){e.imageLoaded?(e.transitionsActive||(a&&e.enableTransitions(),e.coordinates=e.applyTransform(t),r&&e.runAutoZoom("setCoordinates"),a&&e.debouncedDisableTransitions()),e.onChange()):e.delayedTransforms=t}))},refresh:function(){var t=this,e=this.$refs.image;if(this.src&&e)return this.initialized?this.updateVisibleArea().then((function(){t.onChange()})):this.resetVisibleArea().then((function(){t.onChange()}))},reset:function(){var t=this;return this.resetVisibleArea().then((function(){t.onChange()}))},awaitRender:function(t){var e=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){t(),e.awaiting=!1})))},prepareResult:function(t){return this.roundResult?function(t){var e=t.coordinates,i=t.sizeRestrictions,n=t.positionRestrictions,r={width:Math.round(e.width),height:Math.round(e.height),left:Math.round(e.left),top:Math.round(e.top)};return r.width>i.maxWidth?r.width=Math.floor(e.width):r.width<i.minWidth&&(r.width=Math.ceil(e.width)),r.height>i.maxHeight?r.height=Math.floor(e.height):r.height<i.minHeight&&(r.height=Math.ceil(e.height)),at(r,n)}(r(r({},this.getPublicProperties()),{},{positionRestrictions:St(this.positionRestrictions,this.visibleArea),coordinates:t})):t},processAutoZoom:function(t,e,i,n){var o=this.autoZoomAlgorithm;o||(o=this.stencilSize?mt:this.autoZoom?vt:bt);var a=o({event:{type:t,params:n},visibleArea:e,coordinates:i,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return r(r({},a),{},{changed:!W(a.visibleArea,e)||!W(a.coordinates,i)})},runAutoZoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transitions,n=void 0!==i&&i,r=a(e,te),o=this.processAutoZoom(t,this.visibleArea,this.coordinates,r),s=o.visibleArea,c=o.coordinates,l=o.changed;n&&l&&this.enableTransitions(),this.visibleArea=s,this.coordinates=c,n&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(t){return function(t){var e=t.event,i=t.visibleArea,n=t.coefficient;if("manipulateImage"===e.type)return g(g({},e),{move:{left:e.move&&e.move.left?n*e.move.left:0,top:e.move&&e.move.top?n*e.move.top:0},scale:{factor:e.scale&&e.scale.factor?e.scale.factor:1,center:e.scale&&e.scale.center?{left:e.scale.center.left*n+i.left,top:e.scale.center.top*n+i.top}:null}});if("resize"===e.type){var r=g(g({},e),{directions:g({},e.directions)});return z.forEach((function(t){r.directions[t]*=n})),r}if("move"===e.type){var o=g(g({},e),{directions:g({},e.directions)});return B.forEach((function(t){o.directions[t]*=n})),o}return e}(r(r({},this.getPublicProperties()),{},{event:t}))},getCanvas:function(){if(this.$refs.canvas){var t=this.$refs.canvas,e=this.$refs.image,i=0!==this.imageTransforms.rotate||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(t,e,i){var n=i.rotate,r=i.flip,o={width:e.naturalWidth,height:e.naturalHeight},a=nt(o,n),s=t.getContext("2d");t.height=a.height,t.width=a.width,s.save();var c=rt(V(g({left:0,top:0},o)),n);return s.translate(-(c.left-a.width/2),-(c.top-a.height/2)),s.rotate(n*Math.PI/180),s.translate(r.horizontal?o.width:0,r.vertical?o.height:0),s.scale(r.horizontal?-1:1,r.vertical?-1:1),s.drawImage(e,0,0,o.width,o.height),s.restore(),t}(this.$refs.sourceCanvas,e,this.imageTransforms):e,n=r({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),o=function(t){return t.find((function(t){return e=t,!Number.isNaN(parseFloat(e))&&isFinite(e);var e}))},a=dt({sizeRestrictions:{minWidth:o([n.width,n.minWidth])||0,minHeight:o([n.height,n.minHeight])||0,maxWidth:o([n.width,n.maxWidth])||1/0,maxHeight:o([n.height,n.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(n.maxArea&&a.width*a.height>n.maxArea){var s=Math.sqrt(n.maxArea/(a.width*a.height));a={width:Math.round(s*a.width),height:Math.round(s*a.height)}}return function(t,e,i,n,r){t.width=n?n.width:i.width,t.height=n?n.height:i.height;var o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),r&&(r.imageSmoothingEnabled&&(o.imageSmoothingEnabled=r.imageSmoothingEnabled),r.imageSmoothingQuality&&(o.imageSmoothingQuality=r.imageSmoothingQuality),r.fillColor&&(o.fillStyle=r.fillColor,o.fillRect(0,0,t.width,t.height),o.save())),o.drawImage(e,i.left,i.top,i.width,i.height,0,0,t.width,t.height)}(t,i,this.coordinates,a,n),t}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.visibleArea&&e?ct(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,n=this.visibleArea&&e?St(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return gt({transform:t,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:n,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var t=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var e=this.defaultSize;e||(e=this.stencilSize?wt:yt);var i=this.sizeRestrictions;i.minWidth,i.minHeight,i.maxWidth,i.maxHeight;var n=[y(e)?e({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):e,function(e){var i=e.coordinates;return r({},y(t.defaultPosition)?t.defaultPosition({coordinates:i,imageSize:t.imageSize,visibleArea:t.visibleArea}):t.defaultPosition)}];this.delayedTransforms&&n.push.apply(n,s(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(n,!0),this.delayedTransforms=null}},clearImage:function(){var t=this;this.imageLoaded=!1,setTimeout((function(){var e=t.$refs.stretcher;e&&(e.style.height="auto",e.style.width="auto"),t.coordinates=t.defaultCoordinates(),t.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var t=this,e=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:e,imageSize:this.imageSize}),this.$nextTick().then((function(){var e={cropper:i,imageSize:t.imageSize};if(y(t.defaultBoundaries)?t.boundaries=t.defaultBoundaries(e):"fit"===t.defaultBoundaries?t.boundaries=function(t){var e=t.cropper,i=t.imageSize,n=e.clientHeight,r=e.clientWidth,o=n,a=i.width*n/i.height;return a>r&&(a=r,o=i.height*r/i.width),{width:a,height:o}}(e):t.boundaries=function(t){var e=t.cropper;return{width:e.clientWidth,height:e.clientHeight}}(e),!t.boundaries.width||!t.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var t=this;return this.updateBoundaries().then((function(){var e,i,n,r,o;"visible-area"!==t.priority&&(t.visibleArea=null,t.resetCoordinates()),t.visibleArea=y(t.defaultVisibleArea)?t.defaultVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries,coordinates:"visible-area"!==t.priority?t.coordinates:null,getAreaRestrictions:t.getAreaRestrictions,stencilSize:t.getStencilSize()}):t.defaultVisibleArea,t.visibleArea=(i=(e={visibleArea:t.visibleArea,boundaries:t.boundaries,getAreaRestrictions:t.getAreaRestrictions}).boundaries,n=e.getAreaRestrictions,r=g({},e.visibleArea),o=J(i),r.width/r.height!==o&&(r.height=r.width/o),at(r,n({visibleArea:r,type:"move"}))),"visible-area"===t.priority?t.resetCoordinates():t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("resetVisibleArea")})).catch((function(){t.visibleArea=null}))},updateVisibleArea:function(){var t=this;return this.updateBoundaries().then((function(){t.visibleArea=t.fitVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries,visibleArea:t.visibleArea,coordinates:t.coordinates,getAreaRestrictions:t.getAreaRestrictions}),t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("updateVisibleArea")})).catch((function(){t.visibleArea=null}))},onChange:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$listeners&&this.$listeners.change&&(t&&this.debounce?this.debouncedUpdate():this.update())},onChangeImage:function(){var t,e=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(t){if(b(t))return!1;var e=window.location,i=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],n={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},r=function(t){return t.port||("http"===(t.protocol||e.protocol)?80:433)};return!(!n.protocol&&!n.host&&!n.port||Boolean(n.protocol&&n.protocol==e.protocol&&n.host&&n.host==e.host&&n.host&&r(n)==r(e)))}(this.src)){var i=w(this.crossOrigin)?this.canvas:this.crossOrigin;!0===i&&(i="anonymous"),this.imageAttributes.crossOrigin=i}if(this.checkOrientation){var n=(t=this.src,new Promise((function(e){(function(t){return new Promise((function(e,i){try{if(t)if(/^data:/i.test(t))e(function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),i=e.length,n=new ArrayBuffer(i),r=new Uint8Array(n),o=0;o<i;o++)r[o]=e.charCodeAt(o);return n}(t));else if(/^blob:/i.test(t)){var n=new FileReader;n.onload=function(t){e(t.target.result)},o=t,a=function(t){n.readAsArrayBuffer(t)},(s=new XMLHttpRequest).open("GET",o,!0),s.responseType="blob",s.onload=function(){200!=this.status&&0!==this.status||a(this.response)},s.send()}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status||0===r.status?e(r.response):i("Warning: could not load an image to parse its orientation"),r=null)},r.onprogress=function(){"image/jpeg"!==r.getResponseHeader("content-type")&&r.abort()},r.withCredentials=!1,r.open("GET",t,!0),r.responseType="arraybuffer",r.send(null)}else i("Error: the image is empty")}catch(t){i(t)}var o,a,s}))})(t).then((function(i){var n=function(t){try{var e,i=new DataView(t),n=void 0,r=void 0,o=void 0,a=void 0;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var s=i.byteLength,c=2;c+1<s;){if(255===i.getUint8(c)&&225===i.getUint8(c+1)){o=c;break}c++}if(o&&(n=o+10,"Exif"===function(t,e,i){var n,r="";for(n=e,i+=e;n<i;n++)r+=String.fromCharCode(t.getUint8(n));return r}(i,o+4,4))){var l=i.getUint16(n);if(((r=18761===l)||19789===l)&&42===i.getUint16(n+2,r)){var u=i.getUint32(n+4,r);u>=8&&(a=n+u)}}if(a)for(var h=i.getUint16(a,r),f=0;f<h;f++)if(c=a+12*f+2,274===i.getUint16(c,r)){c+=8,e=i.getUint16(c,r),i.setUint16(c,1,r);break}return e}catch(t){return null}}(i);e(i?{source:t,arrayBuffer:i,orientation:n}:{source:t,arrayBuffer:null,orientation:null})})).catch((function(i){console.warn(i),e({source:t,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){n.then(e.onParseImage)}),this.transitionTime)}else setTimeout((function(){e.onParseImage({source:e.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var t=this,e=this.$refs.image;e&&!this.imageLoaded&&(this.imageAttributes.height=e.naturalHeight,this.imageAttributes.width=e.naturalWidth,this.imageLoaded=!0,this.reset().then((function(){t.$emit("ready"),t.onChange(!1)})))},onParseImage:function(t){var e=this,i=t.source,n=t.arrayBuffer,r=t.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,n&&r&&r>1&&b(i)?v(i)?(this.imageAttributes.src=URL.createObjectURL(new Blob([n])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(t){for(var e=[],i=new Uint8Array(t);i.length>0;){var n=i.subarray(0,8192);e.push(String.fromCharCode.apply(null,Array.from?Array.from(n):n.slice())),i=i.subarray(8192)}return"data:image/jpeg;base64,"+btoa(e.join(""))}(n):this.imageAttributes.src=i,y(this.defaultTransforms)?this.appliedImageTransforms=Ut(this.defaultTransforms()):S(this.defaultTransforms)?this.appliedImageTransforms=Ut(this.defaultTransforms):this.appliedImageTransforms=function(t){var e=Ut({});if(t)switch(t){case 2:e.flip.horizontal=!0;break;case 3:e.rotate=-180;break;case 4:e.flip.vertical=!0;break;case 5:e.rotate=90,e.flip.vertical=!0;break;case 6:e.rotate=90;break;case 7:e.rotate=90,e.flip.horizontal=!0;break;case 8:e.rotate=-90}return e}(r),this.$nextTick((function(){var t=e.$refs.image;t&&t.complete&&(function(t){return Boolean(t.naturalWidth)}(t)?e.onSuccessLoadImage():e.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(t){var e=this;this.transitionsOptions.enabled||this.awaitRender((function(){e.coordinates=e.moveAlgorithm(r(r({},e.getPublicProperties()),{},{positionRestrictions:St(e.positionRestrictions,e.visibleArea),coordinates:e.coordinates,event:e.normalizeEvent(t)})),e.onChange()}))},onResize:function(t){var e=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var i=e.sizeRestrictions,n=Math.min(e.coordinates.width,e.coordinates.height,20*e.coefficient);e.coordinates=e.resizeAlgorithm(r(r({},e.getPublicProperties()),{},{positionRestrictions:St(e.positionRestrictions,e.visibleArea),sizeRestrictions:{maxWidth:Math.min(i.maxWidth,e.visibleArea.width),maxHeight:Math.min(i.maxHeight,e.visibleArea.height),minWidth:Math.max(i.minWidth,n),minHeight:Math.max(i.minHeight,n)},event:e.normalizeEvent(t)})),e.onChange(),e.ticking=!1}))},onManipulateImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transitionsOptions.enabled){var i=e.transitions,n=void 0!==i&&i,o=e.normalize,a=void 0===o||o;n&&this.enableTransitions();var s=xt(r(r({},this.getPublicProperties()),{},{event:a?this.normalizeEvent(t):t,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),c=s.visibleArea,l=s.coordinates;this.visibleArea=c,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),n&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visibleArea,i=t.type,n=void 0===i?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:e,type:n})},getAspectRatio:function(t){var e,i,n=this.stencilProps,r=n.aspectRatio,o=n.minAspectRatio,a=n.maxAspectRatio;if(this.$refs.stencil.aspectRatios){var s=this.$refs.stencil.aspectRatios();e=s.minimum,i=s.maximum}if(w(e)&&(e=w(r)?o:r),w(i)&&(i=w(r)?a:r),!t&&(w(e)||w(i))){var c=this.getStencilSize(),l=c?J(c):null;w(e)&&(e=A(l)?l:void 0),w(i)&&(i=A(l)?l:void 0)}return{minimum:e,maximum:i}},getStencilSize:function(){if(this.stencilSize)return e=(t={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)}).boundaries,n=t.aspectRatio,et(J(r=y(i=t.stencilSize)?i({boundaries:e,aspectRatio:n}):i),n)&&(r=dt({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:n.minimum,maximum:n.maximum}})),(r.width>e.width||r.height>e.height)&&(r=dt({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:J(r),maximum:J(r)}})),r;var t,e,i,n,r},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return r({},H)},flip:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.transitions,o=void 0===n||n;if(!this.transitionsActive){o&&this.enableTransitions();var a=r({},this.imageTransforms.flip),s=At({flip:{horizontal:t?!a.horizontal:a.horizontal,vertical:e?!a.vertical:a.vertical},previousFlip:a,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),c=s.visibleArea,l=s.coordinates;t&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),e&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=c,this.coordinates=l,this.onChange(),o&&this.debouncedDisableTransitions()}},rotate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transitions,n=void 0===i||i;if(!this.transitionsActive){n&&this.enableTransitions();var o=r({},this.imageSize);this.appliedImageTransforms.rotate+=t;var a=Ct({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:o,imageSize:this.imageSize,angle:t,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),s=a.visibleArea,c=a.coordinates,l=this.processAutoZoom("rotateImage",s,c);s=l.visibleArea,c=l.coordinates,this.visibleArea=s,this.coordinates=c,this.onChange(),n&&this.debouncedDisableTransitions()}}}},ne=R({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cropper",class:t.classes.cropper},[i("div",{ref:"stretcher",class:t.classes.stretcher}),t._v(" "),i("div",{class:t.classes.boundaries,style:t.boundariesStyle},[i(t.backgroundWrapperComponent,{tag:"component",class:t.classes.cropperWrapper,attrs:{"wheel-resize":t.settings.resizeImage.wheel,"touch-resize":t.settings.resizeImage.touch,"touch-move":t.settings.moveImage.touch,"mouse-move":t.settings.moveImage.mouse},on:{move:t.onManipulateImage,resize:t.onManipulateImage}},[i("div",{class:t.classes.background,style:t.boundariesStyle}),t._v(" "),i("div",{class:t.classes.imageWrapper},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{crossorigin:t.imageAttributes.crossOrigin,src:t.imageAttributes.src},on:{mousedown:function(t){t.preventDefault()}}})]),t._v(" "),i("div",{class:t.classes.foreground,style:t.boundariesStyle}),t._v(" "),i(t.stencilComponent,t._b({directives:[{name:"show",rawName:"v-show",value:t.imageLoaded,expression:"imageLoaded"}],ref:"stencil",tag:"component",attrs:{image:t.image,coordinates:t.coordinates,"stencil-coordinates":t.stencilCoordinates,transitions:t.transitionsOptions},on:{resize:t.onResize,"resize-end":t.onResizeEnd,move:t.onMove,"move-end":t.onMoveEnd}},"component",t.stencilProps,!1)),t._v(" "),t.canvas?i("canvas",{ref:"canvas",style:{display:"none"}}):t._e(),t._v(" "),t.canvas?i("canvas",{ref:"sourceCanvas",style:{display:"none"}}):t._e()],1)],1)])},staticRenderFns:[]},void 0,ie,void 0,!1,void 0,!1,void 0,void 0,void 0);function re(t){return function(t){return function(t){return new Promise((function(e,i){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(){var t=n.result||"";if(r)return e(t);e(function(t){for(var e="",i=new Uint8Array(t),n=i.byteLength,r=-1;++r<n;)e+=String.fromCharCode(i[r]);return e}(t))},n.onerror=i,r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}))}(t).then(btoa)}(t).then((function(e){return"data:"+t.type+";base64,"+e}))}function oe(t,e,i){return"function"==typeof t.toBlob?new Promise((function(n){t.toBlob(n,e,i)})):Promise.resolve(function(t){var e=t.match(/data:([^;]+)/)[1],i=t.replace(/^[^,]+,/,"");return function(t,e){t=t||[],"string"==typeof(e=e||{})&&(e={type:e});try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)i.append(t[n]);return i.getBlob(e.type)}}([ae(atob(i))],{type:e})}(t.toDataURL(e,i)))}function ae(t){for(var e=t.length,i=new ArrayBuffer(e),n=new Uint8Array(i),r=-1;++r<e;)n[r]=t.charCodeAt(r);return i}e().component("cropper",ne),e().component("rectangle-stencil",Qt),e().component("circle-stencil",Zt),e().component("simple-handler",Pt),e().component("simple-line",Tt);var se=i(9008),ce=i.n(se),le=("undefined"!=typeof window?window:void 0!==i.g?i.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function ue(t,e){if(void 0===e&&(e=[]),null===t||"object"!=typeof t)return t;var i=e.filter((function(e){return e.original===t}))[0];if(i)return i.copy;var n=Array.isArray(t)?[]:{};return e.push({original:t,copy:n}),Object.keys(t).forEach((function(i){n[i]=ue(t[i],e)})),n}function he(t,e){Object.keys(t).forEach((function(i){return e(t[i],i)}))}function fe(t){return null!==t&&"object"==typeof t}var de=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=("function"==typeof i?i():i)||{}},pe={namespaced:{configurable:!0}};pe.namespaced.get=function(){return!!this._rawModule.namespaced},de.prototype.addChild=function(t,e){this._children[t]=e},de.prototype.removeChild=function(t){delete this._children[t]},de.prototype.getChild=function(t){return this._children[t]},de.prototype.hasChild=function(t){return t in this._children},de.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},de.prototype.forEachChild=function(t){he(this._children,t)},de.prototype.forEachGetter=function(t){this._rawModule.getters&&he(this._rawModule.getters,t)},de.prototype.forEachAction=function(t){this._rawModule.actions&&he(this._rawModule.actions,t)},de.prototype.forEachMutation=function(t){this._rawModule.mutations&&he(this._rawModule.mutations,t)},Object.defineProperties(de.prototype,pe);var ge,me=function(t){this.register([],t,!1)};function ve(t,e,i){if(e.update(i),i.modules)for(var n in i.modules){if(!e.getChild(n))return;ve(t.concat(n),e.getChild(n),i.modules[n])}}me.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},me.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,i){return t+((e=e.getChild(i)).namespaced?i+"/":"")}),"")},me.prototype.update=function(t){ve([],this.root,t)},me.prototype.register=function(t,e,i){var n=this;void 0===i&&(i=!0);var r=new de(e,i);0===t.length?this.root=r:this.get(t.slice(0,-1)).addChild(t[t.length-1],r),e.modules&&he(e.modules,(function(e,r){n.register(t.concat(r),e,i)}))},me.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1],n=e.getChild(i);n&&n.runtime&&e.removeChild(i)},me.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1];return!!e&&e.hasChild(i)};var be=function(t){var e=this;void 0===t&&(t={}),!ge&&"undefined"!=typeof window&&window.Vue&&_e(window.Vue);var i=t.plugins;void 0===i&&(i=[]);var n=t.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new me(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new ge,this._makeLocalGettersCache=Object.create(null);var r=this,o=this.dispatch,a=this.commit;this.dispatch=function(t,e){return o.call(r,t,e)},this.commit=function(t,e,i){return a.call(r,t,e,i)},this.strict=n;var s=this._modules.root.state;Ce(this,s,[],this._modules.root),xe(this,s),i.forEach((function(t){return t(e)})),(void 0!==t.devtools?t.devtools:ge.config.devtools)&&function(t){le&&(t._devtoolHook=le,le.emit("vuex:init",t),le.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){le.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){le.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},ye={state:{configurable:!0}};function we(t,e,i){return e.indexOf(t)<0&&(i&&i.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function Se(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var i=t.state;Ce(t,i,[],t._modules.root,!0),xe(t,i,e)}function xe(t,e,i){var n=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,o={};he(r,(function(e,i){o[i]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,i,{get:function(){return t._vm[i]},enumerable:!0})}));var a=ge.config.silent;ge.config.silent=!0,t._vm=new ge({data:{$$state:e},computed:o}),ge.config.silent=a,t.strict&&function(t){t._vm.$watch((function(){return this._data.$$state}),(function(){}),{deep:!0,sync:!0})}(t),n&&(i&&t._withCommit((function(){n._data.$$state=null})),ge.nextTick((function(){return n.$destroy()})))}function Ce(t,e,i,n,r){var o=!i.length,a=t._modules.getNamespace(i);if(n.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=n),!o&&!r){var s=Ae(e,i.slice(0,-1)),c=i[i.length-1];t._withCommit((function(){ge.set(s,c,n.state)}))}var l=n.context=function(t,e,i){var n=""===e,r={dispatch:n?t.dispatch:function(i,n,r){var o=Ie(i,n,r),a=o.payload,s=o.options,c=o.type;return s&&s.root||(c=e+c),t.dispatch(c,a)},commit:n?t.commit:function(i,n,r){var o=Ie(i,n,r),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=e+c),t.commit(c,a,s)}};return Object.defineProperties(r,{getters:{get:n?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var i={},n=e.length;Object.keys(t.getters).forEach((function(r){if(r.slice(0,n)===e){var o=r.slice(n);Object.defineProperty(i,o,{get:function(){return t.getters[r]},enumerable:!0})}})),t._makeLocalGettersCache[e]=i}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return Ae(t.state,i)}}}),r}(t,a,i);n.forEachMutation((function(e,i){!function(t,e,i,n){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){i.call(t,n.state,e)}))}(t,a+i,e,l)})),n.forEachAction((function(e,i){var n=e.root?i:a+i,r=e.handler||e;!function(t,e,i,n){(t._actions[e]||(t._actions[e]=[])).push((function(e){var r,o=i.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},e);return(r=o)&&"function"==typeof r.then||(o=Promise.resolve(o)),t._devtoolHook?o.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):o}))}(t,n,r,l)})),n.forEachGetter((function(e,i){!function(t,e,i,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return i(n.state,n.getters,t.state,t.getters)})}(t,a+i,e,l)})),n.forEachChild((function(n,o){Ce(t,e,i.concat(o),n,r)}))}function Ae(t,e){return e.reduce((function(t,e){return t[e]}),t)}function Ie(t,e,i){return fe(t)&&t.type&&(i=e,e=t,t=t.type),{type:t,payload:e,options:i}}function _e(t){ge&&t===ge||function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:i});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[i].concat(t.init):i,e.call(this,t)}}function i(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(ge=t)}ye.state.get=function(){return this._vm._data.$$state},ye.state.set=function(t){},be.prototype.commit=function(t,e,i){var n=this,r=Ie(t,e,i),o=r.type,a=r.payload,s=(r.options,{type:o,payload:a}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(s,n.state)})))},be.prototype.dispatch=function(t,e){var i=this,n=Ie(t,e),r=n.type,o=n.payload,a={type:r,payload:o},s=this._actions[r];if(s){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,i.state)}))}catch(t){}var c=s.length>1?Promise.all(s.map((function(t){return t(o)}))):s[0](o);return new Promise((function(t,e){c.then((function(e){try{i._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,i.state)}))}catch(t){}t(e)}),(function(t){try{i._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(a,i.state,t)}))}catch(t){}e(t)}))}))}},be.prototype.subscribe=function(t,e){return we(t,this._subscribers,e)},be.prototype.subscribeAction=function(t,e){return we("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},be.prototype.watch=function(t,e,i){var n=this;return this._watcherVM.$watch((function(){return t(n.state,n.getters)}),e,i)},be.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},be.prototype.registerModule=function(t,e,i){void 0===i&&(i={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),Ce(this,this.state,t,this._modules.get(t),i.preserveState),xe(this,this.state)},be.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var i=Ae(e.state,t.slice(0,-1));ge.delete(i,t[t.length-1])})),Se(this)},be.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},be.prototype.hotUpdate=function(t){this._modules.update(t),Se(this,!0)},be.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(be.prototype,ye);var Ee=Te((function(t,e){var i={};return Re(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){var e=this.$store.state,i=this.$store.getters;if(t){var n=Me(this.$store,0,t);if(!n)return;e=n.context.state,i=n.context.getters}return"function"==typeof r?r.call(this,e,i):e[r]},i[n].vuex=!0})),i})),Oe=Te((function(t,e){var i={};return Re(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this.$store.commit;if(t){var o=Me(this.$store,0,t);if(!o)return;n=o.context.commit}return"function"==typeof r?r.apply(this,[n].concat(e)):n.apply(this.$store,[r].concat(e))}})),i})),Pe=Te((function(t,e){var i={};return Re(e).forEach((function(e){var n=e.key,r=e.val;r=t+r,i[n]=function(){if(!t||Me(this.$store,0,t))return this.$store.getters[r]},i[n].vuex=!0})),i})),De=Te((function(t,e){var i={};return Re(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this.$store.dispatch;if(t){var o=Me(this.$store,0,t);if(!o)return;n=o.context.dispatch}return"function"==typeof r?r.apply(this,[n].concat(e)):n.apply(this.$store,[r].concat(e))}})),i}));function Re(t){return function(t){return Array.isArray(t)||fe(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function Te(t){return function(e,i){return"string"!=typeof e?(i=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,i)}}function Me(t,e,i){return t._modulesNamespaceMap[i]}function ke(t,e,i){var n=i?t.groupCollapsed:t.group;try{n.call(t,e)}catch(i){t.log(e)}}function Fe(t){try{t.groupEnd()}catch(e){t.log("—— log end ——")}}function Le(){var t=new Date;return" @ "+ze(t.getHours(),2)+":"+ze(t.getMinutes(),2)+":"+ze(t.getSeconds(),2)+"."+ze(t.getMilliseconds(),3)}function ze(t,e){return"0",i=e-t.toString().length,new Array(i+1).join("0")+t;var i}const je={Store:be,install:_e,version:"3.6.2",mapState:Ee,mapMutations:Oe,mapGetters:Pe,mapActions:De,createNamespacedHelpers:function(t){return{mapState:Ee.bind(null,t),mapGetters:Pe.bind(null,t),mapMutations:Oe.bind(null,t),mapActions:De.bind(null,t)}},createLogger:function(t){void 0===t&&(t={});var e=t.collapsed;void 0===e&&(e=!0);var i=t.filter;void 0===i&&(i=function(t,e,i){return!0});var n=t.transformer;void 0===n&&(n=function(t){return t});var r=t.mutationTransformer;void 0===r&&(r=function(t){return t});var o=t.actionFilter;void 0===o&&(o=function(t,e){return!0});var a=t.actionTransformer;void 0===a&&(a=function(t){return t});var s=t.logMutations;void 0===s&&(s=!0);var c=t.logActions;void 0===c&&(c=!0);var l=t.logger;return void 0===l&&(l=console),function(t){var u=ue(t.state);void 0!==l&&(s&&t.subscribe((function(t,o){var a=ue(o);if(i(t,u,a)){var s=Le(),c=r(t),h="mutation "+t.type+s;ke(l,h,e),l.log("%c prev state","color: #9E9E9E; font-weight: bold",n(u)),l.log("%c mutation","color: #03A9F4; font-weight: bold",c),l.log("%c next state","color: #4CAF50; font-weight: bold",n(a)),Fe(l)}u=a})),c&&t.subscribeAction((function(t,i){if(o(t,i)){var n=Le(),r=a(t),s="action "+t.type+n;ke(l,s,e),l.log("%c action","color: #03A9F4; font-weight: bold",r),Fe(l)}})))}}};function Ne(t,e,i){var n,r=window.jQuery,o=r("#gform_uploaded_files_"+t).val();if(o){var a=r.secureEvalJSON(o);if(a){var s="input_"+e,c=r("#gform_multifile_upload_"+t+"_"+e);if(c.length>0&&(null==a?void 0:a[s])){for(var l=0,u=Object.entries(a[s]);l<u.length;l++){var h=u[l],f=h[0],d=h[1];((null===(n=null==d?void 0:d.temp_filename)||void 0===n?void 0:n.indexOf(i.id))>0||(null==d?void 0:d.uploaded_filename)===i.id)&&delete a[s][f]}a[s]=a[s].filter(Boolean);var p=c.data("settings"),g=p.gf_vars.max_files;r("#"+p.gf_vars.message_id).html(""),a[s].length<g&&window.gfMultiFileUploader.toggleDisabled(p,!1)}else a[s]=[];r("#gform_uploaded_files_"+t).val(r.toJSON(a))}}}var Be=window.jQuery;function Ue(t){var e,i,n=t.up,r=t.$store,o=t.formId,a=t.fieldId,s=t.existingFile,c=t.newFile;n.replacingFile=!0,n.addFile(c),Be('[data-file-id="'.concat(null==s?void 0:s.id,'"]')).length&&Ne(o,a,s),(c=n.files[n.files.length-1]).cropped=null==s?void 0:s.cropped,c.addedDate=new Date(null!==(i=null===(e=null==s?void 0:s.addedDate)||void 0===e?void 0:e.getTime())&&void 0!==i?i:Date.now()),r.commit("REPLACE_FILE",{replacedFile:s,newFile:c}),n.removeFile(null==s?void 0:s.id),r.dispatch("transferCoords",{currentFileId:null==s?void 0:s.id,newFileId:c.id}),r.dispatch("transferOriginal",{currentFileId:null==s?void 0:s.id,newFileId:c.id});var l=Be("#".concat(null==s?void 0:s.id)).index();return Be("#field_"+o+"_"+a).find(".ginput_preview").eq(l).remove(),c}function He(t,e){e.status=plupload.UPLOADING,t.trigger("UploadFile",e),t.stop(),t.start()}var We=function(){return We=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},We.apply(this,arguments)},$e=window.jQuery;e().use(i(8358));const Ge=e().extend({name:"GPFUPCropper",props:["open","file","strings","up","formId","fieldId","cropRequired","aspectRatio","minWidth","minHeight"],components:{Cropper:ne},computed:We(We(We({cropperOptions:function(){return window.gform.applyFilters("gpfup_cropper_options",{src:this.imgSrc,defaultBoundaries:"fit",imageRestriction:"fill-area",minWidth:this.minWidth,minHeight:this.minHeight,defaultSize:this.defaultSize(),defaultPosition:this.defaultPosition(),stencilProps:this.stencilProps},this.formId,this.fieldId)},stripMetadata:function(){return window.gform.applyFilters("gpfup_strip_image_metadata",!0,this.formId,this.fieldId)},imgSrc:function(){return this.$store.getters.imgSrc}},Ee({currentFile:function(t){return t.editor.currentFile}})),Pe(["currentImageIndex"])),{totalNumberOfFiles:function(){return this.$store.getters.currentAddedFiles.length},stencilProps:function(){var t={};return this.aspectRatio&&(t.aspectRatio=this.aspectRatio),t}}),methods:{defaultSize:function(){return this.$store.getters.imgSize},defaultPosition:function(){return this.$store.getters.imgPos},crop:function(){var t,e=this,i=this.$refs.cropper.getResult(),n=i.coordinates,r=i.canvas;if(r){var o="image/png";["image/jpg","image/jpeg"].includes(null===(t=this.currentFile)||void 0===t?void 0:t.type)&&(o="image/jpeg"),oe(r,o,window.gform.applyFilters("gpfup_jpeg_quality",.92,this.formId,this.fieldId,window["GPFUP_".concat(this.formId,"_").concat(this.fieldId)])).then((function(t){var i,r=new window.mOxie.File(null,t);r.name=null===(i=e.currentFile)||void 0===i?void 0:i.name,ce().parseMetaData(t,(function(i){return function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}(e,void 0,void 0,(function(){var e,o;return function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:return!i.imageHead||this.stripMetadata?[3,2]:[4,ce().replaceHead(t,i.imageHead)];case 1:(r=a.sent()).name=null===(o=this.currentFile)||void 0===o?void 0:o.name,a.label=2;case 2:return(e=Ue({up:this.up,$store:this.$store,formId:this.formId,fieldId:this.fieldId,existingFile:this.currentFile,newFile:r})).cropped=!0,this.cropRequired&&He(this.up,e),this.$store.dispatch("storeCroppedCoords",{fileId:e.id,coords:n}),this.$store.dispatch("storeImagePreview",{fileId:e.id,blob:t}),[2]}}))}))}))})),(!this.totalNumberOfFiles||this.currentImageIndex&&this.currentImageIndex>=this.totalNumberOfFiles)&&this.$store.dispatch("closeEditor")}},cancel:function(){if(!this.currentFile.cropped&&this.cropRequired){for(var t=0,e=this.$store.getters.currentAddedFiles;t<e.length;t++){var i=e[t];this.up.removeFile(i),$e('[data-file-id="'.concat(null==i?void 0:i.id,'"]')).length&&Ne(this.formId,this.fieldId,i)}for(var n=0,r=this.$store.getters.currentAddedErredFiles;n<r.length;n++){var o=r[n];this.$store.commit("REMOVE_ERRED_FILE",o)}this.up.stop(),this.up.start()}this.$store.dispatch("closeEditor")}}});function Ve(t,e,i,n,r,o,a,s){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=c):r&&(c=s?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:l}}const Xe=Ve(Ge,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"gpfup__cropper--transition"}},[t.open?i("div",{staticClass:"cropper__lightbox",staticStyle:{"z-index":"99999999"}},[t.imgSrc?i("cropper",t._b({ref:"cropper",staticClass:"cropper"},"cropper",t.cropperOptions,!1)):t._e(),t._v(" "),i("div",{staticClass:"gpfup__cropper__topbar"},[i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"gpfup__cancel",on:{click:function(e){return e.preventDefault(),t.cancel.apply(null,arguments)},shortkey:function(e){return e.preventDefault(),t.cancel()}}},[t._v("\n\t\t\t\t"+t._s(t.strings.cancel)+"\n\t\t\t")]),t._v(" "),t.currentImageIndex&&t.totalNumberOfFiles&&t.totalNumberOfFiles>1?i("span",{staticClass:"gpfup__cropper_count"},[t._v("\n\t\t\t\t"+t._s(t.strings.cropping)+" "+t._s(t.currentImageIndex)+" "+t._s(t.strings.croppingOf)+" "+t._s(t.totalNumberOfFiles)+"\n\t\t\t")]):t._e(),t._v(" "),i("button",{staticClass:"gpfup__crop",attrs:{disabled:!t.imgSrc},on:{click:function(e){return e.preventDefault(),t.crop.apply(null,arguments)}}},[t._v("\n\t\t\t\t"+t._s(t.strings.crop)+"\n\t\t\t")])])],1):t._e()])}),[],!1,null,null,null).exports;function Ye(t){return 0===t.type.indexOf("image/")&&["image/gif","image/png","image/jpeg","image/bmp","image/webp","image/svg+xml"].includes(t.type)}const qe=e().extend({name:"ImagePreview",props:["file","error","enableCrop","onlyImagesAllowed","cropRequired"],computed:{imgSrc:function(){return this.$store.state.imgPreviews[this.file.id]},croppingAvailable:function(){return!!this.enableCrop&&!/MSIE|Trident/.test(window.navigator.userAgent)},previewSize:function(){var t,e;if(this.onlyImagesAllowed)return{width:(null===(t=this.file)||void 0===t?void 0:t.previewWidth)+"px",height:(null===(e=this.file)||void 0===e?void 0:e.previewHeight)+"px"}},showPreview:function(){return!!this.imgSrc&&(!!this.file.rehydrated||!(this.cropRequired&&!this.file.cropped)&&this.file.processed)}},methods:{isImage:function(){return Ye(this.file)},editFile:function(t){this.$store.dispatch("setCurrentFile",{file:t}),this.$store.commit("OPEN_EDITOR")},storePreviewDimensions:function(t){var e=this.$refs.image,i=e.clientWidth,n=e.clientHeight;i&&n&&this.$store.state.storage.storePreviewDimensions(t.id,{width:i,height:n})}}}),Ke=Ve(qe,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{gpfup__preview:!0,"gpfup__preview--crop":t.croppingAvailable}},[t.error?i("div",{staticClass:"gpfup__upload-error-icon"},[i("svg",{staticStyle:{"enable-background":"new 0 0 100 100"},attrs:{width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100"}},[i("path",{attrs:{d:"M82.4,25.6l-20-20C62,5.2,61.5,5,61,5H23c-3.3,0-6,2.7-6,6v78c0,3.3,2.7,6,6,6h54c3.3,0,6-2.7,6-6V27,C83,26.5,82.8,26,82.4,25.6z M63,11.8L76.2,25H65c-1.1,0-2-0.9-2-2V11.8z M77,91H23c-1.1,0-2-0.9-2-2V11c0-1.1,0.9-2,2-2h36v14,c0,3.3,2.7,6,6,6h14v60C79,90.1,78.1,91,77,91z"}}),t._v(" "),i("path",{attrs:{d:"M62.3,49.6l-7.1,7.1l7.1,7.1c1.6,1.6,1.6,4,0,5.6c-0.8,0.8-1.8,1.2-2.8,1.2s-2-0.4-2.8-1.2l-7.1-7.1l-7.1,7.1,c-0.8,0.8-1.8,1.2-2.8,1.2s-2-0.4-2.8-1.2c-1.6-1.6-1.6-4,0-5.6l7.1-7.1l-7.1-7.1c-1.6-1.6-1.6-4,0-5.6c1.6-1.6,4-1.6,5.6,0l7.1,7.1,l7.1-7.1c1.6-1.6,4-1.6,5.6,0C63.9,45.6,63.9,48,62.3,49.6z"}})])]):t.showPreview&&!t.file.loading?i("img",{ref:"image",style:t.previewSize,attrs:{src:t.imgSrc},on:{load:function(e){return t.storePreviewDimensions(t.file)}}}):t.isImage()||t.file.loading?i("div",{staticClass:"gpfup__preview-pending",style:t.previewSize},[i("svg",{attrs:{width:"50%",height:"50%",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"}},[i("defs",[i("linearGradient",{attrs:{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"}},[i("stop",{attrs:{"stop-color":"#000","stop-opacity":"0",offset:"0%"}}),t._v(" "),i("stop",{attrs:{"stop-color":"#000","stop-opacity":".631",offset:"63.146%"}}),t._v(" "),i("stop",{attrs:{"stop-color":"#000",offset:"100%"}})],1)],1),t._v(" "),i("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[i("g",{attrs:{transform:"translate(1 1)"}},[i("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:"url(#a)","stroke-width":"2"}},[i("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}})],1),t._v(" "),i("circle",{attrs:{fill:"#fff",cx:"36",cy:"18",r:"1"}},[i("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}})],1)])])])]):i("div",{staticClass:"gpfup__file-icon"},[i("svg",{staticStyle:{"enable-background":"new 0 0 100 100"},attrs:{width:"48",height:"48",version:"1.1",viewBox:"0 0 100 100","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M82.4,25.6l-20-20C62,5.2,61.5,5,61,5H23c-3.3,0-6,2.7-6,6v78c0,3.3,2.7,6,6,6h54c3.3,0,6-2.7,6-6V27  C83,26.5,82.8,26,82.4,25.6z M63,11.8L76.2,25H65c-1.1,0-2-0.9-2-2V11.8z M77,91H23c-1.1,0-2-0.9-2-2V11c0-1.1,0.9-2,2-2h36v14  c0,3.3,2.7,6,6,6h14v60C79,90.1,78.1,91,77,91z"}})])]),t._v(" "),t.croppingAvailable&&t.isImage(t.file)?i("button",{staticClass:"gpfup__edit",on:{click:function(e){return e.preventDefault(),t.editFile(t.file)}}},[i("svg",{attrs:{width:"60%",height:"60%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",focusable:"false"}},[i("path",{attrs:{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}})])]):t._e()])}),[],!1,null,null,null).exports;var Qe=i(9830),Je=i.n(Qe);const Ze=Ve({name:"LoadingBar",props:["file"],data:function(){return{metMinimumDisplayTime:!1,metMinimumDisplayTimeTimeout:void 0}},watch:{percentage:function(t,e){var i=this;100===t&&(this.metMinimumDisplayTimeTimeout=setTimeout((function(){i.metMinimumDisplayTime=!0}),750))}},beforeDestroy:function(){this.metMinimumDisplayTimeTimeout&&clearTimeout(this.metMinimumDisplayTimeTimeout)},computed:{percentage:function(){return this.file.percent}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"gpfup__progress-container--fade"}},[100===t.percentage&&t.metMinimumDisplayTime?t._e():i("div",{staticClass:"gpfup__progress-container"},[i("div",{staticClass:"gpfup_progress",style:{width:t.percentage+"%"}})])])}),[],!1,null,null,null).exports,ti=Ve(e().extend({name:"DragHandle",props:["disabled"]}),(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"gpfup__drag-handle",class:{"gpfup__drag-handle--disabled":t.disabled}})}),[],!1,null,null,null).exports,ei=e().extend({name:"File",props:["file","formId","fieldId","up","enableCrop","enableSorting","cropRequired","onlyImagesAllowed"],data:function(){return{existingFile:!1}},beforeMount:function(){100===this.file.percent&&(this.existingFile=!0)},components:{LoadingBar:Ze,ImagePreview:Ke,DragHandle:ti},computed:{allowSorting:function(){return!Ye(this.file)||this.$store.state.imgPreviews[this.file.id]&&(!(this.cropRequired&&!this.file.cropped)&&this.file.processed||this.file.rehydrated)},fileExtension:function(){var t,e;return null===(e=null===(t=this.file.name)||void 0===t?void 0:t.match(/(.*?)\.([a-zA-Z0-9]+)$/))||void 0===e?void 0:e[2]}},methods:{getSize:function(t){return Je()(t.size)},isImage:function(t){return Ye(t)},deleteFile:function(t,e){try{Ne(this.formId,this.fieldId,t),this.up.removeFile(t.id)}catch(t){console.error("Error deleting file.",t)}}}}),ii=Ve(ei,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"gpfup__file",attrs:{"data-file-id":t.file.id,"data-file-type":t.file.type,"data-file-ext":t.fileExtension}},[t.enableSorting?i("DragHandle",{attrs:{disabled:!t.allowSorting}}):t._e(),t._v(" "),i("ImagePreview",{attrs:{file:t.file,"enable-crop":t.enableCrop,"crop-required":t.cropRequired,"only-images-allowed":t.onlyImagesAllowed}}),t._v(" "),i("div",{staticClass:"gpfup__file-info"},[i("div",{staticClass:"gpfup__filename"},[t._v(t._s(t.file.name))]),t._v(" "),i("div",{staticClass:"gpfup__filesize"},[t._v(t._s(t.getSize(t.file)))]),t._v(" "),t.existingFile?t._e():[i("LoadingBar",{attrs:{file:t.file}})]],2),t._v(" "),i("div",{staticClass:"gpfup__file-actions"},[i("button",{staticClass:"gpfup__delete",attrs:{"data-gpfup-filename":t.file.name},on:{click:function(e){return e.preventDefault(),t.deleteFile(t.file,e)}}},[i("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 16 16",role:"img","aria-hidden":"true",focusable:"false"}},[i("path",{attrs:{d:"M11.55,1.65,7.42,5.78,11.55,9.9,9.9,11.55,5.77,7.43,1.66,11.55,0,9.89,4.12,5.78,0,1.66,1.66,0,5.77,4.12,9.9,0Z"}})])])])],1)}),[],!1,null,null,null).exports,ni=Ve(e().extend({name:"ErredFile",props:["file","fileIndex","errorMessage"],components:{ImagePreview:Ke},methods:{getSize:function(t){return Je()(t.size)},deleteFile:function(){this.$store.commit("REMOVE_ERRED_FILE",this.file)}}}),(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"gpfup__file gpfup__file--has-error",attrs:{"data-file-id":t.file.id}},[i("ImagePreview",{attrs:{file:t.file,error:!0}}),t._v(" "),i("div",{staticClass:"gpfup__file-info"},[i("div",{staticClass:"gpfup__filename"},[t._v(t._s(t.file.name))]),t._v(" "),i("div",{staticClass:"gpfup__filesize"},[t._v(t._s(t.getSize(t.file)))]),t._v(" "),i("div",{staticClass:"gpfup__file-error"},[t._v(t._s(t.errorMessage))])]),t._v(" "),i("div",{staticClass:"gpfup__file-actions"},[i("button",{staticClass:"gpfup__delete",on:{click:function(e){return e.preventDefault(),t.deleteFile(t.file,e)}}},[i("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 16 16",role:"img","aria-hidden":"true",focusable:"false"}},[i("path",{attrs:{d:"M11.55,1.65,7.42,5.78,11.55,9.9,9.9,11.55,5.77,7.43,1.66,11.55,0,9.89,4.12,5.78,0,1.66,1.66,0,5.77,4.12,9.9,0Z"}})])])])],1)}),[],!1,null,null,null).exports,ri=e().extend({name:"Droparea",data:function(){return{dropareaCounter:0}},mounted:function(){window.gform.applyFilters("gpfup_prevent_drop_outside",!0)&&(window.addEventListener("dragover",this.preventDragAndDrop),window.addEventListener("drop",this.preventDragAndDrop))},destroyed:function(){window.gform.applyFilters("gpfup_prevent_drop_outside",!0)&&(window.removeEventListener("dragover",this.preventDragAndDrop),window.removeEventListener("drop",this.preventDragAndDrop))},props:["reachedMaxFiles","files","strings","onDrop","onBrowse"],methods:{preventDragAndDrop:function(t){return t.preventDefault(),!1},allowDrop:function(t){this.reachedMaxFiles||this.dropareaCounter++},drop:function(t){this.reachedMaxFiles||(this.dropareaCounter=0,this.onDrop(t))},dragleave:function(){this.dropareaCounter--}}}),oi=Ve(ri,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"droparea",class:{gpfup__droparea:!0,"gpfup__droparea--over":t.dropareaCounter,"gpfup__droprea--maxed":t.reachedMaxFiles},on:{drop:function(e){return e.preventDefault(),t.drop.apply(null,arguments)},dragenter:function(e){return e.preventDefault(),t.allowDrop.apply(null,arguments)},dragleave:function(e){return e.preventDefault(),t.dragleave.apply(null,arguments)}}},[t.reachedMaxFiles?i("div",[i("span",[t._v("\n\t\t\t"+t._s(t.strings.max_reached)+"\n\t\t")])]):i("div",[i("span",[t._v("\n\t\t\t"+t._s(t.strings.drop_files_here)+"\n\t\t")]),t._v(" "),i("span",{staticClass:"gpfup__select-files-container"},[t._v("\n\t\t\t"+t._s(t.strings.or)+"\n\t\t\t"),i("button",{staticClass:"gpfup__select-files gform_button_select_files",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.onBrowse.apply(null,arguments)}}},[t._v(t._s(t.strings.select_files))])])])])}),[],!1,null,null,null).exports;var ai=i(9980),si=i.n(ai),ci=i(2433),li=function(){return li=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},li.apply(this,arguments)},ui=window.jQuery;e().use(ci.ZP);var hi=function(t){var e=document.getElementsByTagName("html").item(0);null==e||e.classList.toggle("gpfup--dragging",t)};const fi=e().extend({name:"GPFUP",props:["enableCrop","enableSorting","formId","fieldId","up","strings","cropRequired","aspectRatio","maxWidth","maxHeight","minWidth","minHeight","exactWidth","exactHeight"],data:function(){return{drag:!1}},components:{File:ii,ErredFile:ni,Droparea:oi,GPFUPCropper:Xe,draggable:si()},computed:li(li({portalName:function(){return"gpfup-cropper-".concat(this.formId,"-").concat(this.fieldId)},portalMountTo:function(){return"#gpfup-cropper-portal-".concat(this.formId,"-").concat(this.fieldId)}},Ee({files:function(t){return t.files},erredFiles:function(t){return t.erredFiles},currentFile:function(t){return t.editor.currentFile},editorOpen:function(t){return t.editor.open}})),{allFiles:{get:function(){return this.$store.getters.allFiles},set:function(t){this.$store.commit("SET_FILE_ORDER",t.map((function(t){return t.id})))}},maxFiles:function(){var t=parseInt(this.up.settings.gf_vars.max_files,10);return t>0?t:1/0},reachedMaxFiles:function(){return this.files.length>=this.maxFiles},onlyImagesAllowed:function(){var t,e,i,n,r=null===(n=null===(i=null===(e=null===(t=this.up)||void 0===t?void 0:t.settings)||void 0===e?void 0:e.filters)||void 0===i?void 0:i.mime_types[0])||void 0===n?void 0:n.extensions.split(","),o=window.gform.applyFilters("gpfup_image_extension_whitelist",["jpg","jpeg","png","gif"]),a=!0;if(r&&r.length)for(var s=0,c=r;s<c.length;s++){var l=c[s];if((l=l.trim())&&-1===o.indexOf(l)){a=!1;break}}return a},containerClasses:function(){var t={"gpfup--images-only":this.onlyImagesAllowed,"gpfup--has-error":this.erredFiles.length,"gpfup--maxed":this.reachedMaxFiles,"gpfup--sortable":this.enableSorting,"gpfup--has-files":this.files.length},e=window.gform.applyFilters("gpfup_cropper_options",{});return(null==e?void 0:e.stencilComponent)&&(t["gpfup--".concat(null==e?void 0:e.stencilComponent)]=!0),t},dragOptions:function(){return{animation:200,handle:".gpfup__drag-handle",group:"gpfup-files-".concat(this.formId,"-").concat(this.fieldId),disabled:!1,ghostClass:"ghost"}}}),methods:{browse:function(){ui("#field_".concat(this.formId,"_").concat(this.fieldId," div.moxie-shim input[type=file]")).trigger("click")},drop:function(t){this.up.addFile(Array.from(t.dataTransfer.files))},onDragStart:function(){hi(!0)},onDragEnd:function(){hi(!1)}}}),di=Ve(fi,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gpfup gpfup--strict",class:t.containerClasses},[t.enableCrop?i("MountingPortal",{attrs:{mountTo:t.portalMountTo,name:t.portalName,"target-slim":""}},[t.enableCrop?i("GPFUPCropper",{ref:"app",attrs:{strings:t.strings,"crop-required":t.cropRequired,"min-width":t.minWidth||t.exactWidth,"min-height":t.minHeight||t.exactHeight,"aspect-ratio":t.aspectRatio,up:t.up,open:t.editorOpen,file:t.currentFile,"field-id":t.fieldId,"form-id":t.formId}}):t._e()],1):t._e(),t._v(" "),t.allFiles.length?i("ul",{staticClass:"gpfup__files"},[t.enableSorting?i("draggable",t._b({attrs:{"force-fallback":!0},on:{start:t.onDragStart,end:t.onDragEnd},model:{value:t.allFiles,callback:function(e){t.allFiles=e},expression:"allFiles"}},"draggable",t.dragOptions,!1),[t._l(t.allFiles,(function(e){return[e.error?i("ErredFile",{key:"error-"+e.id,attrs:{file:e,"error-message":e.error}}):i("File",{key:e.id,attrs:{file:e,"crop-required":t.cropRequired,"only-images-allowed":t.onlyImagesAllowed,"form-id":t.formId,"field-id":t.fieldId,up:t.up,"enable-crop":t.enableCrop,"enable-sorting":t.enableSorting}})]}))],2):t._l(t.allFiles,(function(e){return[e.error?i("ErredFile",{key:"error-"+e.id,attrs:{file:e,"error-message":e.error}}):i("File",{key:e.id,attrs:{file:e,"crop-required":t.cropRequired,"only-images-allowed":t.onlyImagesAllowed,"form-id":t.formId,"field-id":t.fieldId,up:t.up,"enable-crop":t.enableCrop,"enable-sorting":t.enableSorting}})]}))],2):t._e(),t._v(" "),i("Droparea",{attrs:{strings:t.strings,"on-drop":t.drop,"on-browse":t.browse,files:t.files,"reached-max-files":t.reachedMaxFiles}})],1)}),[],!1,null,null,null).exports;function pi(t){var e=new Image;return new Promise((function(i){e.onload=function(){i({width:e.width,height:e.height})},e.src="string"!=typeof t?URL.createObjectURL(t):t}))}var gi=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},mi=function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},vi=i(5780),bi=i.n(vi),yi=function(){return yi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},yi.apply(this,arguments)},wi=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},Si=function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xi=function(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};e().use(je);var Ci=i(9483),Ai=i.n(Ci),Ii=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},_i=function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ei=(window.jQuery,function(){function t(t,e){this.formId=t,this.fieldId=e}return Object.defineProperty(t.prototype,"prefix",{get:function(){var t=this.formId,e=this.fieldId;return"gpfup-".concat(t,"-").concat(e)},enumerable:!1,configurable:!0}),t.prototype.getFileInfo=function(t){return Ai().getItem("".concat(this.prefix,"-").concat(t,"-info"))},t.prototype.getPreview=function(t){return Ai().getItem("".concat(this.prefix,"-").concat(t,"-preview"))},t.prototype.getPreviewDimensions=function(t){return Ai().getItem("".concat(this.prefix,"-").concat(t,"-preview-dimensions"))},t.prototype.getOriginal=function(t){return Ai().getItem("".concat(this.prefix,"-").concat(t,"-original"))},t.prototype.getCoords=function(t){return Ai().getItem("".concat(this.prefix,"-").concat(t,"-coords"))},t.prototype.storeFileInfo=function(t){var e;return Ii(this,void 0,Promise,(function(){var i,n,r,o,a;return _i(this,(function(s){switch(s.label){case 0:i=0,n=t,s.label=1;case 1:return i<n.length?(r=n[i],o="".concat(this.prefix,"-").concat(r.id,"-info"),[4,Ai().getItem(o)]):[3,4];case 2:a=null!==(e=s.sent())&&void 0!==e?e:{},r.size&&(a.size=r.size),r.type&&(a.type=r.type),r.addedDate&&(a.addedDate=r.addedDate),Ai().setItem(o,a),s.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype.storeOriginal=function(t,e){Ai().setItem("".concat(this.prefix,"-").concat(t,"-original"),e)},t.prototype.transferOriginal=function(t,e){return Ii(this,void 0,Promise,(function(){var i,n;return _i(this,(function(r){switch(r.label){case 0:return i="".concat(this.prefix,"-").concat(e,"-original"),[4,Ai().getItem(i)];case 1:return n=r.sent(),[4,Ai().setItem("".concat(this.prefix,"-").concat(t,"-original"),n)];case 2:return r.sent(),[4,Ai().removeItem(i)];case 3:return r.sent(),[2]}}))}))},t.prototype.storePreview=function(t,e){Ai().setItem("".concat(this.prefix,"-").concat(t,"-preview"),e)},t.prototype.storePreviewDimensions=function(t,e){Ai().setItem("".concat(this.prefix,"-").concat(t,"-preview-dimensions"),e)},t.prototype.storeCoords=function(t,e){Ai().setItem("".concat(this.prefix,"-").concat(t,"-coords"),e)},t.prototype.transferCoords=function(t,e){return Ii(this,void 0,Promise,(function(){var i,n;return _i(this,(function(r){switch(r.label){case 0:return i="".concat(this.prefix,"-").concat(e,"-coords"),[4,Ai().getItem(i)];case 1:return(n=r.sent())?[4,Ai().setItem("".concat(this.prefix,"-").concat(t,"-coords"),n)]:[2];case 2:return r.sent(),[4,Ai().removeItem(i)];case 3:return r.sent(),[2]}}))}))},t.prototype.purgeFile=function(t){var e=this;return Ai().iterate((function(i,n){var r="".concat(e.prefix,"-").concat(t.id,"-"),o="".concat(e.prefix,"-").concat(t.name,"-");0!==n.indexOf(r)&&0!==n.indexOf(o)||Ai().removeItem(n)}))},t.prototype.purge=function(){var t=this;return Ai().iterate((function(e,i){0===i.indexOf("".concat(t.prefix,"-"))&&Ai().removeItem(i)}))},t}());const Oi=Ei;var Pi=i(296),Di=i.n(Pi);function Ri(t,e,i,n){void 0===n&&(n=!1);var r=window.jQuery,o=r("#gform_uploaded_files_"+t),a=o.val();if(a){var s=r.secureEvalJSON(a);if(s){var c="input_"+e;s[c]=s[c].sort((function(t,e){var n,r,o,a,s=/o_[a-z0-9]+(?=\.)/,c=null===(r=null===(n=t.temp_filename)||void 0===n?void 0:n.match(s))||void 0===r?void 0:r[0],l=null===(a=null===(o=e.temp_filename)||void 0===o?void 0:o.match(s))||void 0===a?void 0:a[0];return t.temp_filename||(c=t.uploaded_filename),e.temp_filename||(l=e.uploaded_filename),i.indexOf(c)-i.indexOf(l)})),n&&(s[c]=s[c].map((function(t){return t.gpfup_order_changed=!0,t}))),o.val(r.toJSON(s))}}}var Ti=function(){return Ti=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ti.apply(this,arguments)};function Mi(t){var e=t.image,i=t.jpegQuality,n=t.loadImageOptions,r=t.stripMetadata;return function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}(this,void 0,Promise,(function(){var t,o,a,s;return function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(c){switch(c.label){case 0:return[4,ce()(e.getNative(),Ti({canvas:!0,orientation:!0,meta:!0},n))];case 1:return t=c.sent(),o="image/png",["image/jpg","image/jpeg"].includes(null==e?void 0:e.type)&&(o="image/jpeg"),[4,new Promise((function(e){t.image.toBlob((function(t){e(t)}),o,i)}))];case 2:return a=c.sent(),r?[3,4]:[4,ce().replaceHead(a,t.imageHead)];case 3:a=c.sent(),c.label=4;case 4:return(s=new window.mOxie.File(null,a)).name=e.name,[2,s]}}))}))}var ki="undefined"!=typeof self?self:global;const Fi="undefined"!=typeof navigator,Li=Fi&&"undefined"==typeof HTMLImageElement,zi=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),ji=ki.Buffer,Ni=ki.BigInt,Bi=!!ji,Ui=t=>t;function Hi(t,e=Ui){if(zi)try{return"function"==typeof require?Promise.resolve(e(require(t))):import(t).then(e)}catch(e){console.warn(`Couldn't load ${t}`)}}let Wi=ki.fetch;if(!ki.fetch){const t=Hi("http",(t=>t)),e=Hi("https",(t=>t)),i=(n,{headers:r}={})=>new Promise((async(o,a)=>{let{port:s,hostname:c,pathname:l,protocol:u,search:h}=new URL(n);const f={method:"GET",hostname:c,path:encodeURI(l)+h,headers:r};""!==s&&(f.port=Number(s));const d=("https:"===u?await e:await t).request(f,(t=>{if(301===t.statusCode||302===t.statusCode){let e=new URL(t.headers.location,n).toString();return i(e,{headers:r}).then(o).catch(a)}o({status:t.statusCode,arrayBuffer:()=>new Promise((e=>{let i=[];t.on("data",(t=>i.push(t))),t.on("end",(()=>e(Buffer.concat(i))))}))})}));d.on("error",a),d.end()}));(t=>{Wi=t})(i)}function $i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Gi=t=>Xi(t)?void 0:t,Vi=t=>void 0!==t;function Xi(t){return void 0===t||(t instanceof Map?0===t.size:0===Object.values(t).filter(Vi).length)}function Yi(t){let e=new Error(t);throw delete e.stack,e}function qi(t){return""===(t=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(t).trim())?void 0:t}function Ki(t){let e=function(t){let e=0;return t.ifd0.enabled&&(e+=1024),t.exif.enabled&&(e+=2048),t.makerNote&&(e+=2048),t.userComment&&(e+=1024),t.gps.enabled&&(e+=512),t.interop.enabled&&(e+=100),t.ifd1.enabled&&(e+=1024),e+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const Qi=t=>String.fromCharCode.apply(null,t),Ji="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function Zi(t){return Ji?Ji.decode(t):Bi?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(Qi(t)))}class tn{static from(t,e){return t instanceof this&&t.le===e?t:new tn(t,void 0,void 0,e)}constructor(t,e=0,i,n){if("boolean"==typeof n&&(this.le=n),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===i&&(i=t.byteLength-e);let n=new DataView(t,e,i);this._swapDataView(n)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof tn){void 0===i&&(i=t.byteLength-e),(e+=t.byteOffset)+i>t.byteOffset+t.byteLength&&Yi("Creating view outside of available memory in ArrayBuffer");let n=new DataView(t.buffer,e,i);this._swapDataView(n)}else if("number"==typeof t){let e=new DataView(new ArrayBuffer(t));this._swapDataView(e)}else Yi("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,e,i=tn){return t instanceof DataView||t instanceof tn?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Yi("BufferView.set(): Invalid data argument."),this.toUint8().set(t,e),new i(this,e,t.byteLength)}subarray(t,e){return e=e||this._lengthToEnd(t),new tn(this,t,e)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,e){return new Uint8Array(this.buffer,this.byteOffset+t,e)}getString(t=0,e=this.byteLength){return Zi(this.getUint8Array(t,e))}getLatin1String(t=0,e=this.byteLength){let i=this.getUint8Array(t,e);return Qi(i)}getUnicodeString(t=0,e=this.byteLength){const i=[];for(let n=0;n<e&&t+n<this.byteLength;n+=2)i.push(this.getUint16(t+n));return Qi(i)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,e=this.le){return this.dataView.getInt16(t,e)}getInt32(t,e=this.le){return this.dataView.getInt32(t,e)}getUint16(t,e=this.le){return this.dataView.getUint16(t,e)}getUint32(t,e=this.le){return this.dataView.getUint32(t,e)}getFloat32(t,e=this.le){return this.dataView.getFloat32(t,e)}getFloat64(t,e=this.le){return this.dataView.getFloat64(t,e)}getFloat(t,e=this.le){return this.dataView.getFloat32(t,e)}getDouble(t,e=this.le){return this.dataView.getFloat64(t,e)}getUintBytes(t,e,i){switch(e){case 1:return this.getUint8(t,i);case 2:return this.getUint16(t,i);case 4:return this.getUint32(t,i);case 8:return this.getUint64&&this.getUint64(t,i)}}getUint(t,e,i){switch(e){case 8:return this.getUint8(t,i);case 16:return this.getUint16(t,i);case 32:return this.getUint32(t,i);case 64:return this.getUint64&&this.getUint64(t,i)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function en(t,e){Yi(`${t} '${e}' was not loaded, try using full build of exifr.`)}class nn extends Map{constructor(t){super(),this.kind=t}get(t,e){return this.has(t)||en(this.kind,t),e&&(t in e||function(t,e){Yi(`Unknown ${t} '${e}'.`)}(this.kind,t),e[t].enabled||en(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}}var rn=new nn("file parser"),on=new nn("segment parser"),an=new nn("file reader");function sn(t,e){return(i=t).startsWith("data:")||i.length>1e4?ln(t,e,"base64"):zi&&t.includes("://")?cn(t,e,"url",un):zi?ln(t,e,"fs"):Fi?cn(t,e,"url",un):void Yi("Invalid input argument");var i}async function cn(t,e,i,n){return an.has(i)?ln(t,e,i):n?async function(t,e){let i=await e(t);return new tn(i)}(t,n):void Yi(`Parser ${i} is not loaded`)}async function ln(t,e,i){let n=new(an.get(i))(t,e);return await n.read(),n}const un=t=>Wi(t).then((t=>t.arrayBuffer())),hn=t=>new Promise(((e,i)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=i,n.readAsArrayBuffer(t)}));class fn extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function dn(t,e,i){let n=new fn;for(let[t,e]of i)n.set(t,e);if(Array.isArray(e))for(let i of e)t.set(i,n);else t.set(e,n);return n}function pn(t,e,i){let n,r=t.get(e);for(n of i)r.set(n[0],n[1])}const gn=new Map,mn=new Map,vn=new Map,bn=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],yn=["jfif","xmp","icc","iptc","ihdr"],wn=["tiff",...yn],Sn=["ifd0","ifd1","exif","gps","interop"],xn=[...wn,...Sn],Cn=["makerNote","userComment"],An=["translateKeys","translateValues","reviveValues","multiSegment"],In=[...An,"sanitize","mergeOutput","silentErrors"];class _n{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class En extends _n{get needed(){return this.enabled||this.deps.size>0}constructor(t,e,i,n){if(super(),$i(this,"enabled",!1),$i(this,"skip",new Set),$i(this,"pick",new Set),$i(this,"deps",new Set),$i(this,"translateKeys",!1),$i(this,"translateValues",!1),$i(this,"reviveValues",!1),this.key=t,this.enabled=e,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=Sn.includes(t),this.canBeFiltered&&(this.dict=gn.get(t)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if("object"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:t,skip:e}=i;t&&t.length>0&&this.translateTagSet(t,this.pick),e&&e.length>0&&this.translateTagSet(e,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:Yi(`Invalid options argument: ${i}`)}applyInheritables(t){let e,i;for(e of An)i=t[e],void 0!==i&&(this[e]=i)}translateTagSet(t,e){if(this.dict){let i,n,{tagKeys:r,tagValues:o}=this.dict;for(i of t)"string"==typeof i?(n=o.indexOf(i),-1===n&&(n=r.indexOf(Number(i))),-1!==n&&e.add(Number(r[n]))):e.add(i)}else for(let i of t)e.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Mn(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Mn(this.pick,this.deps)}}var On={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Pn=new Map;class Dn extends _n{static useCached(t){let e=Pn.get(t);return void 0!==e||(e=new this(t),Pn.set(t,e)),e}constructor(t){super(),!0===t?this.setupFromTrue():void 0===t?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):"object"==typeof t?this.setupFromObject(t):Yi(`Invalid options argument ${t}`),void 0===this.firstChunkSize&&(this.firstChunkSize=Fi?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of bn)this[t]=On[t];for(t of In)this[t]=On[t];for(t of Cn)this[t]=On[t];for(t of xn)this[t]=new En(t,On[t],void 0,this)}setupFromTrue(){let t;for(t of bn)this[t]=On[t];for(t of In)this[t]=On[t];for(t of Cn)this[t]=!0;for(t of xn)this[t]=new En(t,!0,void 0,this)}setupFromArray(t){let e;for(e of bn)this[e]=On[e];for(e of In)this[e]=On[e];for(e of Cn)this[e]=On[e];for(e of xn)this[e]=new En(e,!1,void 0,this);this.setupGlobalFilters(t,void 0,Sn)}setupFromObject(t){let e;for(e of(Sn.ifd0=Sn.ifd0||Sn.image,Sn.ifd1=Sn.ifd1||Sn.thumbnail,Object.assign(this,t),bn))this[e]=Tn(t[e],On[e]);for(e of In)this[e]=Tn(t[e],On[e]);for(e of Cn)this[e]=Tn(t[e],On[e]);for(e of wn)this[e]=new En(e,On[e],t[e],this);for(e of Sn)this[e]=new En(e,On[e],t[e],this.tiff);this.setupGlobalFilters(t.pick,t.skip,Sn,xn),!0===t.tiff?this.batchEnableWithBool(Sn,!0):!1===t.tiff?this.batchEnableWithUserValue(Sn,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,Sn):"object"==typeof t.tiff&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,Sn)}batchEnableWithBool(t,e){for(let i of t)this[i].enabled=e}batchEnableWithUserValue(t,e){for(let i of t){let t=e[i];this[i].enabled=!1!==t&&void 0!==t}}setupGlobalFilters(t,e,i,n=i){if(t&&t.length){for(let t of n)this[t].enabled=!1;let e=Rn(t,i);for(let[t,i]of e)Mn(this[t].pick,i),this[t].enabled=!0}else if(e&&e.length){let t=Rn(e,i);for(let[e,i]of t)Mn(this[e].skip,i)}}filterNestedSegmentTags(){let{ifd0:t,exif:e,xmp:i,iptc:n,icc:r}=this;this.makerNote?e.deps.add(37500):e.skip.add(37500),this.userComment?e.deps.add(37510):e.skip.add(37510),i.enabled||t.skip.add(700),n.enabled||t.skip.add(33723),r.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:e,gps:i,interop:n}=this;n.needed&&(e.deps.add(40965),t.deps.add(40965)),e.needed&&t.deps.add(34665),i.needed&&t.deps.add(34853),this.tiff.enabled=Sn.some((t=>!0===this[t].enabled))||this.makerNote||this.userComment;for(let t of Sn)this[t].finalizeFilters()}get onlyTiff(){return!yn.map((t=>this[t].enabled)).some((t=>!0===t))&&this.tiff.enabled}checkLoadedPlugins(){for(let t of wn)this[t].enabled&&!on.has(t)&&en("segment parser",t)}}function Rn(t,e){let i,n,r,o,a=[];for(r of e){for(o of(i=gn.get(r),n=[],i))(t.includes(o[0])||t.includes(o[1]))&&n.push(o[0]);n.length&&a.push([r,n])}return a}function Tn(t,e){return void 0!==t?t:void 0!==e?e:void 0}function Mn(t,e){for(let i of e)t.add(i)}$i(Dn,"default",On);class kn{constructor(t){$i(this,"parsers",{}),$i(this,"output",{}),$i(this,"errors",[]),$i(this,"pushToErrors",(t=>this.errors.push(t))),this.options=Dn.useCached(t)}async read(t){this.file=await function(t,e){return"string"==typeof t?sn(t,e):Fi&&!Li&&t instanceof HTMLImageElement?sn(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new tn(t):Fi&&t instanceof Blob?cn(t,e,"blob",hn):void Yi("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,e=t.getUint16(0);for(let[i,n]of rn)if(n.canHandle(t,e))return this.fileParser=new n(this.options,this.file,this.parsers),t[i]=!0;this.file.close&&this.file.close(),Yi("Unknown file format")}async parse(){let{output:t,errors:e}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),e.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&e.length>0&&(t.errors=e),Gi(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let e=Object.values(this.parsers).map((async e=>{let i=await e.parse();e.assignToOutput(t,i)}));this.options.silentErrors&&(e=e.map((t=>t.catch(this.pushToErrors)))),await Promise.all(e)}async extractThumbnail(){this.setup();let{options:t,file:e}=this,i=on.get("tiff",t);var n;if(e.tiff?n={start:0,type:"tiff"}:e.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),void 0===n)return;let r=await this.fileParser.ensureSegmentChunk(n),o=this.parsers.tiff=new i(r,t,e),a=await o.extractThumbnail();return e.close&&e.close(),a}}async function Fn(t,e){let i=new kn(e);return await i.read(t),i.parse()}var Ln=Object.freeze({__proto__:null,parse:Fn,Exifr:kn,fileParsers:rn,segmentParsers:on,fileReaders:an,tagKeys:gn,tagValues:mn,tagRevivers:vn,createDictionary:dn,extendDictionary:pn,fetchUrlAsArrayBuffer:un,readBlobAsArrayBuffer:hn,chunkedProps:bn,otherSegments:yn,segments:wn,tiffBlocks:Sn,segmentsAndBlocks:xn,tiffExtractables:Cn,inheritables:An,allFormatters:In,Options:Dn});class zn{constructor(t,e,i){$i(this,"errors",[]),$i(this,"ensureSegmentChunk",(async t=>{let e=t.start,i=t.size||65536;if(this.file.chunked)if(this.file.available(e,i))t.chunk=this.file.subarray(e,i);else try{t.chunk=await this.file.readChunk(e,i)}catch(e){Yi(`Couldn't read segment: ${JSON.stringify(t)}. ${e.message}`)}else this.file.byteLength>e+i?t.chunk=this.file.subarray(e,i):void 0===t.size?t.chunk=this.file.subarray(e):Yi("Segment unreachable: "+JSON.stringify(t));return t.chunk})),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=e,this.parsers=i}injectSegment(t,e){this.options[t].enabled&&this.createParser(t,e)}createParser(t,e){let i=new(on.get(t))(e,this.options,this.file);return this.parsers[t]=i}createParsers(t){for(let e of t){let{type:t,chunk:i}=e,n=this.options[t];if(n&&n.enabled){let e=this.parsers[t];e&&e.append||e||this.createParser(t,i)}}}async readSegments(t){let e=t.map(this.ensureSegmentChunk);await Promise.all(e)}}class jn{static findPosition(t,e){let i=t.getUint16(e+2)+2,n="function"==typeof this.headerLength?this.headerLength(t,e,i):this.headerLength,r=e+n,o=i-n;return{offset:e,length:i,headerLength:n,start:r,size:o,end:r+o}}static parse(t,e={}){return new this(t,new Dn({[this.type]:e}),t).parse()}normalizeInput(t){return t instanceof tn?t:new tn(t)}constructor(t,e={},i){$i(this,"errors",[]),$i(this,"raw",new Map),$i(this,"handleError",(t=>{if(!this.options.silentErrors)throw t;this.errors.push(t.message)})),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=e,this.localOptions=e[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,e){let i=vn.get(e),n=mn.get(e),r=gn.get(e),o=this.options[e],a=o.reviveValues&&!!i,s=o.translateValues&&!!n,c=o.translateKeys&&!!r,l={};for(let[e,o]of t)a&&i.has(e)?o=i.get(e)(o):s&&n.has(e)&&(o=this.translateValue(o,n.get(e))),c&&r.has(e)&&(e=r.get(e)||e),l[e]=o;return l}translateValue(t,e){return e[t]||e.DEFAULT||t}assignToOutput(t,e){this.assignObjectToOutput(t,this.constructor.type,e)}assignObjectToOutput(t,e,i){if(this.globalOptions.mergeOutput)return Object.assign(t,i);t[e]?Object.assign(t[e],i):t[e]=i}}function Nn(t){return 192===t||194===t||196===t||219===t||221===t||218===t||254===t}function Bn(t){return t>=224&&t<=239}function Un(t,e,i){for(let[n,r]of on)if(r.canHandle(t,e,i))return n}$i(jn,"headerLength",4),$i(jn,"type",void 0),$i(jn,"multiSegment",!1),$i(jn,"canHandle",(()=>!1));class Hn extends zn{constructor(...t){super(...t),$i(this,"appSegments",[]),$i(this,"jpegSegments",[]),$i(this,"unknownSegments",[])}static canHandle(t,e){return 65496===e}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){!0===t?(this.findAll=!0,this.wanted=new Set(on.keyList())):(t=void 0===t?on.keyList().filter((t=>this.options[t].enabled)):t.filter((t=>this.options[t].enabled&&on.has(t))),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,e){this.setupSegmentFinderArgs(e);let{file:i,findAll:n,wanted:r,remaining:o}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some((t=>{let e=on.get(t),i=this.options[t];return e.multiSegment&&i.multiSegment})),n&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,i.byteLength),!this.options.onlyTiff&&i.chunked){let e=!1;for(;o.size>0&&!e&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:n}=i,r=this.appSegments.some((t=>!this.file.available(t.offset||t.start,t.length||t.size)));if(e=t>n&&!r?!await i.readNextChunk(t):!await i.readNextChunk(n),void 0===(t=this.findAppSegmentsInRange(t,i.byteLength)))return}}}findAppSegmentsInRange(t,e){e-=2;let i,n,r,o,a,s,{file:c,findAll:l,wanted:u,remaining:h,options:f}=this;for(;t<e;t++)if(255===c.getUint8(t))if(i=c.getUint8(t+1),Bn(i)){if(n=c.getUint16(t+2),r=Un(c,t,n),r&&u.has(r)&&(o=on.get(r),a=o.findPosition(c,t),s=f[r],a.type=r,this.appSegments.push(a),!l&&(o.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||h.delete(r)):h.delete(r),0===h.size)))break;f.recordUnknownSegments&&(a=jn.findPosition(c,t),a.marker=i,this.unknownSegments.push(a)),t+=n+1}else if(Nn(i)){if(n=c.getUint16(t+2),218===i&&!1!==f.stopAfterSos)return;f.recordJpegSegments&&this.jpegSegments.push({offset:t,length:n,marker:i}),t+=n+1}return t}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let t=function(t,e){let i,n,r,o=new Map;for(let e=0;e<t.length;e++)i=t[e],n=i.type,o.has(n)?r=o.get(n):o.set(n,r=[]),r.push(i);return Array.from(o)}(this.appSegments);this.mergedAppSegments=t.map((([t,e])=>{let i=on.get(t,this.options);return i.handleMultiSegments?{type:t,chunk:i.handleMultiSegments(e)}:e[0]}))}getSegment(t){return this.appSegments.find((e=>e.type===t))}async getOrFindSegment(t){let e=this.getSegment(t);return void 0===e&&(await this.findAppSegments(0,[t]),e=this.getSegment(t)),e}}$i(Hn,"type","jpeg"),rn.set("jpeg",Hn);const Wn=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class $n extends jn{parseHeader(){var t=this.chunk.getUint16();18761===t?this.le=!0:19789===t&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,e,i=new Map){let{pick:n,skip:r}=this.options[e];n=new Set(n);let o=n.size>0,a=0===r.size,s=this.chunk.getUint16(t);t+=2;for(let c=0;c<s;c++){let s=this.chunk.getUint16(t);if(o){if(n.has(s)&&(i.set(s,this.parseTag(t,s,e)),n.delete(s),0===n.size))break}else!a&&r.has(s)||i.set(s,this.parseTag(t,s,e));t+=12}return i}parseTag(t,e,i){let{chunk:n}=this,r=n.getUint16(t+2),o=n.getUint32(t+4),a=Wn[r];if(a*o<=4?t+=8:t=n.getUint32(t+8),(r<1||r>13)&&Yi(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${r}, offset ${t}`),t>n.byteLength&&Yi(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${r}, offset ${t} is outside of chunk size ${n.byteLength}`),1===r)return n.getUint8Array(t,o);if(2===r)return qi(n.getString(t,o));if(7===r)return n.getUint8Array(t,o);if(1===o)return this.parseTagValue(r,t);{let e=new(function(t){switch(t){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(r))(o),i=a;for(let n=0;n<o;n++)e[n]=this.parseTagValue(r,t),t+=i;return e}}parseTagValue(t,e){let{chunk:i}=this;switch(t){case 1:return i.getUint8(e);case 3:return i.getUint16(e);case 4:case 13:return i.getUint32(e);case 5:return i.getUint32(e)/i.getUint32(e+4);case 6:return i.getInt8(e);case 8:return i.getInt16(e);case 9:return i.getInt32(e);case 10:return i.getInt32(e)/i.getInt32(e+4);case 11:return i.getFloat(e);case 12:return i.getDouble(e);default:Yi(`Invalid tiff type ${t}`)}}}class Gn extends $n{static canHandle(t,e){return 225===t.getUint8(e+1)&&1165519206===t.getUint32(e+4)&&0===t.getUint16(e+8)}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let e=this[t]();return void 0!==e.catch&&(e=e.catch(this.handleError)),e}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),e=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(e)}}parseBlock(t,e){let i=new Map;return this[e]=i,this.parseTags(t,e,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Yi("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Yi(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Ki(this.options));let e=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==e.size?(this.exifOffset=e.get(34665),this.interopOffset=e.get(40965),this.gpsOffset=e.get(34853),this.xmp=e.get(700),this.iptc=e.get(33723),this.icc=e.get(34675),this.options.sanitize&&(e.delete(34665),e.delete(40965),e.delete(34853),e.delete(700),e.delete(33723),e.delete(34675)),e):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Ki(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,e){let i=t.get(e);i&&1===i.length&&t.set(e,i[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Vn(...t.get(2),t.get(1))),t.set("longitude",Vn(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let t=this.ifd1.get(513),e=this.ifd1.get(514);return this.chunk.getUint8Array(t,e)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,e,i,n={};for(e of Sn)if(t=this[e],!Xi(t))if(i=this.canTranslate?this.translateBlock(t,e):Object.fromEntries(t),this.options.mergeOutput){if("ifd1"===e)continue;Object.assign(n,i)}else n[e]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(t,e){if(this.globalOptions.mergeOutput)Object.assign(t,e);else for(let[i,n]of Object.entries(e))this.assignObjectToOutput(t,i,n)}}function Vn(t,e,i,n){var r=t+e/60+i/3600;return"S"!==n&&"W"!==n||(r*=-1),r}$i(Gn,"type","tiff"),$i(Gn,"headerLength",10),on.set("tiff",Gn);var Xn=Object.freeze({__proto__:null,default:Ln,Exifr:kn,fileParsers:rn,segmentParsers:on,fileReaders:an,tagKeys:gn,tagValues:mn,tagRevivers:vn,createDictionary:dn,extendDictionary:pn,fetchUrlAsArrayBuffer:un,readBlobAsArrayBuffer:hn,chunkedProps:bn,otherSegments:yn,segments:wn,tiffBlocks:Sn,segmentsAndBlocks:xn,tiffExtractables:Cn,inheritables:An,allFormatters:In,Options:Dn,parse:Fn});const Yn={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},qn=Object.assign({},Yn,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Kn(t){let e=new kn(qn);await e.read(t);let i=await e.parse();if(i&&i.gps){let{latitude:t,longitude:e}=i.gps;return{latitude:t,longitude:e}}}const Qn=Object.assign({},Yn,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Jn(t){let e=new kn(Qn);await e.read(t);let i=await e.extractThumbnail();return i&&Bi?ji.from(i):i}async function Zn(t){let e=await this.thumbnail(t);if(void 0!==e){let t=new Blob([e]);return URL.createObjectURL(t)}}const tr=Object.assign({},Yn,{firstChunkSize:4e4,ifd0:[274]});async function er(t){let e=new kn(tr);await e.read(t);let i=await e.parse();if(i&&i.ifd0)return i.ifd0[274]}const ir=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let nr=!0,rr=!0;if("object"==typeof navigator){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e,n=Number(t)+.1*Number(i);nr=n<13.4,rr=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);nr=rr=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);nr=rr=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);nr=rr=Number(e)<77}}async function or(t){let e=await er(t);return Object.assign({canvas:nr,css:rr},ir[e])}class ar extends tn{constructor(...t){super(...t),$i(this,"ranges",new sr),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(t,e,i){if(0===t&&0===this.byteLength&&i){let t=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(t)}else{let i=t+e;if(i>this.byteLength){let{dataView:t}=this._extend(i);this._swapDataView(t)}}}_extend(t){let e;e=Bi?ji.allocUnsafe(t):new Uint8Array(t);let i=new DataView(e.buffer,e.byteOffset,e.byteLength);return e.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:e,dataView:i}}subarray(t,e,i=!1){return e=e||this._lengthToEnd(t),i&&this._tryExtend(t,e),this.ranges.add(t,e),super.subarray(t,e)}set(t,e,i=!1){i&&this._tryExtend(e,t.byteLength,t);let n=super.set(t,e);return this.ranges.add(e,n.byteLength),n}async ensureChunk(t,e){this.chunked&&(this.ranges.available(t,e)||await this.readChunk(t,e))}available(t,e){return this.ranges.available(t,e)}}class sr{constructor(){$i(this,"list",[])}get length(){return this.list.length}add(t,e,i=0){let n=t+e,r=this.list.filter((e=>cr(t,e.offset,n)||cr(t,e.end,n)));if(r.length>0){t=Math.min(t,...r.map((t=>t.offset))),n=Math.max(n,...r.map((t=>t.end))),e=n-t;let i=r.shift();i.offset=t,i.length=e,i.end=n,this.list=this.list.filter((t=>!r.includes(t)))}else this.list.push({offset:t,length:e,end:n})}available(t,e){let i=t+e;return this.list.some((e=>e.offset<=t&&i<=e.end))}}function cr(t,e,i){return t<=e&&e<=i}class lr extends ar{constructor(t,e){super(0),$i(this,"chunksRead",0),this.input=t,this.options=e}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let e=this.options.chunkSize,i=await this.readChunk(t,e);return!!i&&i.byteLength===e}async readChunk(t,e){if(this.chunksRead++,0!==(e=this.safeWrapAddress(t,e)))return this._readChunk(t,e)}safeWrapAddress(t,e){return void 0!==this.size&&t+e>this.size?Math.max(0,this.size-t):e}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}an.set("blob",class extends lr{async readWhole(){this.chunked=!1;let t=await hn(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let i=e?t+e:void 0,n=this.input.slice(t,i),r=await hn(n);return this.set(r,t,!0)}});var ur=Object.freeze({__proto__:null,default:Xn,Exifr:kn,fileParsers:rn,segmentParsers:on,fileReaders:an,tagKeys:gn,tagValues:mn,tagRevivers:vn,createDictionary:dn,extendDictionary:pn,fetchUrlAsArrayBuffer:un,readBlobAsArrayBuffer:hn,chunkedProps:bn,otherSegments:yn,segments:wn,tiffBlocks:Sn,segmentsAndBlocks:xn,tiffExtractables:Cn,inheritables:An,allFormatters:In,Options:Dn,parse:Fn,gpsOnlyOptions:qn,gps:Kn,thumbnailOnlyOptions:Qn,thumbnail:Jn,thumbnailUrl:Zn,orientationOnlyOptions:tr,orientation:er,rotations:ir,get rotateCanvas(){return nr},get rotateCss(){return rr},rotation:or});an.set("url",class extends lr{async readWhole(){this.chunked=!1;let t=await un(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let i=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||i)&&(n.range=`bytes=${[t,i].join("-")}`);let r=await Wi(this.input,{headers:n}),o=await r.arrayBuffer(),a=o.byteLength;if(416!==r.status)return a!==e&&(this.size=t+a),this.set(o,t,!0)}}),tn.prototype.getUint64=function(t){let e=this.getUint32(t),i=this.getUint32(t+4);return e<1048575?e<<32|i:void 0!==typeof Ni?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Ni(e)<<Ni(32)|Ni(i)):void Yi("Trying to read 64b value but JS can only handle 53b numbers.")};class hr extends zn{parseBoxes(t=0){let e=[];for(;t<this.file.byteLength-4;){let i=this.parseBoxHead(t);if(e.push(i),0===i.length)break;t+=i.length}return e}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,e){return void 0===t.boxes&&this.parseSubBoxes(t),t.boxes.find((t=>t.kind===e))}parseBoxHead(t){let e=this.file.getUint32(t),i=this.file.getString(t+4,4),n=t+8;return 1===e&&(e=this.file.getUint64(t+8),n+=8),{offset:t,length:e,kind:i,start:n}}parseBoxFullHead(t){if(void 0!==t.version)return;let e=this.file.getUint32(t.start);t.version=e>>24,t.start+=4}}class fr extends hr{static canHandle(t,e){if(0!==e)return!1;let i=t.getUint16(2);if(i>50)return!1;let n=16,r=[];for(;n<i;)r.push(t.getString(n,4)),n+=4;return r.includes(this.type)}async parse(){let t=this.file.getUint32(0),e=this.parseBoxHead(t);for(;"meta"!==e.kind;)t+=e.length,await this.file.ensureChunk(t,16),e=this.parseBoxHead(t);await this.file.ensureChunk(e.offset,e.length),this.parseBoxFullHead(e),this.parseSubBoxes(e),this.options.icc.enabled&&await this.findIcc(e),this.options.tiff.enabled&&await this.findExif(e)}async registerSegment(t,e,i){await this.file.ensureChunk(e,i);let n=this.file.subarray(e,i);this.createParser(t,n)}async findIcc(t){let e=this.findBox(t,"iprp");if(void 0===e)return;let i=this.findBox(e,"ipco");if(void 0===i)return;let n=this.findBox(i,"colr");void 0!==n&&await this.registerSegment("icc",n.offset+12,n.length)}async findExif(t){let e=this.findBox(t,"iinf");if(void 0===e)return;let i=this.findBox(t,"iloc");if(void 0===i)return;let n=this.findExifLocIdInIinf(e),r=this.findExtentInIloc(i,n);if(void 0===r)return;let[o,a]=r;await this.file.ensureChunk(o,a);let s=4+this.file.getUint32(o);o+=s,a-=s,await this.registerSegment("tiff",o,a)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let e,i,n,r,o=t.start,a=this.file.getUint16(o);for(o+=2;a--;){if(e=this.parseBoxHead(o),this.parseBoxFullHead(e),i=e.start,e.version>=2&&(n=3===e.version?4:2,r=this.file.getString(i+n+2,4),"Exif"===r))return this.file.getUintBytes(i,n);o+=e.length}}get8bits(t){let e=this.file.getUint8(t);return[e>>4,15&e]}findExtentInIloc(t,e){this.parseBoxFullHead(t);let i=t.start,[n,r]=this.get8bits(i++),[o,a]=this.get8bits(i++),s=2===t.version?4:2,c=1===t.version||2===t.version?2:0,l=a+n+r,u=2===t.version?4:2,h=this.file.getUintBytes(i,u);for(i+=u;h--;){let t=this.file.getUintBytes(i,s);i+=s+c+2+o;let u=this.file.getUint16(i);if(i+=2,t===e)return u>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(i+a,n),this.file.getUintBytes(i+a+n,r)];i+=u*l}}}class dr extends fr{}$i(dr,"type","heic");class pr extends fr{}$i(pr,"type","avif"),rn.set("heic",dr),rn.set("avif",pr),dn(gn,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),dn(gn,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),dn(gn,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),dn(mn,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let gr=dn(mn,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const mr={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};gr.set(37392,mr),gr.set(41488,mr);const vr={0:"Normal",1:"Low",2:"High"};function br(t){return"object"==typeof t&&void 0!==t.length?t[0]:t}function yr(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((t=>String.fromCharCode(t)))),"0"!==e[2]&&0!==e[2]||e.pop(),e.join(".")}function wr(t){if("string"==typeof t){var[e,i,n,r,o,a]=t.trim().split(/[-: ]/g).map(Number),s=new Date(e,i-1,n);return Number.isNaN(r)||Number.isNaN(o)||Number.isNaN(a)||(s.setHours(r),s.setMinutes(o),s.setSeconds(a)),Number.isNaN(+s)?t:s}}function Sr(t){if("string"==typeof t)return t;let e=[];if(0===t[1]&&0===t[t.length-1])for(let i=0;i<t.length;i+=2)e.push(xr(t[i+1],t[i]));else for(let i=0;i<t.length;i+=2)e.push(xr(t[i],t[i+1]));return qi(String.fromCodePoint(...e))}function xr(t,e){return t<<8|e}gr.set(41992,vr),gr.set(41993,vr),gr.set(41994,vr),dn(vn,["ifd0","ifd1"],[[50827,function(t){return"string"!=typeof t?Zi(t):t}],[306,wr],[40091,Sr],[40092,Sr],[40093,Sr],[40094,Sr],[40095,Sr]]),dn(vn,"exif",[[40960,yr],[36864,yr],[36867,wr],[36868,wr],[40962,br],[40963,br]]),dn(vn,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class Cr extends jn{static canHandle(t,e){return 225===t.getUint8(e+1)&&1752462448===t.getUint32(e+4)&&"http://ns.adobe.com/"===t.getString(e+4,"http://ns.adobe.com/".length)}static headerLength(t,e){return"http://ns.adobe.com/xmp/extension/"===t.getString(e+4,"http://ns.adobe.com/xmp/extension/".length)?79:4+"http://ns.adobe.com/xap/1.0/".length+1}static findPosition(t,e){let i=super.findPosition(t,e);return i.multiSegment=i.extended=79===i.headerLength,i.multiSegment?(i.chunkCount=t.getUint8(e+72),i.chunkNumber=t.getUint8(e+76),0!==t.getUint8(e+77)&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(t){return t.map((t=>t.chunk.getString())).join("")}normalizeInput(t){return"string"==typeof t?t:tn.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(t){let e={},i={};for(let t of Tr)e[t]=[],i[t]=0;return t.replace(Mr,((t,n,r)=>{if("<"===n){let n=++i[r];return e[r].push(n),`${t}#${n}`}return`${t}#${e[r].pop()}`}))}(t);let e=Ir.findAll(t,"rdf","Description");0===e.length&&e.push(new Ir("rdf","Description",void 0,t));let i,n={};for(let t of e)for(let e of t.properties)i=Pr(e.ns,n),_r(e,i);return function(t){let e;for(let i in t)e=t[i]=Gi(t[i]),void 0===e&&delete t[i];return Gi(t)}(n)}assignToOutput(t,e){if(this.localOptions.parse)for(let[i,n]of Object.entries(e))switch(i){case"tiff":this.assignObjectToOutput(t,"ifd0",n);break;case"exif":this.assignObjectToOutput(t,"exif",n);break;case"xmlns":break;default:this.assignObjectToOutput(t,i,n)}else t.xmp=e}}$i(Cr,"type","xmp"),$i(Cr,"multiSegment",!0),on.set("xmp",Cr);class Ar{static findAll(t){return Dr(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ar.unpackMatch)}static unpackMatch(t){let e=t[1],i=t[2],n=t[3].slice(1,-1);return n=Rr(n),new Ar(e,i,n)}constructor(t,e,i){this.ns=t,this.name=e,this.value=i}serialize(){return this.value}}class Ir{static findAll(t,e,i){if(void 0!==e||void 0!==i){e=e||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var n=new RegExp(`<(${e}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else n=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Dr(t,n).map(Ir.unpackMatch)}static unpackMatch(t){let e=t[1],i=t[2],n=t[4],r=t[8];return new Ir(e,i,n,r)}constructor(t,e,i,n){this.ns=t,this.name=e,this.attrString=i,this.innerXml=n,this.attrs=Ar.findAll(i),this.children=Ir.findAll(n),this.value=0===this.children.length?Rr(n):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:t,name:e}=this;return"rdf"===t&&("Seq"===e||"Bag"===e||"Alt"===e)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Or(this.children.map(Er));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let t={};for(let e of this.properties)_r(e,t);return void 0!==this.value&&(t.value=this.value),Gi(t)}}function _r(t,e){let i=t.serialize();void 0!==i&&(e[t.name]=i)}var Er=t=>t.serialize(),Or=t=>1===t.length?t[0]:t,Pr=(t,e)=>e[t]?e[t]:e[t]={};function Dr(t,e){let i,n=[];if(!t)return n;for(;null!==(i=e.exec(t));)n.push(i);return n}function Rr(t){if(function(t){return null==t||"null"===t||"undefined"===t||""===t||""===t.trim()}(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let i=t.toLowerCase();return"true"===i||"false"!==i&&t.trim()}const Tr=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Mr=new RegExp(`(<|\\/)(${Tr.join("|")})`,"g");var kr=Object.freeze({__proto__:null,default:ur,Exifr:kn,fileParsers:rn,segmentParsers:on,fileReaders:an,tagKeys:gn,tagValues:mn,tagRevivers:vn,createDictionary:dn,extendDictionary:pn,fetchUrlAsArrayBuffer:un,readBlobAsArrayBuffer:hn,chunkedProps:bn,otherSegments:yn,segments:wn,tiffBlocks:Sn,segmentsAndBlocks:xn,tiffExtractables:Cn,inheritables:An,allFormatters:In,Options:Dn,parse:Fn,gpsOnlyOptions:qn,gps:Kn,thumbnailOnlyOptions:Qn,thumbnail:Jn,thumbnailUrl:Zn,orientationOnlyOptions:tr,orientation:er,rotations:ir,get rotateCanvas(){return nr},get rotateCss(){return rr},rotation:or});let Fr=Hi("fs",(t=>t.promises));an.set("fs",class extends lr{async readWhole(){this.chunked=!1,this.fs=await Fr;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Fr,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){void 0===this.fh&&await this.open(),t+e>this.size&&(e=this.size-t);var i=this.subarray(t,e,!0);return await this.fh.read(i.dataView,0,e,t),i}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}}),an.set("base64",class extends lr{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let i,n,r=this.input;void 0===t?(t=0,i=0,n=0):(i=4*Math.floor(t/3),n=t-i/4*3),void 0===e&&(e=this.size);let o=t+e,a=i+4*Math.ceil(o/3);r=r.slice(i,a);let s=Math.min(e,this.size-t);if(Bi){let e=ji.from(r,"base64").slice(n,n+s);return this.set(e,t,!0)}{let e=this.subarray(t,s,!0),i=atob(r),o=e.toUint8();for(let t=0;t<s;t++)o[t]=i.charCodeAt(n+t);return e}}});class Lr extends zn{static canHandle(t,e){return 18761===e||19789===e}extendOptions(t){let{ifd0:e,xmp:i,iptc:n,icc:r}=t;i.enabled&&e.deps.add(700),n.enabled&&e.deps.add(33723),r.enabled&&e.deps.add(34675),e.finalizeFilters()}async parse(){let{tiff:t,xmp:e,iptc:i,icc:n}=this.options;if(t.enabled||e.enabled||i.enabled||n.enabled){let t=Math.max(Ki(this.options),this.options.chunkSize);await this.file.ensureChunk(0,t),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let e=this.parsers.tiff[t];this.injectSegment(t,e)}}}$i(Lr,"type","tiff"),rn.set("tiff",Lr);let zr=Hi("zlib");const jr=["ihdr","iccp","text","itxt","exif"];class Nr extends zn{constructor(...t){super(...t),$i(this,"catchError",(t=>this.errors.push(t))),$i(this,"metaChunks",[]),$i(this,"unknownChunks",[])}static canHandle(t,e){return 35152===e&&2303741511===t.getUint32(0)&&218765834===t.getUint32(4)}async parse(){let{file:t}=this;await this.findPngChunksInRange("PNG\r\n\n".length,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,e){let{file:i}=this;for(;t<e;){let e=i.getUint32(t),n=i.getUint32(t+4),r=i.getString(t+4,4).toLowerCase(),o=e+4+4+4,a={type:r,offset:t,length:o,start:t+4+4,size:e,marker:n};jr.includes(r)?this.metaChunks.push(a):this.unknownChunks.push(a),t+=o}}parseTextChunks(){let t=this.metaChunks.filter((t=>"text"===t.type));for(let e of t){let[t,i]=this.file.getString(e.start,e.size).split("\0");this.injectKeyValToIhdr(t,i)}}injectKeyValToIhdr(t,e){let i=this.parsers.ihdr;i&&i.raw.set(t,e)}findIhdr(){let t=this.metaChunks.find((t=>"ihdr"===t.type));t&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find((t=>"exif"===t.type));t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter((t=>"itxt"===t.type));for(let e of t)"XML:com.adobe.xmp"===e.chunk.getString(0,"XML:com.adobe.xmp".length)&&this.injectSegment("xmp",e.chunk)}async findIcc(){let t=this.metaChunks.find((t=>"iccp"===t.type));if(!t)return;let{chunk:e}=t,i=e.getUint8Array(0,81),n=0;for(;n<80&&0!==i[n];)n++;let r=n+2,o=e.getString(0,n);if(this.injectKeyValToIhdr("ProfileName",o),zi){let t=await zr,i=e.getUint8Array(r);i=t.inflateSync(i),this.injectSegment("icc",i)}}}$i(Nr,"type","png"),rn.set("png",Nr),dn(gn,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),pn(gn,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Br=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];pn(gn,"ifd0",Br),pn(gn,"exif",Br),dn(mn,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Ur extends jn{static canHandle(t,e){return 224===t.getUint8(e+1)&&1246120262===t.getUint32(e+4)&&0===t.getUint8(e+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}$i(Ur,"type","jfif"),$i(Ur,"headerLength",9),on.set("jfif",Ur),dn(gn,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Hr extends jn{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}$i(Hr,"type","ihdr"),on.set("ihdr",Hr),dn(gn,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),dn(mn,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Wr extends jn{static canHandle(t,e){return 226===t.getUint8(e+1)&&1229144927===t.getUint32(e+4)}static findPosition(t,e){let i=super.findPosition(t,e);return i.chunkNumber=t.getUint8(e+16),i.chunkCount=t.getUint8(e+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(t){return function(t){let e=function(t){let e=t[0].constructor,i=0;for(let e of t)i+=e.length;let n=new e(i),r=0;for(let e of t)n.set(e,r),r+=e.length;return n}(t.map((t=>t.chunk.toUint8())));return new tn(e)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Yi("ICC header is too short");for(let[e,i]of Object.entries($r)){e=parseInt(e,10);let n=i(this.chunk,e);"\0\0\0\0"!==n&&t.set(e,n)}}parseTags(){let t,e,i,n,r,{raw:o}=this,a=this.chunk.getUint32(128),s=132,c=this.chunk.byteLength;for(;a--;){if(t=this.chunk.getString(s,4),e=this.chunk.getUint32(s+4),i=this.chunk.getUint32(s+8),n=this.chunk.getString(e,4),e+i>c)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");r=this.parseTag(n,e,i),void 0!==r&&"\0\0\0\0"!==r&&o.set(t,r),s+=12}}parseTag(t,e,i){switch(t){case"desc":return this.parseDesc(e);case"mluc":return this.parseMluc(e);case"text":return this.parseText(e,i);case"sig ":return this.parseSig(e)}if(!(e+i>this.chunk.byteLength))return this.chunk.getUint8Array(e,i)}parseDesc(t){let e=this.chunk.getUint32(t+8)-1;return qi(this.chunk.getString(t+12,e))}parseText(t,e){return qi(this.chunk.getString(t+8,e-8))}parseSig(t){return qi(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:e}=this,i=e.getUint32(t+8),n=e.getUint32(t+12),r=t+16,o=[];for(let a=0;a<i;a++){let i=e.getString(r+0,2),a=e.getString(r+2,2),s=e.getUint32(r+4),c=e.getUint32(r+8)+t,l=qi(e.getUnicodeString(c,s));o.push({lang:i,country:a,text:l}),r+=n}return 1===i?o[0].text:o}translateValue(t,e){return"string"==typeof t?e[t]||e[t.toLowerCase()]||t:e[t]||t}}$i(Wr,"type","icc"),$i(Wr,"multiSegment",!0),$i(Wr,"headerLength",18);const $r={4:Gr,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((t=>t.toString(10))).join(".")},12:Gr,16:Gr,20:Gr,24:function(t,e){const i=t.getUint16(e),n=t.getUint16(e+2)-1,r=t.getUint16(e+4),o=t.getUint16(e+6),a=t.getUint16(e+8),s=t.getUint16(e+10);return new Date(Date.UTC(i,n,r,o,a,s))},36:Gr,40:Gr,48:Gr,52:Gr,64:(t,e)=>t.getUint32(e),80:Gr};function Gr(t,e){return qi(t.getString(e,4))}on.set("icc",Wr),dn(gn,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Vr={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Xr={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};dn(mn,"icc",[[4,Vr],[12,Xr],[40,Object.assign({},Vr,Xr)],[48,Vr],[80,Vr],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Yr extends jn{static canHandle(t,e,i){return 237===t.getUint8(e+1)&&"Photoshop"===t.getString(e+4,9)&&void 0!==this.containsIptc8bim(t,e,i)}static headerLength(t,e,i){let n,r=this.containsIptc8bim(t,e,i);if(void 0!==r)return n=t.getUint8(e+r+7),n%2!=0&&(n+=1),0===n&&(n=4),r+8+n}static containsIptc8bim(t,e,i){for(let n=0;n<i;n++)if(this.isIptcSegmentHead(t,e+n))return n}static isIptcSegmentHead(t,e){return 56===t.getUint8(e)&&943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}parse(){let{raw:t}=this,e=this.chunk.byteLength-1,i=!1;for(let n=0;n<e;n++)if(28===this.chunk.getUint8(n)&&2===this.chunk.getUint8(n+1)){i=!0;let e=this.chunk.getUint16(n+3),r=this.chunk.getUint8(n+2),o=this.chunk.getLatin1String(n+5,e);t.set(r,this.pluralizeValue(t.get(r),o)),n+=4+e}else if(i)break;return this.translate(),this.output}pluralizeValue(t,e){return void 0!==t?t instanceof Array?(t.push(e),t):[t,e]:e}}$i(Yr,"type","iptc"),$i(Yr,"translateValues",!1),$i(Yr,"reviveValues",!1),on.set("iptc",Yr),dn(gn,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),dn(mn,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const qr=kr;var Kr=function(){return Kr=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Kr.apply(this,arguments)},Qr=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},Jr=function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Zr=window.jQuery,to=window.gform,eo=function(){function t(t){var i=this;this.formId=t.formId,this.fieldId=t.fieldId,this.enableCrop=t.enableCrop,this.enableSorting=t.enableSorting,this.cropRequired=t.cropRequired&&t.enableCrop,this.aspectRatio=t.aspectRatio,this.maxWidth=t.maxWidth?t.maxWidth:void 0,this.maxHeight=t.maxHeight?t.maxHeight:void 0,this.minWidth=t.minWidth?t.minWidth:void 0,this.minHeight=t.minHeight?t.minHeight:void 0,this.exactWidth=t.exactWidth?t.exactWidth:void 0,this.exactHeight=t.exactHeight?t.exactHeight:void 0,this.cropperContainerSelector=".gform_heading",this.removeGFPreview(),Zr(document).on("gform_post_render",(function(t,n){return Qr(i,void 0,void 0,(function(){var t,i,r,o=this;return Jr(this,(function(a){switch(a.label){case 0:return n!=this.formId?[2]:(this.enableCrop&&(t="gpfup-cropper-portal-".concat(this.formId,"-").concat(this.fieldId),Zr("#".concat(t)).remove(),Zr("body").append('<div id="'.concat(t,'"></div>'))),this.$field=document.querySelector("#field_".concat(this.formId,"_").concat(this.fieldId," .ginput_container_fileupload")),this.$preview=document.querySelector("#gform_preview_".concat(this.formId,"_").concat(this.fieldId," ")),this.storage=new Oi(this.formId,this.fieldId),this.$store=function(t){var i=t.storage;return new je.Store({modules:{editor:{state:{currentFile:null,originals:{},croppedCoords:{},open:!1},getters:{currentImageIndex:function(t,e,i){var n;if(null===(n=t.currentFile)||void 0===n?void 0:n.id)return i.currentAddedFiles.findIndex((function(e){var i;return e.id===(null===(i=t.currentFile)||void 0===i?void 0:i.id)}))+1},imgSrc:function(t){var e,i;return null===(i=t.originals[null===(e=t.currentFile)||void 0===e?void 0:e.id])||void 0===i?void 0:i.src},imgSize:function(t){var e,i,n,r=t.croppedCoords[null===(e=t.currentFile)||void 0===e?void 0:e.id];return r?{width:r.width,height:r.height}:null===(n=t.originals[null===(i=t.currentFile)||void 0===i?void 0:i.id])||void 0===n?void 0:n.size},imgPos:function(t){var e,i=t.croppedCoords[null===(e=t.currentFile)||void 0===e?void 0:e.id];return i?{left:i.left,top:i.top}:{top:0,left:0}}},actions:{setCurrentFile:function(t,e){var i=e.file,n=e.clearPrevious,r=void 0===n||n;return gi(this,void 0,void 0,(function(){return mi(this,(function(e){switch(e.label){case 0:return r&&t.commit("SET_CURRENT_FILE",null),t.state.originals[i.id]?[3,2]:[4,t.dispatch("storeOriginal",i)];case 1:e.sent(),e.label=2;case 2:return t.commit("SET_CURRENT_FILE",i),[2]}}))}))},storeOriginal:function(t,e){return gi(this,void 0,void 0,(function(){var i,n,r,o,a,s,c,l,u;return mi(this,(function(h){switch(h.label){case 0:return"function"!=typeof e.getNative?[3,2]:[4,re(e.getNative())];case 1:return i=h.sent(),[3,4];case 2:return[4,t.rootState.storage.getPreview(e.id)];case 3:i=h.sent(),h.label=4;case 4:return t.dispatch("storeImagePreview",{fileId:e.id,dataUrl:i}),r=(n=t).commit,o=["STORE_ORIGINAL"],l={fileId:e.id,src:i},[4,pi(i)];case 5:return r.apply(n,o.concat([(l.size=h.sent(),l)])),s=(a=t.rootState.storage).storeOriginal,c=[e.id],u={src:i},[4,pi(i)];case 6:return s.apply(a,c.concat([(u.size=h.sent(),u)])),[2]}}))}))},transferOriginal:function(t,e){var i=e.currentFileId,n=e.newFileId;return gi(this,void 0,void 0,(function(){return mi(this,(function(e){return t.commit("TRANSFER_ORIGINAL",{currentFileId:i,newFileId:n}),t.rootState.storage.transferOriginal(n,i),[2]}))}))},transferCoords:function(t,e){var i=e.currentFileId,n=e.newFileId;return gi(this,void 0,void 0,(function(){return mi(this,(function(e){return t.commit("TRANSFER_COORDS",{currentFileId:i,newFileId:n}),t.rootState.storage.transferCoords(n,i),[2]}))}))},storeCroppedCoords:function(t,e){var i=e.fileId,n=e.coords;return gi(this,void 0,void 0,(function(){return mi(this,(function(e){return t.commit("STORE_CROPPED_COORDS",{fileId:i,coords:n}),t.rootState.storage.storeCoords(i,n),[2]}))}))}},mutations:{SET_CURRENT_FILE:function(t,e){t.currentFile=e},OPEN_EDITOR:function(t){t.open=!0},CLOSE_EDITOR:function(t){t.open=!1},STORE_ORIGINAL:function(t,i){var n=i.fileId,r=i.src,o=i.size;e().set(t.originals,n,{src:r,size:o})},TRANSFER_ORIGINAL:function(t,i){var n,r=i.newFileId,o=i.currentFileId;e().set(t.originals,r,null===(n=t.originals)||void 0===n?void 0:n[o]),e().delete(t.originals,o)},TRANSFER_COORDS:function(t,i){var n,r=i.newFileId,o=i.currentFileId;e().set(t.croppedCoords,r,null===(n=t.croppedCoords)||void 0===n?void 0:n[o]),e().delete(t.croppedCoords,o)},STORE_CROPPED_COORDS:function(t,i){var n=i.fileId,r=i.coords;e().set(t.croppedCoords,n,r)}}}},state:{storage:i,files:[],removedFiles:[],fileOrder:[],currentAddedFiles:[],erredFiles:[],imgPreviews:{}},actions:{storeImagePreview:function(t,e){var n=e.fileId,r=e.blob,o=e.dataUrl;return wi(this,void 0,void 0,(function(){var e;return Si(this,(function(a){switch(a.label){case 0:return e=o,o?[3,2]:[4,re(r)];case 1:e=a.sent(),a.label=2;case 2:if(!e)throw new Error("Unable to save image preview.");return t.commit("ADD_IMAGE_PREVIEW",Object.freeze({fileId:n,base64:e})),i.storePreview(n,e),[2]}}))}))},setFiles:function(t,e){return wi(this,void 0,void 0,(function(){return Si(this,(function(n){return t.commit("SET_FILES",e),i.storeFileInfo(e),[2]}))}))},setCurrentFileAndOpenEditor:function(t,e){var i=e.file,n=e.clearPrevious,r=void 0===n||n,o=e.delayMs;return wi(this,void 0,void 0,(function(){return Si(this,(function(e){switch(e.label){case 0:return[4,t.dispatch("setCurrentFile",{file:i,clearPrevious:r})];case 1:return e.sent(),o?[4,bi()(o)]:[3,3];case 2:e.sent(),e.label=3;case 3:return t.commit("OPEN_EDITOR"),[2]}}))}))},closeEditor:function(t){t.commit("CLOSE_EDITOR"),t.commit("CLEAR_CURRENT_ADDED_FILES")}},getters:{currentAddedFiles:function(t){return t.currentAddedFiles.filter((function(e){return!t.removedFiles.includes(e.id)&&!t.erredFiles.find((function(t){return e.id===t.id}))}))},currentAddedErredFiles:function(t){return t.currentAddedFiles.filter((function(e){return t.erredFiles.find((function(t){return e.id===t.id}))}))},allFiles:function(t){return xi(xi([],t.files,!0),t.erredFiles,!0).sort((function(e,i){return t.fileOrder.indexOf(e.id)-t.fileOrder.indexOf(i.id)}))}},mutations:{SET_FILES:function(t,e){t.files=e},ADD_FILE:function(t,e){-1===t.fileOrder.indexOf(e.id)&&t.fileOrder.push(e.id)},SET_CURRENT_ADDED_FILES:function(t,e){t.currentAddedFiles=e},CLEAR_CURRENT_ADDED_FILES:function(t){t.currentAddedFiles=[]},REMOVE_FILE:function(t,e){var i=t.fileOrder.indexOf(e.id);t.removedFiles.push(e.id),-1!==i&&t.fileOrder.splice(i,1)},REPLACE_FILE:function(t,e){var i=e.replacedFile,n=e.newFile,r=t.fileOrder.indexOf(i.id);-1!==r&&(t.fileOrder[r]=n.id);var o=t.currentAddedFiles.findIndex((function(t){return t.id===i.id}));-1!==o&&(t.currentAddedFiles[o]=n)},PUSH_ERRED_FILE:function(t,e){var i=e.file,n=e.error;t.erredFiles.push(yi(yi({},i),{error:n}))},REMOVE_ERRED_FILE:function(t,e){t.erredFiles.splice(t.erredFiles.indexOf(e.id),1)},ADD_IMAGE_PREVIEW:function(t,i){var n=i.fileId,r=i.base64;e().set(t.imgPreviews,n,r)},SET_FILE_ORDER:function(t,e){t.fileOrder=e}}})}({storage:this.storage}),this.removeGFPreview(),this.addStoreSubscriptions(),Zr(this.$field).find(".validation_message").remove(),[4,this.rehydrateFiles()]);case 1:return a.sent(),i=0,(r=function(){if(!o.Uploader)return i<10?(i++,window.setTimeout(r,10)):void 0;o.addVM(),o.addPluploadFilters(),to.doAction("gpfup_uploader_ready",o)})(),[2]}}))}))}))}return Object.defineProperty(t.prototype,"strings",{get:function(){return window.gform.applyFilters("gpfup_strings",Kr(Kr({},window.gform_gravityforms.strings),window.GPFUP_CONSTANTS.STRINGS),this.formId,this.fieldId,this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Uploader",{get:function(){var t="gform_multifile_upload_".concat(this.formId,"_").concat(this.fieldId);return window.gfMultiFileUploader.uploaders[t]},enumerable:!1,configurable:!0}),t.prototype.rehydrateFiles=function(){var t,e;return Qr(this,void 0,void 0,(function(){var i,n,r,o,a,s,c,l,u,h,f,d;return Jr(this,(function(p){switch(p.label){case 0:if(!(i=document.querySelector("#gform_uploaded_files_".concat(this.formId))))return[2];try{n=JSON.parse(i.value)}catch(t){return this.storage.purge(),[2]}if(!(null==(r=null==n?void 0:n["input_".concat(this.fieldId)])?void 0:r.length))return this.storage.purge(),[2];o=0,a=r,p.label=1;case 1:return o<a.length?(s=a[o],(c=new window.mOxie.File(null,new Blob(["asdf"]))).name=s.uploaded_filename,c.id=null===(e=null===(t=s.temp_filename)||void 0===t?void 0:t.match(/o_[a-z0-9]+(?=\.)/))||void 0===e?void 0:e[0],!c.id&&s.temp_filename&&(c.id=s.temp_filename),c.id||(c.id=s.uploaded_filename),c.size=void 0,c.percent=100,c.status=plupload.DONE,c.rehydrated=!0,[4,this.storage.getFileInfo(c.id)]):[3,5];case 2:return l=p.sent(),[4,this.storage.getPreviewDimensions(c.id)];case 3:u=p.sent(),l&&(h=l.size,f=l.type,d=l.addedDate,h&&(c.size=h),f&&(c.type=f),d&&(c.addedDate=d)),u&&(c.previewWidth=u.width,c.previewHeight=u.height),this.Uploader.files.push(c),this.$store.commit("ADD_FILE",c),p.label=4;case 4:return o++,[3,1];case 5:return this.$store.commit("SET_FILES",this.Uploader.files),[2]}}))}))},t.prototype.addVM=function(){var t=this;if(this.Uploader){var i=this;jQuery("#gform_drag_drop_area_".concat(this.formId,"_").concat(this.fieldId)).length&&(this.vm&&this.vm.$destroy(),this.vm=new(e())({el:"#gform_drag_drop_area_".concat(this.formId,"_").concat(this.fieldId),store:this.$store,render:function(t){return t(di,{props:{fieldId:this.fieldId,formId:this.formId,up:this.up,strings:this.strings,enableCrop:this.enableCrop,enableSorting:this.enableSorting,cropRequired:this.cropRequired,aspectRatio:this.aspectRatio,maxWidth:this.maxWidth,maxHeight:this.maxHeight,minWidth:this.minWidth,minHeight:this.minHeight,exactWidth:this.exactWidth,exactHeight:this.exactHeight},ref:"root"})},data:function(){return{formId:t.formId,fieldId:t.fieldId,strings:t.strings,enableCrop:t.enableCrop,enableSorting:t.enableSorting,cropRequired:t.cropRequired,aspectRatio:t.aspectRatio,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:t.minHeight,exactWidth:t.exactWidth,exactHeight:t.exactHeight,up:t.Uploader}},mounted:function(){var t,e,n;return Qr(this,void 0,void 0,(function(){var r,o,a,s,c,l,u,h,f,d,p,g,m,v,b,y,w,S,x,C;return Jr(this,(function(A){switch(A.label){case 0:r=0,o=this.up.files,A.label=1;case 1:return r<o.length?(C=o[r],[4,i.storage.getPreview(C.id)]):[3,4];case 2:(b=A.sent())&&i.$store.commit("ADD_IMAGE_PREVIEW",Object.freeze({fileId:C.id,base64:b})),A.label=3;case 3:return r++,[3,1];case 4:a=0,s=this.up.files,A.label=5;case 5:return a<s.length?(C=s[a],[4,i.storage.getOriginal(C.id)]):[3,8];case 6:(null==(c=A.sent())?void 0:c.size)&&(null==c?void 0:c.src)&&(l=c.size,u=c.src,i.$store.commit("STORE_ORIGINAL",{fileId:C.id,src:u,size:l})),A.label=7;case 7:return a++,[3,5];case 8:h=0,f=this.up.files,A.label=9;case 9:return h<f.length?(C=f[h],[4,i.storage.getCoords(C.id)]):[3,12];case 10:(d=A.sent())&&i.$store.commit("STORE_CROPPED_COORDS",{fileId:C.id,coords:d}),A.label=11;case 11:return h++,[3,9];case 12:if(!(p=window["gpfup_rehydration_".concat(this.formId,"_").concat(this.fieldId)]))return[3,20];g=0,m=this.up.files,A.label=13;case 13:return g<m.length?(C=m[g],v=null!==(t=C.id)&&void 0!==t?t:C.name,[4,i.storage.getPreview(C.id)]):[3,16];case 14:if(b=A.sent(),C.size=p[v].size,C.type=p[v].type,b||!p[v].url)return[3,15];C.loading=!0,A.label=15;case 15:return g++,[3,13];case 16:y=function(t){var r,o,a,s,c;return Jr(this,(function(l){switch(l.label){case 0:return r=null!==(e=t.id)&&void 0!==e?e:t.name,[4,i.storage.getPreview(t.id)];case 1:return o=l.sent(),a=null===(n=p[r])||void 0===n?void 0:n.url,o||!a?(t.loading=!1,[2,"continue"]):(s=new Request(a),[4,fetch(s)]);case 2:return[4,l.sent().blob()];case 3:return c=l.sent(),t.getNative=function(){return c},t.loading=!1,[4,w.$store.dispatch("storeOriginal",t)];case 4:return l.sent(),[2]}}))},w=this,S=0,x=this.up.files,A.label=17;case 17:return S<x.length?(C=x[S],[5,y(C)]):[3,20];case 18:A.sent(),A.label=19;case 19:return S++,[3,17];case 20:return[2]}}))}))},watch:{"up.files":Di()((function(e){t.$store.dispatch("setFiles",e)}),10)},components:{GPFUP:di}}))}else console.debug("Plupload not ready yet. Cannot add Vue.")},t.prototype.removeGFPreview=function(){Zr("#gform_preview_".concat(this.formId,"_").concat(this.fieldId)).remove()},t.prototype.handleFileError=function(t,e,i){var n=this.strings;if(t.removeFile(e),i.code===plupload.FILE_EXTENSION_ERROR){var r=void 0!==t.settings.filters.mime_types?t.settings.filters.mime_types[0].extensions:t.settings.filters[0].extensions;this.$store.commit("PUSH_ERRED_FILE",{file:e,error:"".concat(n.invalid_file_extension," ").concat(r)})}else i.code===plupload.FILE_SIZE_ERROR?this.$store.commit("PUSH_ERRED_FILE",{file:e,error:n.file_exceeds_limit}):this.$store.commit("PUSH_ERRED_FILE",{file:e,error:i.message})},t.prototype.addPluploadFilters=function(){var t=this;this.Uploader?(this.Uploader.bind("BeforeUpload",(function(e,i){if(window.gform.doAction("gpfup_before_upload",t.formId,t.fieldId,i,e,t),Ye(i)){if(!i.processed)return Qr(t,void 0,void 0,(function(){var t,n,r,o,a,s,c,l,u,h,f,d,p,g,m,v;return Jr(this,(function(b){switch(b.label){case 0:return[4,pi(t=i.getNative())];case 1:n=b.sent(),b.label=2;case 2:return b.trys.push([2,4,,5]),[4,qr.orientation(t)];case 3:return r=b.sent(),[3,5];case 4:return o=b.sent(),r=0,console.debug("Orientation check failed. File type is probably not supported. Message:",o),[3,5];case 5:return a=![0,1,void 0].includes(r),window.gform.applyFilters("gpfup_skip_image_loader",!a&&!this.enableCrop,this.formId,this.fieldId,this)?(i.processed=!0,this.$store.dispatch("storeOriginal",i),e.stop(),e.start(),[2]):this.enableCrop&&(s=!0,this.minWidth&&this.minHeight&&(this.minWidth>n.width||this.minHeight>n.height)?(this.handleFileError(e,i,{code:"does_not_meet_minimum_dimensions",message:this.strings.does_not_meet_minimum_dimensions.replace("{minWidth}",this.minWidth.toString()).replace("{minHeight}",this.minHeight.toString())}),s=!1):this.minWidth&&this.minWidth>n.width?(this.handleFileError(e,i,{code:"does_not_meet_minimum_width",message:this.strings.does_not_meet_minimum_width.replace("{minWidth}",this.minWidth.toString())}),s=!1):this.minHeight&&this.minHeight>n.height&&(this.handleFileError(e,i,{code:"does_not_meet_minimum_height",message:this.strings.does_not_meet_minimum_height.replace("{minHeight}",this.minHeight.toString())}),s=!1),!s)?(e.stop(),e.start(),[2]):i.cropped?[3,7]:[4,this.$store.dispatch("storeOriginal",i)];case 6:b.sent(),b.label=7;case 7:return c={maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,aspectRatio:void 0,crop:void 0},this.enableCrop&&(c={maxWidth:null!==(h=this.exactWidth||this.maxWidth)&&void 0!==h?h:void 0,maxHeight:null!==(f=this.exactHeight||this.maxHeight)&&void 0!==f?f:void 0,minWidth:null!==(p=null!==(d=this.exactWidth)&&void 0!==d?d:this.minWidth)&&void 0!==p?p:void 0,minHeight:null!==(m=null!==(g=this.exactHeight)&&void 0!==g?g:this.minHeight)&&void 0!==m?m:void 0,aspectRatio:null!==(v=this.exactWidth||this.exactHeight?void 0:this.aspectRatio)&&void 0!==v?v:void 0,crop:!(!this.enableCrop||i.cropped)||void 0}),[4,Mi({image:i,stripMetadata:window.gform.applyFilters("gpfup_strip_image_metadata",!0,this.formId,this.fieldId),loadImageOptions:window.gform.applyFilters("gpfup_image_loader_options",c,this.formId,this.fieldId,this),jpegQuality:window.gform.applyFilters("gpfup_jpeg_quality",.92,this.formId,this.fieldId,this)})];case 8:return l=b.sent(),(u=Ue({up:e,$store:this.$store,fieldId:this.fieldId,formId:this.formId,newFile:l,existingFile:i})).processed=!0,He(e,u),[2]}}))})),!1;t.$store.dispatch("storeImagePreview",{fileId:i.id,blob:i.getNative()})}return i.addedDate||(i.addedDate=new Date),!(!i.cropped&&t.cropRequired&&Ye(i)&&(t.$store.dispatch("setCurrentFileAndOpenEditor",{file:i,clearPrevious:t.$store.getters.currentAddedFiles<=1,delayMs:void 0===t.$store.getters.currentImageIndex?300:void 0}),1))})),this.Uploader.bind("FilesAdded",(function(e,i){t.cropRequired&&(e.replacingFile||t.$store.commit("SET_CURRENT_ADDED_FILES",i));for(var n=0,r=i;n<r.length;n++){var o=r[n];t.$store.commit("ADD_FILE",o)}"replacingFile"in e&&delete e.replacingFile})),this.Uploader.bind("FileUploaded",(function(e,i,n){var r=JSON.parse(n.response);"error"==r.status&&t.handleFileError(e,i,r.error),Ri(t.formId,t.fieldId,t.$store.state.fileOrder)})),this.Uploader.bind("FilesRemoved",(function(e,i){for(var n=0,r=i;n<r.length;n++){var o=r[n];t.storage.purgeFile(o),t.$store.commit("REMOVE_FILE",o)}})),this.Uploader.bind("Error",(function(e,i){t.$store.commit("ADD_FILE",i.file),t.handleFileError(e,i.file,i)}))):console.debug("Plupload not ready yet. Cannot add filters.")},t.prototype.addStoreSubscriptions=function(){var t=this;this.$store.subscribe((function(e,i){var n,r,o,a=Zr(t.$field).closest(".gpnf-modal");a.length&&(a[0].classList.forEach((function(t){var e=/gpnf-modal-(\d+)-(\d+)/.exec(t);e&&(r=e[1],o=e[2])})),null===(n=null===window||void 0===window?void 0:window["GPNestedForms_".concat(r,"_").concat(o)].modal)||void 0===n||n.checkOverflow())})),this.$store.subscribe((function(e,i){"SET_FILE_ORDER"===(null==e?void 0:e.type)&&Ri(t.formId,t.fieldId,i.fileOrder,!0)}))},t}();const io=eo;for(var no in window)if(window.hasOwnProperty(no)&&0===no.indexOf("GPFUP_FORM_INIT_"))for(var ro=0,oo=window[no];ro<oo.length;ro++){var ao=oo[ro],so=ao.formId,co=ao.fieldId;window["GPFUP_".concat(so,"_").concat(co)]=new io(ao)}})()})();
//# sourceMappingURL=gp-file-upload-pro.js.map