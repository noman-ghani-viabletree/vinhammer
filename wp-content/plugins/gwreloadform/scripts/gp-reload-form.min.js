!function(i){window.gwrf=window.GPReloadForm=function(r){var o=this;if(o.formId=r.formId,o.spinnerUrl=r.spinnerUrl,o.refreshTime=r.refreshTime,o.refreshTimeout=null,window["gwrf_"+r.formId])return window["gwrf_"+r.formId];o.formWrapper=i("#gform_wrapper_"+o.formId),o.staticElem=o.formWrapper.parent().add("#gf-cache-buster-form-container-"+o.formId).first();var e=i("<div>").append(o.formWrapper.clone());if(e.find(".ginput_counter").remove(),o.formHtml=e.html(),o.spinnerInitialized=!1,o.staticElem.data("gwrf_"+o.formId))return o.staticElem.data("gwrf_"+o.formId);o.init=function(){i(document).bind("gform_confirmation_loaded",function(r,e){e==o.formId&&(window["RELOAD_FORM_MARKUP_"+e]&&(o.formHtml=window["RELOAD_FORM_MARKUP_"+e].replace(/gformGP_RELOAD_FORM_ESCAPEDRedirect\(\){/g,"gformRedirect(){")),o.refreshTime<=0||0<o.staticElem.find(".form_saved_message").length||(o.refreshTimeout=setTimeout(function(){o.reloadForm()},1e3*o.refreshTime)))}),o.staticElem.on("click","a.gws-reload-form",function(r){r.preventDefault();var e=parseInt(r.currentTarget.getAttribute("data-formId"));if(o.formId!==e)return window["gwrf_"+e].reloadForm();o.reloadForm()}),o.staticElem.data("gwrf_"+o.formId,o)},o.reloadForm=function(){o.refreshTimeout&&clearTimeout(o.refreshTimeout);var r=o.staticElem.find("#gform_confirmation_wrapper_"+o.formId+", .gform_confirmation_message_"+o.formId+", #gform_wrapper_"+o.formId);(r=gform.applyFilters("gprf_replacing_elem",r,o.formId,o)).replaceWith(o.formHtml),window["gf_submitting_"+o.formId]=!1,gformInitSpinner(o.formId,o.spinnerUrl),o.clearGPNFEntries(),i(document).trigger("gform_post_render",[parseInt(o.formId),1]),window.gformInitDatepicker&&gformInitDatepicker()},o.clearGPNFEntries=function(){o.formWrapper.find(".gpnf-nested-entries-container").each(function(){var r=i(this).siblings('input[type="hidden"][data-bind]').prop("id").replace("input_"+o.formId+"_",""),e=window["GPNestedForms_{0}_{1}".format(o.formId,r)];e&&(e.entries=[])})},o.init()}}(jQuery);
//# sourceMappingURL=gp-reload-form.js.map