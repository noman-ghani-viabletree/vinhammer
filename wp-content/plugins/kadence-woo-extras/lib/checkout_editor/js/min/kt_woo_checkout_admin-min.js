function openNewFieldForm(e){ktwc_settings.openNewFieldForm(e)}function openEditFieldForm(e,n){ktwc_settings.openEditFieldForm(e,n)}function removeSelectedFields(){ktwc_settings.removeSelectedFields()}function enableSelectedFields(){ktwc_settings.enableDisableSelectedFields(1)}function disableSelectedFields(){ktwc_settings.enableDisableSelectedFields(0)}function fieldTypeChangeListner(e){ktwc_settings.fieldTypeChangeListner(e)}function ktwcSelectAllCheckoutFields(e){ktwc_settings.selectAllCheckoutFields(e)}var ktwc_settings=function(e,n,i){function t(n){var i=e(n).find("input[name=fname]").val(),t=e(n).find("select[name=ftype]").val(),a=e(n).find("input[name=flabel]").val(),d=e(n).find("input[name=fplaceholder]").val(),l=e(n).find("input[name=foptions]").val(),s=e(n).find("input[name=fclass]").val(),f=e(n).find("input[name=flabelclass]").val(),o=e(n).find("input[name=frequired]").prop("checked"),c=e(n).find("input[name=fclearRow]").prop("checked"),p=e(n).find("input[name=fenabled]").prop("checked"),r=e(n).find("input[name=fshowinemail]").prop("checked"),u=e(n).find("input[name=fshowinorder]").prop("checked"),_=e(n).find("select[name=fvalidate]").val(),m="";if(""==i||"billing_"==i?m="Name is required":""==t&&(m="Type is required"),""!=m)return e(n).find(".err_msgs").html(m),!1;o=o?1:0,c=c?1:0,p=p?1:0,r=r?1:0,u=u?1:0,_=_||"";var h=e("#kt_checkout_fields tbody tr").length,v='<tr class="row_'+h+'">';return v+='<td width="1%" class="sort ui-sortable-handle">',v+='<input type="hidden" name="f_order['+h+']" class="f_order" value="'+h+'" />',v+='<input type="hidden" name="f_name['+h+']" class="f_name" value="'+i+'" />',v+='<input type="hidden" name="f_name_new['+h+']" class="f_name_new" value="'+i+'" />',v+='<input type="hidden" name="f_type['+h+']" class="f_type" value="'+t+'" />',v+='<input type="hidden" name="f_label['+h+']" class="f_label" value="'+a+'" />',v+='<input type="hidden" name="f_placeholder['+h+']" class="f_placeholder" value="'+d+'" />',v+='<input type="hidden" name="f_options['+h+']" class="f_options" value="'+l+'" />',v+='<input type="hidden" name="f_class['+h+']" class="f_class" value="'+s+'" />',v+='<input type="hidden" name="f_label_class['+h+']" class="f_label_class" value="'+f+'" />',v+='<input type="hidden" name="f_required['+h+']" class="f_required" value="'+o+'" />',v+='<input type="hidden" name="f_clear['+h+']" class="f_clear" value="'+c+'" />',v+='<input type="hidden" name="f_enabled['+h+']" class="f_enabled" value="'+p+'" />',v+='<input type="hidden" name="f_show_in_email['+h+']" class="f_show_in_email" value="'+r+'" />',v+='<input type="hidden" name="f_show_in_order['+h+']" class="f_show_in_order" value="'+u+'" />',v+='<input type="hidden" name="f_validation['+h+']" class="f_validation" value="'+_+'" />',v+='<input type="hidden" name="f_deleted['+h+']" class="f_deleted" value="0" />',v+="</td>",v+='<td ><input type="checkbox" /></td>',v+='<td class="name">'+i+"</td>",v+='<td class="id">'+t+"</td>",v+="<td>"+a+"</td>",v+="<td>"+d+"</td>",v+="<td>"+_+"</td>",v+=1==o?'<td class="status"><span class="status-enabled tips">Yes</span></td>':'<td class="status">-</td>',v+=1==c?'<td class="status"><span class="status-enabled tips">Yes</span></td>':'<td class="status">-</td>',v+=1==p?'<td class="status"><span class="status-enabled tips">Yes</span></td>':'<td class="status">-</td>',v+='<td><button type="button" class="f_edit_btn" onclick="openEditFieldForm(this,'+h+')">Edit</button></td>',v+="</tr>",e("#kt_checkout_fields tbody tr:last").after(v),!0}function a(n){var i=e(n).find("input[name=rowId]").val(),t=e(n).find("input[name=fnameNew]").val(),a=e(n).find("select[name=ftype]").val(),d=e(n).find("input[name=flabel]").val(),l=e(n).find("input[name=fplaceholder]").val(),s=e(n).find("input[name=foptions]").val(),f=e(n).find("input[name=fclass]").val(),o=e(n).find("input[name=flabelclass]").val(),c=e(n).find("input[name=frequired]").prop("checked"),p=e(n).find("input[name=fclearRow]").prop("checked"),r=e(n).find("input[name=fenabled]").prop("checked"),u=e(n).find("input[name=fshowinemail]").prop("checked"),_=e(n).find("input[name=fshowinorder]").prop("checked"),m=e(n).find("select[name=fvalidate]").val(),h="";if(""==t?h="Name is required":""==a&&(h="Type is required"),""!=h)return e(n).find(".err_msgs").html(h),!1;c=c?1:0,p=p?1:0,r=r?1:0,u=u?1:0,_=_?1:0,m=m||"";var v=e("#kt_checkout_fields tbody").find(".row_"+i);return v.find(".f_name").val(t),v.find(".f_type").val(a),v.find(".f_label").val(d),v.find(".f_placeholder").val(l),v.find(".f_options").val(s),v.find(".f_class").val(f),v.find(".f_label_class").val(o),v.find(".f_required").val(c),v.find(".f_clear").val(p),v.find(".f_enabled").val(r),v.find(".f_show_in_email").val(u),v.find(".f_show_in_order").val(_),v.find(".f_validation").val(m),v.find(".td_name").html(t),v.find(".td_type").html(a),v.find(".td_label").html(d),v.find(".td_placeholder").html(l),v.find(".td_validate").html(""+m),v.find(".td_required").html(1==c?'<span class="status-enabled tips">Yes</span>':"-"),v.find(".td_clear").html(1==p?'<span class="status-enabled tips">Yes</span>':"-"),v.find(".td_enabled").html(1==r?'<span class="status-enabled tips">Yes</span>':"-"),!0}function d(e){e.find("input[name=fname]").val(""),e.find("input[name=fnameNew]").val(""),e.find("select[name=ftype]").prop("selectedIndex",0),e.find("input[name=flabel]").val(""),e.find("input[name=fplaceholder]").val(""),e.find("input[name=foptions]").val(""),e.find("input[name=fclass]").val(""),e.find("input[name=flabelclass]").val(""),e.find("select[name=fvalidate] option:selected").removeProp("selected"),e.find("input[name=frequired]").prop("checked",!0),e.find("input[name=fclearRow]").prop("checked",!0),e.find("input[name=fenabled]").prop("checked",!0),e.find("input[name=fshowinemail]").prop("checked",!0),e.find("input[name=fshowinorder]").prop("checked",!0)}function l(){e("#kt_checkout_fields tbody tr").each((function(n,i){e("input.f_order",i).val(parseInt(e(i).index("#kt_checkout_fields tbody tr")))}))}function s(e){e.find(".rowOptions").show(),e.find(".rowPlaceholder").show(),e.find(".rowValidate").show()}return e("#kt_woo_new_field_form").dialog({modal:!0,width:500,resizable:!1,autoOpen:!1,buttons:[{text:"Add New Field",click:function(){var n;t(this)&&e(this).dialog("close")}}]}),e("#kt_woo_edit_field_form").dialog({modal:!0,width:500,resizable:!1,autoOpen:!1,buttons:[{text:"Edit Field",click:function(){var n;a(this)&&e(this).dialog("close")}}]}),e("select.kt-enhanced-multi-select").select2({minimumResultsForSearch:10,allowClear:!0,placeholder:e(this).data("placeholder")}).addClass("enhanced"),e("#kt_checkout_fields tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,helper:function(n,i){return i.children().each((function(){e(this).width(e(this).width())})),i.css("left","0"),i}}),e("#kt_checkout_fields tbody").on("sortstart",(function(e,n){n.item.css("background-color","#f6f6f6")})),e("#kt_checkout_fields tbody").on("sortstop",(function(e,n){n.item.removeAttr("style"),l()})),_openNewFieldForm=function n(i){"billing"!=i&&"shipping"!=i&&"additional"!=i||(i+="_");var t=e("#kt_woo_new_field_form");d(t),t.find("input[name=fname]").val(i),t.find("select[name=ftype]").change(),t.find("input[name=fclass]").val("form-row-wide"),e("#kt_woo_new_field_form").dialog("open")},_openEditFieldForm=function n(i,t){var a=e(i).closest("tr"),d=a.find(".f_custom").val(),l=a.find(".f_name").val(),s=a.find(".f_type").val(),f=a.find(".f_label").val(),o=a.find(".f_placeholder").val(),c=a.find(".f_options").val(),p=a.find(".f_class").val(),r=a.find(".f_label_class").val(),u=a.find(".f_required").val(),_=a.find(".f_clear").val(),m=a.find(".f_enabled").val(),h=a.find(".f_validation").val(),v=a.find(".f_show_in_email").val(),b=a.find(".f_show_in_order").val();d=1==d,u=1==u,_=1==_,m=1==m,h=h.split(","),v=1==v,b=1==b,v=1!=d||v,b=1!=d||b;var k=e("#kt_woo_edit_field_form");k.find("input[name=rowId]").val(t),k.find("input[name=fname]").val(l),k.find("input[name=fnameNew]").val(l),k.find("select[name=ftype]").val(s),k.find("input[name=flabel]").val(f),k.find("input[name=fplaceholder]").val(o),k.find("input[name=foptions]").val(c),k.find("input[name=fclass]").val(p),k.find("input[name=flabelclass]").val(r),k.find("select[name=fvalidate]").val(h).trigger("change"),k.find("input[name=frequired]").prop("checked",u),k.find("input[name=fclearRow]").prop("checked",_),k.find("input[name=fenabled]").prop("checked",m),k.find("input[name=fshowinemail]").prop("checked",v),k.find("input[name=fshowinorder]").prop("checked",b),k.find("select[name=ftype]").change(),e("#kt_woo_edit_field_form").dialog("open"),0==d?(k.find("input[name=fnameNew]").prop("disabled",!0),k.find("select[name=ftype]").prop("disabled",!0),k.find("input[name=fshowinemail]").prop("disabled",!0),k.find("input[name=fshowinorder]").prop("disabled",!0),k.find("input[name=flabel]").focus()):(k.find("input[name=fnameNew]").prop("disabled",!1),k.find("select[name=ftype]").prop("disabled",!1),k.find("input[name=fshowinemail]").prop("disabled",!1),k.find("input[name=fshowinorder]").prop("disabled",!1))},_removeSelectedFields=function n(){e("#kt_checkout_fields tbody tr").removeClass("strikeout"),e("#kt_checkout_fields tbody input:checkbox[name=select_field]:checked").each((function(){var n=e(this).closest("tr");n.hasClass("strikeout")||n.addClass("strikeout"),n.find(".f_deleted").val(1),n.find(".f_edit_btn").prop("disabled",!0)}))},_enableDisableSelectedFields=function n(i){e("#kt_checkout_fields tbody input:checkbox[name=select_field]:checked").each((function(){var n=e(this).closest("tr");0==i?n.hasClass("kt-woo-disabled")||n.addClass("kt-woo-disabled"):n.removeClass("kt-woo-disabled"),n.find(".f_edit_btn").prop("disabled",1!=i),n.find(".td_enabled").html(1==i?'<span class="status-enabled tips">Yes</span>':"-"),n.find(".f_enabled").val(i)}))},_fieldTypeChangeListner=function n(i){var t=e(i).val(),a=e(i).closest("form");s(a),"select"===t||"radio"===t?(a.find(".rowPlaceholder").hide(),a.find(".rowValidate").hide()):a.find(".rowOptions").hide()},_selectAllCheckoutFields=function n(i){var t=e(i).prop("checked");e("#kt_checkout_fields tbody input:checkbox[name=select_field]").prop("checked",t)},{openNewFieldForm:_openNewFieldForm,openEditFieldForm:_openEditFieldForm,removeSelectedFields:_removeSelectedFields,enableDisableSelectedFields:_enableDisableSelectedFields,fieldTypeChangeListner:_fieldTypeChangeListner,selectAllCheckoutFields:_selectAllCheckoutFields}}(window.jQuery,window,document);